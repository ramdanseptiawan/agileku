(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{15114:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>sO});var a=t(95155),r=t(12115),n=t(9465),l=t(71007),i=t(32919),o=t(78749),d=t(92657);let c=()=>{let[e,s]=(0,r.useState)(""),[t,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),[x,g]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),{login:b}=(0,n.A)(),f=async s=>{s.preventDefault(),g(""),h(!0);try{let s=await b(e,t);s.success||g(s.error)}catch(e){g("Terjadi kesalahan saat login")}finally{h(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"mx-auto h-12 w-12 bg-blue-600 rounded-xl flex items-center justify-center mb-4",children:(0,a.jsx)(l.A,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Demo Credentials:"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Admin:"})," admin / 123"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"User:"})," user / 123"]})]})]}),(0,a.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[x&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:x}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(l.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"username",type:"text",value:e,onChange:e=>s(e.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 text-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your username",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"password",type:m?"text":"password",value:t,onChange:e=>c(e.target.value),className:"block w-full pl-10 pr-12 py-3 border border-gray-300 text-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your password",required:!0}),(0,a.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!m),children:m?(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,a.jsx)(d.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),(0,a.jsx)("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})]})]})})})};var m=t(54416),u=t(74783),x=t(23861),g=t(85339),p=t(81284),h=t(40646),b=t(13062),f=t(14186),j=t(39360);let y=e=>{let{announcements:s,readAnnouncements:t,markAsRead:r,formatDate:n,getPriorityIcon:i,getPriorityColor:o,getPriorityText:d,getAudienceText:c}=e;return 0===s.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)(x.A,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg",children:"Belum ada pengumuman"}),(0,a.jsx)("p",{className:"text-sm",children:"Pengumuman terbaru akan muncul di sini"})]}):(0,a.jsx)("div",{className:"space-y-6",children:s.map(e=>{let s=t.has(e.id);return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:-translate-y-1 ".concat(s?"opacity-75":"border-l-4"," ").concat(s||"high"!==e.priority?s||"medium"!==e.priority?s?"":"border-l-blue-500":"border-l-yellow-500":"border-l-red-500"),onClick:()=>!s&&r(e.id),children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat("high"===e.priority?"bg-red-100":"medium"===e.priority?"bg-yellow-100":"bg-blue-100"),children:i(e.priority)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold ".concat(s?"text-gray-600":"text-gray-800"),children:e.title}),!s&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white text-xs px-3 py-1 rounded-full font-semibold",children:"✨ Baru"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("high"===e.priority?"text-red-700 bg-red-100 border border-red-200":"medium"===e.priority?"text-yellow-700 bg-yellow-100 border border-yellow-200":"text-blue-700 bg-blue-100 border border-blue-200"),children:d(e.priority)}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold bg-gray-100 text-gray-700 border border-gray-200",children:c(e.target_audience||e.targetAudience)})]})]}),(0,a.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat(s?"bg-gray-50 text-gray-600":"bg-blue-50 text-gray-800"),children:(0,a.jsx)("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:e.content})}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{size:16,className:"text-blue-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.author||"Admin"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{size:16,className:"text-green-500"}),(0,a.jsx)("span",{children:n(e.created_at||e.createdAt)})]})]}),(e.updated_at||e.updatedAt)!==(e.created_at||e.createdAt)&&(0,a.jsxs)("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:["Diperbarui: ",n(e.updated_at||e.updatedAt)]})]})]})},e.id)})})},v=e=>{let{isModal:s=!1,onClose:t}=e,[l,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(new Set),{currentUser:u}=(0,n.A)(),x=(0,r.useCallback)(async()=>{try{let e=await j.Ay.announcement.getUserAnnouncements();if(e.success){let s=(e.announcements||[]).sort((e,s)=>{let t=new Date(e.created_at||e.createdAt);return new Date(s.created_at||s.createdAt)-t});i(s)}else console.error("Failed to load announcements:",e.message),i([])}catch(e){console.error("Error loading announcements:",e),i([])}},[]),f=(0,r.useCallback)(()=>{let e=(null==u?void 0:u.id)||"guest",s=localStorage.getItem("readAnnouncements_".concat(e));s&&c(new Set(JSON.parse(s)))},[null==u?void 0:u.id]);(0,r.useEffect)(()=>{x(),f()},[x,f]);let v=e=>{let s=(null==u?void 0:u.id)||"guest",t=new Set([...o,e]);c(t),localStorage.setItem("readAnnouncements_".concat(s),JSON.stringify([...t]))},N=()=>{let e=(null==u?void 0:u.id)||"guest",s=l.map(e=>e.id);c(new Set(s)),localStorage.setItem("readAnnouncements_".concat(e),JSON.stringify(s))},k=e=>new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e=>{switch(e){case"high":return(0,a.jsx)(g.A,{size:16,className:"text-red-500"});case"medium":return(0,a.jsx)(p.A,{size:16,className:"text-yellow-500"});default:return(0,a.jsx)(h.A,{size:16,className:"text-blue-500"})}},S=e=>{switch(e){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";default:return"border-l-blue-500 bg-blue-50"}},A=e=>{switch(e){case"high":return"Tinggi";case"medium":return"Sedang";default:return"Normal"}},C=e=>{switch(e){case"users":return"Pengguna";case"admins":return"Admin";default:return"Semua"}},D=l.filter(e=>!o.has(e.id)).length;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-5xl w-full max-h-[95vh] overflow-hidden shadow-2xl",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"bg-opacity-20 p-3 rounded-full",children:(0,a.jsx)(b.A,{className:"text-white",size:28})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Pusat Pengumuman"}),(0,a.jsx)("p",{className:"text-blue-100 text-sm",children:"Informasi terbaru untuk Anda"})]}),D>0&&(0,a.jsxs)("div",{className:"bg-red-500 text-white px-3 py-1 rounded-full flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,a.jsxs)("span",{className:"font-semibold",children:[D," baru"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[D>0&&(0,a.jsxs)("button",{onClick:N,className:"bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2",children:[(0,a.jsx)(d.A,{size:16}),"Tandai Semua Dibaca"]}),(0,a.jsx)("button",{onClick:t,className:"bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition-all duration-200",children:(0,a.jsx)(m.A,{size:20})})]})]})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-140px)] bg-gray-50",children:(0,a.jsx)(y,{announcements:l,readAnnouncements:o,markAsRead:v,formatDate:k,getPriorityIcon:w,getPriorityColor:S,getPriorityText:A,getAudienceText:C})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"bg-opacity-20 p-4 rounded-full",children:(0,a.jsx)(b.A,{className:"text-white",size:32})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Pusat Pengumuman"}),(0,a.jsx)("p",{className:"text-blue-100 text-lg",children:"Informasi terbaru dan penting untuk Anda"})]}),D>0&&(0,a.jsxs)("div",{className:"bg-red-500 text-white px-4 py-2 rounded-full flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:[D," baru"]})]})]}),D>0&&(0,a.jsxs)("button",{onClick:N,className:"bg-opacity-20 hover:bg-opacity-30 text-white px-6 py-3 rounded-lg transition-all duration-200 flex items-center gap-2 font-semibold",children:[(0,a.jsx)(d.A,{size:20}),"Tandai Semua Dibaca"]})]})}),(0,a.jsx)("div",{className:"p-8 bg-gray-50",children:(0,a.jsx)(y,{announcements:l,readAnnouncements:o,markAsRead:v,formatDate:k,getPriorityIcon:w,getPriorityColor:S,getPriorityText:A,getAudienceText:C})})]})})})},N=e=>{let{onClick:s}=e,[t,l]=(0,r.useState)(0),[i,o]=(0,r.useState)(!1),{currentUser:d}=(0,n.A)(),c=(0,r.useCallback)(()=>{if(!d)return void l(0);let e=localStorage.getItem("announcements");if(!e)return void l(0);let s=JSON.parse(e).filter(e=>"all"===e.targetAudience||"students"===e.targetAudience&&(null==d?void 0:d.role)==="user"||"instructors"===e.targetAudience&&(null==d?void 0:d.role)==="admin"),t=d.id||"guest",a=localStorage.getItem("readAnnouncements_".concat(t)),r=a?new Set(JSON.parse(a)):new Set;l(s.filter(e=>!r.has(e.id)).length)},[null==d?void 0:d.id,null==d?void 0:d.role]);return(0,r.useEffect)(()=>{c();let e=()=>{c()};window.addEventListener("storage",e);let s=setInterval(c,3e4);return()=>{window.removeEventListener("storage",e),clearInterval(s)}},[c]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{s?s():o(!0)},className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Pengumuman",children:[(0,a.jsx)(x.A,{size:20}),t>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:t>99?"99+":t})]}),i&&(0,a.jsx)(v,{isModal:!0,onClose:()=>{o(!1),setTimeout(c,100)}})]})},k=e=>{let{isSidebarOpen:s,setIsSidebarOpen:t}=e;return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 lg:hidden",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Modern LMS"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N,{}),(0,a.jsx)("button",{onClick:()=>t(!s),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors",children:s?(0,a.jsx)(m.A,{size:24}):(0,a.jsx)(u.A,{size:24})})]})]})})};var w=t(57340),S=t(5040),A=t(72713),C=t(59947),D=t(81497),P=t(75525),z=t(69037),T=t(57434),I=t(381),E=t(13717),M=t(92749),U=t(17580),F=t(87949),R=t(34835);let L=e=>{var s;let{currentView:t,setCurrentView:r,isSidebarOpen:i,setIsSidebarOpen:o,userRole:d,onAnnouncementClick:c}=e,{currentUser:g,logout:p}=(0,n.A)(),h=[{id:"dashboard",label:"Home",icon:w.A,badge:null},{id:"courses",label:"Courses",icon:S.A,badge:null},{id:"profile",label:"Profile",icon:l.A,badge:null},{id:"menu",label:"Menu",icon:u.A,badge:null}],b=(()=>{let e=[{id:"profile",label:"Profile",icon:l.A,badge:null}];return"admin"===d?[{id:"overview",label:"Overview",icon:A.A,badge:null},{id:"courses",label:"Courses",icon:S.A,badge:null},{id:"quizzes",label:"Quiz Manager",icon:C.A,badge:null},{id:"surveys",label:"Survey Manager",icon:D.A,badge:null},{id:"stage-management",label:"Stage Management",icon:P.A,badge:null},{id:"announcements",label:"Announcements",icon:x.A,badge:null},{id:"certificates",label:"Certificates",icon:z.A,badge:null},{id:"project-instructions",label:"Project Instructions",icon:T.A,badge:null},{id:"course-instructions",label:"Course Instructions",icon:I.A,badge:null},{id:"course-config",label:"Course Configuration",icon:E.A,badge:null},{id:"users",label:"User Management",icon:M.A,badge:null},{id:"test-results",label:"Test Results",icon:A.A,badge:null},{id:"students",label:"Students",icon:U.A,badge:null},...e]:[{id:"dashboard",label:"Dashboard",icon:w.A,badge:null},{id:"courses",label:"My Courses",icon:S.A,badge:null},{id:"announcements",label:"Announcements",icon:x.A,badge:null},{id:"achievements",label:"Achievements",icon:z.A,badge:null},...e]})(),f=e=>{if(console.log("Sidebar: Menu clicked, viewId =",e),"menu"===e)return void o(!0);console.log("Sidebar: Setting currentView to",e),r(e),window.innerWidth<1024&&o(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 lg:hidden",children:(0,a.jsx)("div",{className:"flex items-center justify-around py-1",children:h.map(e=>{let s=e.icon,r=t===e.id;return(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"flex flex-col items-center justify-center p-3 min-w-0 flex-1 relative touch-manipulation transition-colors ".concat(r?"text-blue-600":"text-gray-500"),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(s,{size:22,className:"transition-all duration-200 ".concat(r?"text-blue-600 scale-110":"text-gray-500")}),e.badge&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center font-medium",children:e.badge})]}),(0,a.jsx)("span",{className:"text-xs mt-1 font-medium truncate transition-colors ".concat(r?"text-blue-600":"text-gray-500"),children:e.label})]},e.id)})})}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>o(!1)}),(0,a.jsxs)("div",{className:"\n        fixed left-0 top-0 min-h-screen w-72 bg-white border-r border-gray-200 shadow-lg z-50 transform transition-all duration-300 ease-in-out\n        lg:relative lg:translate-x-0 lg:z-10 lg:flex-shrink-0 lg:min-h-screen\n        ".concat(i?"translate-x-0":"-translate-x-full lg:translate-x-0","\n      "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(F.A,{className:"text-white",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Modern LMS"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Learning Platform"})]})]}),(0,a.jsx)("button",{onClick:()=>o(!1),className:"p-2 rounded-lg text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors lg:hidden touch-manipulation",children:(0,a.jsx)(m.A,{size:20})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-semibold text-base",children:(null==g||null==(s=g.username)?void 0:s.charAt(0).toUpperCase())||"U"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-gray-900 font-semibold text-sm",children:(null==g?void 0:g.username)||"User"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs capitalize",children:d||"Student"})]}),(0,a.jsx)(N,{onClick:()=>{c&&c()}})]})}),(0,a.jsx)("nav",{className:"flex-1 p-4 overflow-y-auto",children:(0,a.jsx)("div",{className:"space-y-1",children:b.map(e=>{let s=e.icon,r=t===e.id;return(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg transition-all duration-200 group touch-manipulation ".concat(r?"bg-blue-50 text-blue-600 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(s,{size:20,className:"transition-all duration-200 ".concat(r?"text-blue-600":"text-gray-500 group-hover:text-gray-700")}),(0,a.jsx)("span",{className:"font-medium text-sm ".concat(r?"text-blue-600":"text-gray-700"),children:e.label})]}),e.badge&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat(r?"bg-blue-100 text-blue-600":"bg-red-500 text-white"),children:e.badge})]},e.id)})})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:()=>{p(),o(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-600 hover:bg-red-50 hover:text-red-600 transition-colors touch-manipulation",children:[(0,a.jsx)(R.A,{size:20}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"Logout"})]})})]})]})};var q=t(92138),O=t(66766);let _=e=>{var s;let{course:t,onStartLearning:l}=e,{currentUser:i,enrollInCourse:o,isEnrolledInCourse:d,getUserProgressSync:c,refreshUserProgress:m}=(0,n.A)(),[u,x]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null),b=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={intro:15,pretest:10,lessons:50,posttest:15,postwork:10,finalproject:10};s&&s.stepWeights&&(t={...t,...s.stepWeights});let a=0;return e.forEach(e=>{t[e]&&(a+=t[e])}),Math.min(a,100)},y=!!i&&d(t.id),v=null!==g?g:i?c(t.id):0;(0,r.useEffect)(()=>{(async()=>{if(i&&y)try{let[e,s]=await Promise.all([(0,j.Hb)(t.id),fetch("".concat("https://8080-firebase-agileku-1751862903205.cluster-ejd22kqny5dfowoyipt52.cloudworkstations.dev","/api/public/courses/").concat(t.id)).then(e=>e.json())]);if(e&&e.data){let t={};s&&s.success&&s.data&&(t={hasPostWork:s.data.hasPostWork,hasFinalProject:s.data.hasFinalProject,stepWeights:s.data.stepWeights});let a=[];if(e.data.completedSteps)if(Array.isArray(e.data.completedSteps))a=e.data.completedSteps;else if("string"==typeof e.data.completedSteps)try{a=e.data.completedSteps.startsWith("[")?JSON.parse(e.data.completedSteps):e.data.completedSteps.split(",").map(e=>e.trim()).filter(e=>e)}catch(s){console.error("Failed to parse completedSteps:",s,"Raw data:",e.data.completedSteps),a=e.data.completedSteps.split(",").map(e=>e.trim()).filter(e=>e)}else console.warn("Unexpected completedSteps format:",e.data.completedSteps);let r=b(a,t);p(r)}}catch(e){console.error("Failed to fetch course progress:",e),await m()}})()},[i,y,t.id]);let N=async()=>{if(i)if(y)l(t);else{var e,s;x(!0);try{let s=await o(t.id);s.success?l(t):(console.error("Failed to enroll:",s.error),(null==(e=s.error)?void 0:e.includes("Already enrolled"))?l(t):alert(s.error||"Gagal mendaftar course"))}catch(e){console.error("Failed to enroll:",e),(null==(s=e.message)?void 0:s.includes("Already enrolled"))?l(t):alert("Terjadi kesalahan saat mendaftar course")}finally{x(!1)}}};return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.default,{src:t.image,alt:t.title,width:400,height:192,className:"w-full h-48 object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2 line-clamp-2",children:t.title}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-3",children:t.description}),(0,a.jsx)("div",{className:"flex items-center mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[(0,a.jsx)(f.A,{size:16}),(0,a.jsxs)("span",{children:[(null==(s=t.lessons)?void 0:s.length)||0," Lessons"]})]})}),i&&y&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-green-600 mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h.A,{size:16}),(0,a.jsx)("span",{children:"Enrolled"})]}),(0,a.jsxs)("span",{children:[v,"% Complete"]})]}),v>0&&(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(v,"%")}})})]}),(0,a.jsx)("button",{onClick:N,disabled:u,className:"w-full px-4 py-2 rounded-lg transition-colors flex items-center justify-center space-x-2 text-sm sm:text-base ".concat(!i?"bg-gray-300 text-gray-600 cursor-not-allowed":y?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"," ").concat(u?"opacity-50 cursor-not-allowed":""),children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Enrolling..."})]}):i?y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Continue Learning"}),(0,a.jsx)(q.A,{size:16})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Enroll Now"}),(0,a.jsx)(q.A,{size:16})]}):(0,a.jsx)("span",{children:"Login to Enroll"})})]})]})},B=e=>{let{onStartLearning:s}=e,{courses:t,enrollments:l,currentUser:i}=(0,n.A)(),o=(0,r.useMemo)(()=>{let e=Array.isArray(t)?t:[],s=Array.isArray(l)?l:[];if(!i||!s.length)return{totalCourses:e.length,enrolledCourses:0,completedCourses:0,inProgressCourses:0,averageProgress:0};let a=s.filter(e=>e.progress>=100).length,r=s.filter(e=>e.progress>0&&e.progress<100).length,n=s.reduce((e,s)=>e+(s.progress||0),0),o=s.length>0?Math.round(n/s.length):0;return{totalCourses:e.length,enrolledCourses:s.length,completedCourses:a,inProgressCourses:r,averageProgress:o}},[t,l,i]);return(0,a.jsxs)("div",{className:"space-y-6 sm:space-y-8",children:[(0,a.jsxs)("div",{className:"text-center px-4",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:i?"Welcome back, ".concat(i.full_name||i.username,"!"):"Welcome to Modern LMS"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto",children:i?"Continue your learning journey and achieve your goals":"Tingkatkan skill programming Anda dengan pembelajaran yang terstruktur"})]}),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:"Available Courses"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Array.isArray(t)&&t.length>0?t.map(e=>(0,a.jsx)(_,{course:e,onStartLearning:s},e.id)):(0,a.jsx)("div",{className:"col-span-full text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No courses available at the moment."})})})]}),(0,a.jsx)("div",{className:"px-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-4",children:i?"Your Learning Progress":"Platform Statistics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:i?o.enrolledCourses:o.totalCourses}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i?"Enrolled Courses":"Available Courses"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:o.completedCourses}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:o.inProgressCourses}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-purple-600",children:i?"".concat(o.averageProgress,"%"):o.totalCourses}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i?"Avg Progress":"Total Courses"})]})]}),i&&o.enrolledCourses>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsx)("span",{children:"Overall Progress"}),(0,a.jsxs)("span",{children:[o.averageProgress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500",style:{width:"".concat(o.averageProgress,"%")}})})]})]})})]})};var J=t(84616),W=t(99245),G=t(35169),K=t(62525),V=t(29869),Q=t(9803),H=t(34869),X=t(4229);let Y=e=>{let{lesson:s,onSave:t,onCancel:n}=e,[l,i]=(0,r.useState)({id:(null==s?void 0:s.id)||Date.now().toString(),title:(null==s?void 0:s.title)||"",type:(null==s?void 0:s.type)||"mixed",content:(null==s?void 0:s.content)||[]}),o=e=>{let s={id:Date.now().toString(),type:e};switch(e){case"text":s.content="";break;case"pdf":s.title="",s.description="",s.filename="",s.embedUrl="",s.downloadUrl="";break;case"video":s.title="",s.description="",s.src="",s.duration="";break;case"external_link":s.title="",s.description="",s.url=""}i(e=>({...e,content:[...e.content,s]}))},d=(e,s,t)=>{let a=[...l.content];a[e]={...a[e],[s]:t},i(e=>({...e,content:a}))},c=e=>{i(s=>({...s,content:s.content.filter((s,t)=>t!==e)}))},u=(e,s)=>{switch(e.type){case"text":return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4 text-gray-900",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.A,{className:"text-purple-600",size:20}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Teks"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>c(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:16})})]}),(0,a.jsx)("textarea",{value:e.content||"",onChange:e=>d(s,"content",e.target.value),placeholder:"Masukkan konten teks (mendukung Markdown)",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6})]});case"pdf":return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(T.A,{className:"text-red-600",size:20}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"PDF Document"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>c(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:16})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",value:e.title||"",onChange:e=>d(s,"title",e.target.value),placeholder:"Judul PDF",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("input",{type:"text",value:e.filename||"",onChange:e=>d(s,"filename",e.target.value),placeholder:"Nama file (contoh: document.pdf)",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsx)("textarea",{value:e.description||"",onChange:e=>d(s,"description",e.target.value),placeholder:"Deskripsi PDF",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mt-4",rows:2}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,a.jsx)("input",{type:"url",value:e.embedUrl||"",onChange:e=>d(s,"embedUrl",e.target.value),placeholder:"URL untuk embed PDF (opsional)",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("input",{type:"url",value:e.downloadUrl||"",onChange:e=>d(s,"downloadUrl",e.target.value),placeholder:"URL untuk download PDF",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]});case"video":return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Q.A,{className:"text-blue-600",size:20}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Video"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>c(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:16})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",value:e.title||"",onChange:e=>d(s,"title",e.target.value),placeholder:"Judul Video",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("input",{type:"text",value:e.duration||"",onChange:e=>d(s,"duration",e.target.value),placeholder:"Durasi (contoh: 10:30)",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsx)("textarea",{value:e.description||"",onChange:e=>d(s,"description",e.target.value),placeholder:"Deskripsi Video",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mt-4",rows:2}),(0,a.jsx)("input",{type:"url",value:e.src||"",onChange:e=>d(s,"src",e.target.value),placeholder:"URL Video (YouTube embed, Vimeo, dll)",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mt-4"})]});case"external_link":return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.A,{className:"text-green-600",size:20}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Link Eksternal"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>c(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:16})})]}),(0,a.jsx)("input",{type:"text",value:e.title||"",onChange:e=>d(s,"title",e.target.value),placeholder:"Judul Link",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4"}),(0,a.jsx)("textarea",{value:e.description||"",onChange:e=>d(s,"description",e.target.value),placeholder:"Deskripsi Link",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",rows:2}),(0,a.jsx)("input",{type:"url",value:e.url||"",onChange:e=>d(s,"url",e.target.value),placeholder:"URL Link Eksternal",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]});default:return null}};return(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-6 text-gray-900",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Edit Lesson":"Tambah Lesson Baru"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(l)},className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul Lesson"}),(0,a.jsx)("input",{type:"text",value:l.title,onChange:e=>i(s=>({...s,title:e.target.value})),placeholder:"Masukkan judul lesson",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipe Lesson"}),(0,a.jsxs)("select",{value:l.type,onChange:e=>i(s=>({...s,type:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"mixed",children:"Mixed Content (Rekomendasi)"}),(0,a.jsx)("option",{value:"reading",children:"Reading Only"}),(0,a.jsx)("option",{value:"video",children:"Video Only"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Konten Lesson"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>o("text"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Teks"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>o("pdf"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>o("video"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(Q.A,{className:"mr-2 h-4 w-4"}),"Video"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>o("external_link"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(H.A,{className:"mr-2 h-4 w-4"}),"Link"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[l.content.map((e,s)=>(0,a.jsx)("div",{children:u(e,s)},e.id||"content-".concat(s))),0===l.content.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Belum ada konten. Klik tombol di atas untuk menambah konten."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("button",{type:"button",onClick:n,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Batal"]}),(0,a.jsxs)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(X.A,{className:"mr-2 h-4 w-4"}),"Simpan Lesson"]})]})]})]})})},Z="files";class ${async init(){return new Promise((e,s)=>{let t=indexedDB.open("AgilekuLMS",1);t.onerror=()=>s(t.error),t.onsuccess=()=>{this.db=t.result,e(this.db)},t.onupgradeneeded=e=>{let s=e.target.result;if(!s.objectStoreNames.contains(Z)){let e=s.createObjectStore(Z,{keyPath:"id"});e.createIndex("type","type",{unique:!1}),e.createIndex("courseId","courseId",{unique:!1})}}})}async saveFile(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"general";return this.db||await this.init(),new Promise((a,r)=>{let n=new FileReader;n.onload=()=>{let l={id:"".concat(s,"_").concat(t,"_").concat(Date.now(),"_").concat(e.name),name:e.name,type:t,mimeType:e.type,size:e.size,courseId:s,data:n.result,uploadedAt:new Date().toISOString()},i=this.db.transaction([Z],"readwrite").objectStore(Z).add(l);i.onsuccess=()=>a({id:l.id,name:l.name,url:this.createBlobURL(l),downloadUrl:this.createBlobURL(l)}),i.onerror=()=>r(i.error)},n.onerror=()=>r(n.error),n.readAsArrayBuffer(e)})}async getFile(e){return this.db||await this.init(),new Promise((s,t)=>{let a=this.db.transaction([Z],"readonly").objectStore(Z).get(e);a.onsuccess=()=>{let e=a.result;e?s({...e,url:this.createBlobURL(e),downloadUrl:this.createBlobURL(e)}):s(null)},a.onerror=()=>t(a.error)})}async getFilesByType(e,s){return this.db||await this.init(),new Promise((t,a)=>{let r=this.db.transaction([Z],"readonly").objectStore(Z).index("courseId").getAll(e);r.onsuccess=()=>{t(r.result.filter(e=>e.type===s).map(e=>({...e,url:this.createBlobURL(e),downloadUrl:this.createBlobURL(e)})))},r.onerror=()=>a(r.error)})}async deleteFile(e){return this.db||await this.init(),new Promise((s,t)=>{let a=this.db.transaction([Z],"readwrite").objectStore(Z).delete(e);a.onsuccess=()=>s(!0),a.onerror=()=>t(a.error)})}createBlobURL(e){let s=new Blob([e.data],{type:e.mimeType});return URL.createObjectURL(s)}async getAllFiles(e){return this.db||await this.init(),new Promise((s,t)=>{let a=this.db.transaction([Z],"readonly").objectStore(Z).index("courseId").getAll(e);a.onsuccess=()=>{s(a.result.map(e=>({...e,url:this.createBlobURL(e),downloadUrl:this.createBlobURL(e)})))},a.onerror=()=>t(a.error)})}constructor(){this.db=null}}let ee=new $,es=(e,s,t)=>ee.saveFile(e,s,t),et=e=>ee.getFile(e),ea=()=>ee.init(),er=e=>ee.createBlobURL(e),en={COURSES:"courses"},el=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let t=localStorage.getItem(e);return t?JSON.parse(t):s}catch(t){return console.error("Error reading from localStorage key ".concat(e,":"),t),s}},ei=(e,s)=>{try{return localStorage.setItem(e,JSON.stringify(s)),!0}catch(s){return console.error("Error writing to localStorage key ".concat(e,":"),s),!1}},eo=()=>{let e=el(en.COURSES,[]);if(0===e.length)try{let{coursesData:e}=t(54954);if(e&&e.length>0)return ei(en.COURSES,e),e}catch(e){console.log("No coursesData found, using empty array")}return e},ed=e=>eo().find(s=>s.id===e)||null,ec=e=>{let s=eo(),t=s.findIndex(s=>s.id===e.id);if(t>=0)s[t]={...s[t],...e};else{let t=s.length>0?Math.max(...s.map(e=>e.id))+1:1;s.push({...e,id:t})}return ei(en.COURSES,s)},em=async e=>{try{if(ec(e))return console.log("Course saved successfully with file references"),!0;return!1}catch(e){return console.error("Error saving course with files:",e),!1}},eu=async e=>{try{let s=ed(e);if(!s)return null;return s}catch(e){return console.error("Error getting course with files:",e),null}},ex=e=>{var s;let{initialData:t,onSave:n,onCancel:l,isLoading:i,isEditing:o}=e,[c,u]=(0,r.useState)({id:null,title:"",description:"",category:"",level:"Beginner",duration:"",instructor:"",image:"",introMaterial:{title:"",content:[]},lessons:[]});(0,r.useEffect)(()=>{t&&Object.keys(t).length>0?(console.log("Loading initial data:",t),u(e=>{var s,a;return{id:t.id||Date.now(),title:t.title||"",description:t.description||"",category:t.category||"",level:t.level||"Beginner",duration:t.duration||"",instructor:t.instructor||"",image:t.image||"",introMaterial:{title:(null==(s=t.introMaterial)?void 0:s.title)||"",content:Array.isArray(null==(a=t.introMaterial)?void 0:a.content)?t.introMaterial.content.map(e=>({id:e.id||Date.now()+Math.random(),type:e.type||"text",content:e.content||"",title:e.title||"",description:e.description||"",uploadMethod:e.uploadMethod||"link",downloadUrl:e.downloadUrl||"",embedUrl:e.embedUrl||"",src:e.src||"",duration:e.duration||"",url:e.url||"",fileId:e.fileId||"",filename:e.filename||""})):[]},lessons:Array.isArray(t.lessons)?t.lessons:[]}})):o||u({id:Date.now(),title:"",description:"",category:"",level:"Beginner",duration:"",instructor:"",image:"",introMaterial:{title:"",content:[]},lessons:[]})},[t,o]);let[x,p]=(0,r.useState)(!1),[h,b]=(0,r.useState)(null),[f,j]=(0,r.useState)(!1),[y,v]=(0,r.useState)({}),[N,k]=(0,r.useState)(new Set),[w,A]=(0,r.useState)({});(0,r.useEffect)(()=>()=>{N.forEach(e=>{e.startsWith("blob:")&&URL.revokeObjectURL(e)})},[N]);let C=e=>{let{name:s,value:t}=e.target;u(e=>({...e,[s]:t}))},D=(e,s)=>{u(t=>({...t,introMaterial:{...t.introMaterial,[e]:s}}))},P=e=>{let s={id:Date.now().toString(),type:e};switch(e){case"text":s.content="";break;case"pdf":s.title="",s.description="",s.filename="",s.embedUrl="",s.downloadUrl="",s.uploadMethod="link",s.fileId="";break;case"video":s.title="",s.description="",s.src="",s.duration="",s.uploadMethod="link",s.fileId="";break;case"external_link":s.title="",s.description="",s.url=""}u(e=>({...e,introMaterial:{...e.introMaterial,content:[...e.introMaterial.content||[],s]}}))},z=(e,s,t)=>{u(a=>{let r=[...a.introMaterial.content||[]];if(r[e]){let a={...r[e],[s]:t};"uploadMethod"===s&&("link"===t?(a.fileId="",a.filename=""):"upload"===t&&("pdf"===a.type?(a.downloadUrl="",a.embedUrl=""):"video"===a.type&&(a.src="",a.duration=""))),r[e]=a}return{...a,introMaterial:{...a.introMaterial,content:r}}})},I=e=>{u(s=>({...s,introMaterial:{...s.introMaterial,content:(s.introMaterial.content||[]).filter((s,t)=>t!==e)}}))},M=e=>{b(e),p(!0)},U=e=>{u(s=>({...s,lessons:s.lessons.filter((s,t)=>t!==e)}))},F=(e,s)=>!!e&&(!!e.startsWith("blob:")||("video"===s?e.includes("youtube.com")||e.includes("youtu.be")||e.includes("vimeo.com")||e.startsWith("http"):e.startsWith("http")||e.startsWith("https"))),R=(e,s)=>{if(!e||e.startsWith("blob:"))return"";if("video"===s){if(!e.includes("youtube.com")&&!e.includes("youtu.be")&&!e.includes("vimeo.com")&&!e.startsWith("http"))return"URL harus berupa link YouTube, Vimeo, atau URL video langsung"}else if(!e.startsWith("http")&&!e.startsWith("https"))return"URL harus dimulai dengan http:// atau https://";return""},L=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},q=(e,s)=>{let t=c.introMaterial[e];t.embedUrl&&t.embedUrl.startsWith("blob:")&&(URL.revokeObjectURL(t.embedUrl),k(e=>{let s=new Set(e);return s.delete(t.embedUrl),s})),t.downloadUrl&&t.downloadUrl.startsWith("blob:")&&(URL.revokeObjectURL(t.downloadUrl),k(e=>{let s=new Set(e);return s.delete(t.downloadUrl),s})),t.src&&t.src.startsWith("blob:")&&(URL.revokeObjectURL(t.src),k(e=>{let s=new Set(e);return s.delete(t.src),s})),z(e,"fileId",""),z(e,"filename",""),z(e,"fileSize",""),"pdf"===s?(z(e,"downloadUrl",""),z(e,"embedUrl","")):"video"===s&&z(e,"src","")},O=async(e,s,t)=>{try{let a="".concat(t,"_").concat(s);v(e=>({...e,[a]:!0})),A(e=>({...e,[a]:0}));let r=setInterval(()=>{A(e=>({...e,[a]:Math.min((e[a]||0)+30*Math.random(),90)}))},200),n=await es(e,c.id,t);clearInterval(r),A(e=>({...e,[a]:100})),k(e=>new Set([...e,n.url,n.downloadUrl])),z(s,"fileId",n.id),z(s,"filename",n.name),z(s,"fileSize",L(e.size)),"pdf"===t?(z(s,"downloadUrl",n.downloadUrl),z(s,"embedUrl",n.url)):"video"===t&&z(s,"src",n.url),setTimeout(()=>{A(e=>{let s={...e};return delete s[a],s})},2e3)}catch(s){console.error("Error uploading file:",s),alert("Gagal mengupload file ".concat(e.name,". Silakan coba lagi."))}finally{v(e=>({...e,["".concat(t,"_").concat(s)]:!1}))}},_=async e=>{if(e.preventDefault(),!c.title.trim())return void alert("Judul course harus diisi");if(!c.category.trim())return void alert("Kategori course harus diisi");try{await n(c)}catch(e){console.error("Error saving course:",e),alert("Terjadi error saat menyimpan course.")}},B=(e,s)=>{switch(e.type){case"text":return(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.A,{className:"text-purple-600",size:16}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Teks"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>I(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:14})})]}),(0,a.jsx)("textarea",{value:e.content||"",onChange:e=>z(s,"content",e.target.value),placeholder:"Konten teks (mendukung Markdown)",className:"w-full p-2 border border-gray-300 rounded text-sm",rows:3}),e.content&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,a.jsx)(d.A,{size:12}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Preview:"})]}),(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e.content})]})]});case"pdf":return(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(T.A,{className:"text-red-600",size:16}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"PDF"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>I(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:14})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",value:e.title||"",onChange:e=>z(s,"title",e.target.value),placeholder:"Judul PDF",className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,a.jsx)("input",{type:"text",value:e.description||"",onChange:e=>z(s,"description",e.target.value),placeholder:"Deskripsi",className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(V.A,{size:16,className:"text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Upload PDF atau Input Link"})]}),(0,a.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{let t=e.target.files[0];t&&O(t,s,"pdf")},className:"w-full p-2 border border-gray-300 rounded text-sm",disabled:y["pdf_".concat(s)]}),y["pdf_".concat(s)]&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"Mengupload PDF..."}),void 0!==w["pdf_".concat(s)]&&(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(w["pdf_".concat(s)],"%")}})})]}),e.filename&&(0,a.jsxs)("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[(0,a.jsxs)("p",{className:"text-sm text-green-700 font-medium",children:["✓ File terupload: ",e.filename]}),e.fileSize&&(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["Ukuran: ",e.fileSize]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-1",children:[e.embedUrl&&(0,a.jsxs)("button",{type:"button",onClick:()=>window.open(e.embedUrl,"_blank"),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,a.jsx)(d.A,{size:12}),(0,a.jsx)("span",{children:"Preview"})]}),e.downloadUrl&&(0,a.jsxs)("button",{type:"button",onClick:()=>window.open(e.downloadUrl,"_blank"),className:"text-xs text-green-600 hover:text-green-800 flex items-center space-x-1",children:[(0,a.jsx)(T.A,{size:12}),(0,a.jsx)("span",{children:"Download"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>q(s,"pdf"),className:"text-xs text-red-600 hover:text-red-800 flex items-center space-x-1",title:"Hapus file",children:[(0,a.jsx)(K.A,{size:12}),(0,a.jsx)("span",{children:"Hapus"})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Atau edit link manual:"}),(0,a.jsx)("input",{type:"url",value:e.downloadUrl||"",onChange:e=>z(s,"downloadUrl",e.target.value),placeholder:"URL Download PDF",className:"w-full p-2 border rounded text-sm ".concat(e.downloadUrl&&!F(e.downloadUrl,"pdf")?"border-red-300 bg-red-50":"border-gray-300")}),e.downloadUrl&&!F(e.downloadUrl,"pdf")&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-red-600 mt-1",children:[(0,a.jsx)(g.A,{size:12}),(0,a.jsx)("span",{children:R(e.downloadUrl,"pdf")||"URL tidak valid"})]}),(e.embedUrl||e.downloadUrl)&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,a.jsx)(d.A,{size:12}),(0,a.jsx)("span",{className:"font-medium text-xs",children:"Preview PDF:"})]}),e.embedUrl?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("iframe",{src:e.embedUrl,className:"w-full h-64 border border-gray-300 rounded",title:"PDF Preview"}),e.downloadUrl&&(0,a.jsxs)("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-xs text-blue-600 hover:text-blue-800",children:[(0,a.jsx)(T.A,{size:12}),(0,a.jsx)("span",{children:"Download PDF"})]})]}):(0,a.jsxs)("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-blue-600 hover:text-blue-800",children:[(0,a.jsx)(T.A,{size:12}),(0,a.jsx)("span",{children:"Download PDF"})]})]}),(0,a.jsx)("input",{type:"url",value:e.embedUrl||"",onChange:e=>z(s,"embedUrl",e.target.value),placeholder:"URL Embed PDF (opsional)",className:"w-full p-2 border rounded text-sm ".concat(e.embedUrl&&!F(e.embedUrl,"pdf")?"border-red-300 bg-red-50":"border-gray-300")}),e.embedUrl&&!F(e.embedUrl,"pdf")&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-red-600 mt-1",children:[(0,a.jsx)(g.A,{size:12}),(0,a.jsx)("span",{children:R(e.embedUrl,"pdf")||"URL tidak valid"})]})]})]}),e.src&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,a.jsx)(d.A,{size:12}),(0,a.jsx)("span",{className:"font-medium text-xs",children:"Preview Video:"}),e.duration&&(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:["(",e.duration,")"]})]}),e.src.includes("youtube.com")||e.src.includes("youtu.be")?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("iframe",{width:"100%",height:"200",src:e.src.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/"),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded"}),(0,a.jsx)("div",{className:"absolute top-1 right-1 bg-red-600 text-white text-xs px-1 rounded",children:"YouTube"})]}):e.src.includes("vimeo.com")?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("iframe",{src:e.src.replace("vimeo.com/","player.vimeo.com/video/"),width:"100%",height:"200",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,className:"rounded"}),(0,a.jsx)("div",{className:"absolute top-1 right-1 bg-blue-600 text-white text-xs px-1 rounded",children:"Vimeo"})]}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("video",{controls:!0,className:"w-full h-48 rounded",src:e.src,children:"Browser Anda tidak mendukung tag video."}),(0,a.jsx)("div",{className:"absolute top-1 right-1 bg-gray-600 text-white text-xs px-1 rounded",children:e.src.startsWith("blob:")?"Upload":"Direct"})]})]})]})]});case"video":return(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Q.A,{className:"text-blue-600",size:16}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Video"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>I(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:14})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",value:e.title||"",onChange:e=>z(s,"title",e.target.value),placeholder:"Judul Video",className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,a.jsx)("input",{type:"text",value:e.description||"",onChange:e=>z(s,"description",e.target.value),placeholder:"Deskripsi Video",className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(V.A,{size:16,className:"text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Upload Video atau Input Link"})]}),(0,a.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let t=e.target.files[0];t&&O(t,s,"video")},className:"w-full p-2 border border-gray-300 rounded text-sm",disabled:y["video_".concat(s)]}),y["video_".concat(s)]&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"Mengupload Video..."}),void 0!==w["video_".concat(s)]&&(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(w["video_".concat(s)],"%")}})})]}),e.filename&&(0,a.jsxs)("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[(0,a.jsxs)("p",{className:"text-sm text-green-700 font-medium",children:["✓ File terupload: ",e.filename]}),e.fileSize&&(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["Ukuran: ",e.fileSize]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-1",children:[e.src&&(0,a.jsxs)("button",{type:"button",onClick:()=>window.open(e.src,"_blank"),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,a.jsx)(d.A,{size:12}),(0,a.jsx)("span",{children:"Preview"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>q(s,"video"),className:"text-xs text-red-600 hover:text-red-800 flex items-center space-x-1",title:"Hapus file",children:[(0,a.jsx)(K.A,{size:12}),(0,a.jsx)("span",{children:"Hapus"})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Atau edit link manual:"}),(0,a.jsx)("input",{type:"url",value:e.src||"",onChange:e=>z(s,"src",e.target.value),placeholder:"URL Video (YouTube, Vimeo, atau link langsung)",className:"w-full p-2 border rounded text-sm ".concat(e.src&&!F(e.src,"video")?"border-red-300 bg-red-50":"border-gray-300")}),e.src&&!F(e.src,"video")&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-red-600 mt-1",children:[(0,a.jsx)(g.A,{size:12}),(0,a.jsx)("span",{children:R(e.src,"video")||"URL video tidak valid"})]}),(0,a.jsx)("input",{type:"text",value:e.duration||"",onChange:e=>z(s,"duration",e.target.value),placeholder:"Durasi (contoh: 5:30)",className:"w-full p-2 border border-gray-300 rounded text-sm"})]})]})]})]});case"external_link":return(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.A,{className:"text-green-600",size:16}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Link"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>I(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:14})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",value:e.title||"",onChange:e=>z(s,"title",e.target.value),placeholder:"Judul Link",className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,a.jsx)("input",{type:"text",value:e.description||"",onChange:e=>z(s,"description",e.target.value),placeholder:"Deskripsi",className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,a.jsx)("input",{type:"url",value:e.url||"",onChange:e=>z(s,"url",e.target.value),placeholder:"URL",className:"w-full p-2 border rounded text-sm ".concat(e.url&&!F(e.url,"link")?"border-red-300 bg-red-50":"border-gray-300")}),e.url&&!F(e.url,"link")&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-red-600",children:[(0,a.jsx)(g.A,{size:12}),(0,a.jsx)("span",{children:R(e.url,"link")||"URL tidak valid"})]}),e.url&&F(e.url,"link")&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,a.jsx)(d.A,{size:12}),(0,a.jsx)("span",{className:"font-medium text-xs",children:"Preview Link:"})]}),(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-blue-600 hover:text-blue-800 break-all",children:[(0,a.jsx)(H.A,{size:12}),(0,a.jsx)("span",{className:"text-xs",children:e.url})]})]})]})]});default:return null}};return x?(0,a.jsx)(Y,{lesson:null!==h?c.lessons[h]:null,onSave:e=>{if(null!==h){let s=[...c.lessons];s[h]=e,u(e=>({...e,lessons:s}))}else u(s=>({...s,lessons:[...s.lessons,e]}));p(!1),b(null)},onCancel:()=>{p(!1),b(null)}}):(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-6 max-h-screen overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:o?"Edit Course":"Tambah Course Baru"})}),(0,a.jsxs)("form",{onSubmit:_,className:"p-6 text-gray-900 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul Course"}),(0,a.jsx)("input",{type:"text",name:"title",value:c.title||"",onChange:C,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),(0,a.jsx)("input",{type:"text",name:"category",value:c.category||"",onChange:C,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level"}),(0,a.jsxs)("select",{name:"level",value:c.level||"Beginner",onChange:C,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,a.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,a.jsx)("option",{value:"Advanced",children:"Advanced"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durasi"}),(0,a.jsx)("input",{type:"text",name:"duration",value:c.duration||"",onChange:C,placeholder:"contoh: 4 weeks",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor"}),(0,a.jsx)("input",{type:"text",name:"instructor",value:c.instructor||"",onChange:C,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Gambar"}),(0,a.jsx)("input",{type:"url",name:"image",value:c.image||"",onChange:C,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi Course"}),(0,a.jsx)("textarea",{name:"description",value:c.description||"",onChange:C,rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Materi Pengantar"}),(0,a.jsx)("button",{type:"button",onClick:()=>j(!f),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:f?"Sembunyikan":"Kelola Materi Pengantar"})]}),f&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul Materi Pengantar"}),(0,a.jsx)("input",{type:"text",value:(null==(s=c.introMaterial)?void 0:s.title)||"",onChange:e=>D("title",e.target.value),className:"w-full p-2 border border-gray-300 rounded text-sm",placeholder:"Selamat Datang di Course..."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Konten Pengantar"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>P("text"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:[(0,a.jsx)(S.A,{size:12,className:"inline mr-1"}),"Teks"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>P("pdf"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:[(0,a.jsx)(T.A,{size:12,className:"inline mr-1"}),"PDF"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>P("video"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:[(0,a.jsx)(Q.A,{size:12,className:"inline mr-1"}),"Video"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>P("external_link"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:[(0,a.jsx)(H.A,{size:12,className:"inline mr-1"}),"Link"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(c.introMaterial.content||[]).map((e,s)=>(0,a.jsx)("div",{children:B(e,s)},e.id||"intro-".concat(s))),(!c.introMaterial.content||0===c.introMaterial.content.length)&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Belum ada konten pengantar"})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Lessons (",c.lessons.length,")"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(J.A,{className:"mr-2 h-4 w-4"}),"Tambah Lesson"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[c.lessons.map((e,s)=>{var t;return(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Type: ",e.type," • Content items: ",(null==(t=e.content)?void 0:t.length)||0]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>M(s),className:"text-blue-600 hover:text-blue-800",children:(0,a.jsx)(E.A,{size:16})}),(0,a.jsx)("button",{type:"button",onClick:()=>U(s),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(K.A,{size:16})})]})]})},e.id)}),0===c.lessons.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:'Belum ada lesson. Klik "Tambah Lesson" untuk memulai.'})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("button",{type:"button",onClick:l,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Batal"]}),(0,a.jsxs)("button",{type:"submit",disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 ".concat(i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:[(0,a.jsx)(X.A,{className:"mr-2 h-4 w-4"}),i?"Menyimpan...":o?"Update Course":"Simpan Course"]})]})]})]})})};var eg=t(54954);let ep=e=>{let{courseId:s=null,onSave:t,onCancel:n}=e,[l,i]=(0,r.useState)({title:"",description:"",category:"",level:"Beginner",duration:"",instructor:"",image:"",introMaterial:{title:"",content:[]},lessons:[]}),[o,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{await ea();let n=eo();if(0===n.length&&eg.coursesData.length>0&&eg.coursesData.forEach(e=>{ec(e)}),s){var e,t,a,r;try{let a=await j.GS.getCourseById(s);if(a&&a.success&&a.data){let e=a.data,s=e.introMaterial,t=e.lessons;if("string"==typeof s)try{s=JSON.parse(s)}catch(e){console.warn("Failed to parse introMaterial:",e),s={title:"",content:[]}}if("string"==typeof t)try{t=JSON.parse(t)}catch(e){console.warn("Failed to parse lessons:",e),t=[]}i({...e,introMaterial:{title:(null==s?void 0:s.title)||"",content:Array.isArray(null==s?void 0:s.content)?s.content:[]},lessons:Array.isArray(t)?t:[]})}else{let a=await eu(parseInt(s));a&&i({...a,introMaterial:{title:(null==(e=a.introMaterial)?void 0:e.title)||"",content:Array.isArray(null==(t=a.introMaterial)?void 0:t.content)?a.introMaterial.content:[]},lessons:a.lessons||[]})}}catch(t){console.error("Error loading course from backend, trying localStorage:",t);let e=await eu(parseInt(s));e&&i({...e,introMaterial:{title:(null==(a=e.introMaterial)?void 0:a.title)||"",content:Array.isArray(null==(r=e.introMaterial)?void 0:r.content)?e.introMaterial.content:[]},lessons:e.lessons||[]})}}}catch(e){console.error("Error initializing data:",e)}})()},[s]);let c=async e=>{d(!0);try{if(await em(e))alert(s?"Kursus berhasil diperbarui!":"Kursus berhasil dibuat!"),t&&t(e);else throw Error("Gagal menyimpan kursus")}catch(e){console.error("Error saving course:",e),alert("Terjadi kesalahan saat menyimpan kursus")}finally{d(!1)}};return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[n&&(0,a.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[(0,a.jsx)(G.A,{size:20}),"Kembali"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Kursus":"Buat Kursus Baru"})]})}),(0,a.jsx)(ex,{initialData:l,onSave:c,onCancel:n,isLoading:o,isEditing:!!s})]})},eh=e=>{let{course:s,onSave:t,onCancel:r}=e;return(0,a.jsx)(ep,{courseId:null==s?void 0:s.id,onSave:t,onCancel:r})},eb=e=>{let{courses:s,onEdit:t,onDelete:r}=e;return 0===s.length?(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-gray-200 text-center",children:[(0,a.jsx)(S.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses yet"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create your first course to get started."})]}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>{var s;return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.title,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[(null==(s=e.lessons)?void 0:s.length)||0," lessons"]})]}),e.lessons&&e.lessons.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.lessons.filter(e=>"video"===e.type).length," videos, "," ",e.lessons.filter(e=>"reading"===e.type).length," readings"]})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>t(e),className:"inline-flex items-center px-3 py-2 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit course",children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>r(e.id),className:"inline-flex items-center px-3 py-2 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",title:"Delete course",children:[(0,a.jsx)(K.A,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]}),e.lessons&&e.lessons.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Lessons:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.lessons.slice(0,6).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0 ".concat("video"===e.type?"bg-red-400":"bg-green-400")}),(0,a.jsx)("span",{className:"truncate",children:e.title||"Lesson ".concat(s+1)})]},e.id||s)),e.lessons.length>6&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["+",e.lessons.length-6," more lessons"]})]})]})]},e.id)})})};var ef=t(47863),ej=t(66474);let ey=()=>{let{courses:e,user:s}=(0,n.A)(),[t,l]=(0,r.useState)(null),[i,o]=(0,r.useState)("pretest"),[d,c]=(0,r.useState)(null),[m,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{let e=s;if(!e)try{let s=localStorage.getItem("currentUser");s&&(e=JSON.parse(s))}catch(e){console.error("Error parsing stored user:",e)}if(t&&i&&e&&"admin"===e.role)try{let e=null;if((e="pretest"===i?await j.adminAPI.getCoursePreTestAdmin(t):await j.adminAPI.getCoursePostTestAdmin(t))&&e.success&&e.data&&e.data.questions){let s="string"==typeof e.data.questions?JSON.parse(e.data.questions):e.data.questions;u(s)}else u([])}catch(e){console.error("Error loading quiz:",e),u([])}else t&&i&&u([])})()},[t,i,s]);let x=e=>{o(e),c(null)},g=e=>{window.confirm("Apakah Anda yakin ingin menghapus pertanyaan ini?")&&(u(m.filter(s=>s.id!==e)),d===e&&c(null))},p=(e,s,t)=>{u(m.map(a=>a.id===e?{...a,[s]:t}:a))},h=async()=>{if(!t||0===m.length)return void alert("Please select a course and add at least one question.");let a=s;if(!a)try{let e=localStorage.getItem("currentUser");e&&(a=JSON.parse(e))}catch(e){console.error("Error parsing stored user:",e)}if(!a||"admin"!==a.role)return void alert("Only administrators can save quizzes.");let r=e.find(e=>e.id===t);if(!r)return void alert("Course not found.");let n={title:"".concat(r.title," ").concat("pretest"===i?"Pre-Test":"Post-Test"),description:"".concat("pretest"===i?"Pre-test":"Post-test"," for ").concat(r.title),courseId:t,quizType:i,questions:JSON.stringify(m),timeLimit:30,maxAttempts:3,passingScore:70,isActive:!0};try{let e=null;try{e="pretest"===i?await j.adminAPI.getCoursePreTestAdmin(t):await j.adminAPI.getCoursePostTestAdmin(t)}catch(e){console.log("No existing quiz found, creating new one")}let s=null;e&&e.success&&e.data&&e.data.id&&(s=e.data.id),s?(await j.adminAPI.updateQuiz(s,n),alert("Quiz updated successfully!")):(await j.adminAPI.createQuiz(n),alert("Quiz created successfully!")),u([])}catch(e){console.error("Error saving quiz:",e),alert("Failed to save quiz. Please try again.")}},b=(e,s)=>{let t=m.findIndex(s=>s.id===e);if(-1===t)return;let a=[...m];"up"===s&&t>0?[a[t],a[t-1]]=[a[t-1],a[t]]:"down"===s&&t<m.length-1&&([a[t],a[t+1]]=[a[t+1],a[t]]),u(a)},f=s;if(!f)try{let e=localStorage.getItem("currentUser");e&&(f=JSON.parse(e))}catch(e){console.error("Error parsing stored user:",e)}return f&&"admin"===f.role?(0,a.jsxs)("div",{className:"space-y-6 text-gray-900",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Quiz Manager"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Kelola pre-test dan post-test untuk setiap kursus"})]})}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Kursus"}),(0,a.jsxs)("select",{value:t||"",onChange:e=>{l(Number(e.target.value)),c(null)},className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"-- Pilih Kursus --"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Quiz"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>x("pretest"),className:"px-4 py-2 rounded-md ".concat("pretest"===i?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),children:"Pre-Test"}),(0,a.jsx)("button",{onClick:()=>x("posttest"),className:"px-4 py-2 rounded-md ".concat("posttest"===i?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),children:"Post-Test"})]})]})]}),t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["pretest"===i?"Pre-Test":"Post-Test"," Questions"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{let e={id:Date.now(),question:"",options:["","","",""],correct:0};u([...m,e]),c(e.id)},className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,a.jsx)(J.A,{size:16,className:"mr-1"}),"Add Question"]}),(0,a.jsxs)("button",{onClick:h,className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(X.A,{size:16,className:"mr-1"}),"Save Quiz"]})]})]}),0===m.length?(0,a.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-500",children:'No questions yet. Click "Add Question" to create one.'})}):(0,a.jsx)("div",{className:"space-y-4",children:m.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"font-medium mr-2",children:["Question ",s+1]}),d!==e.id&&(0,a.jsx)("span",{className:"text-gray-600 truncate max-w-md",children:e.question||"No question text"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>b(e.id,"up"),disabled:0===s,className:"p-1 rounded ".concat(0===s?"text-gray-400":"text-gray-700 hover:bg-gray-200"),children:(0,a.jsx)(ef.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>b(e.id,"down"),disabled:s===m.length-1,className:"p-1 rounded ".concat(s===m.length-1?"text-gray-400":"text-gray-700 hover:bg-gray-200"),children:(0,a.jsx)(ej.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>c(d===e.id?null:e.id),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:(0,a.jsx)(E.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:(0,a.jsx)(K.A,{size:16})})]})]}),d===e.id&&(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text"}),(0,a.jsx)("textarea",{value:e.question,onChange:s=>p(e.id,"question",s.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Enter your question here"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options (select one correct answer)"}),(0,a.jsx)("div",{className:"space-y-3",children:e.options.map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"radio",checked:e.correct===t,onChange:()=>p(e.id,"correct",t),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:s,onChange:s=>{let a=[...e.options];a[t]=s.target.value,p(e.id,"options",a)},className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Option ".concat(t+1)})]},t))})]})]})]},e.id))})]})]})]}):(0,a.jsx)("div",{className:"space-y-6 text-gray-900",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-red-800 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-red-600",children:f?"Only administrators can access Quiz Manager.":"Please login to access Quiz Manager."}),(0,a.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:["Current user role: ",(null==f?void 0:f.role)||"Not logged in"]})]})})};var ev=t(38564);let eN=()=>{let{courses:e,updateCourse:s}=(0,n.A)(),[t,l]=(0,r.useState)(null),[i,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(null),m=[{id:1,type:"rating",text:"Bagaimana penilaian Anda terhadap kualitas materi pembelajaran?",required:!0},{id:2,type:"rating",text:"Seberapa mudah materi ini dipahami?",required:!0},{id:3,type:"rating",text:"Apakah materi ini relevan dengan kebutuhan Anda?",required:!0},{id:4,type:"text",text:"Apa yang paling Anda sukai dari kursus ini?",required:!1},{id:5,type:"text",text:"Saran untuk perbaikan kursus ini:",required:!1}];(0,r.useEffect)(()=>{if(t){let s=e.find(e=>e.id===t);s&&s.survey&&s.survey.questions?o(s.survey.questions):o(m)}else o([])},[t,e]);let u=e=>{window.confirm("Apakah Anda yakin ingin menghapus pertanyaan ini?")&&(o(i.filter(s=>s.id!==e)),d===e&&c(null))},x=(e,s,t)=>{o(i.map(a=>a.id===e?{...a,[s]:t}:a))};return(0,a.jsxs)("div",{className:"space-y-6 text-gray-900",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Survey Manager"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Kelola survei pengalaman belajar untuk setiap kursus"})]})}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Kursus"}),(0,a.jsxs)("select",{value:t||"",onChange:e=>{l(Number(e.target.value)),c(null)},className:"w-full md:w-1/2 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"-- Pilih Kursus --"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Survey Questions"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{window.confirm("Reset ke pertanyaan default? Semua perubahan akan hilang.")&&(o(m),c(null))},className:"px-3 py-1 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Reset to Default"}),(0,a.jsxs)("button",{onClick:()=>{let e={id:Date.now(),type:"rating",text:"",required:!1};o([...i,e]),c(e.id)},className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,a.jsx)(J.A,{size:16,className:"mr-1"}),"Add Question"]}),(0,a.jsxs)("button",{onClick:()=>{if(!t)return;let a=e.find(e=>e.id===t);a&&(s(t,{...a,survey:{title:"Survei Pengalaman Belajar",description:"Berikan penilaian Anda terhadap kursus ini",questions:i}}),alert("Survei berhasil disimpan!"))},className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(X.A,{size:16,className:"mr-1"}),"Save Survey"]})]})]}),0===i.length?(0,a.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-500",children:'No survey questions yet. Click "Add Question" to create one.'})}):(0,a.jsx)("div",{className:"space-y-4",children:i.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"font-medium mr-2",children:["Question ",s+1]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full mr-2 ".concat("rating"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"rating"===e.type?"Rating":"Text"}),e.required&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full mr-2",children:"Required"}),d!==e.id&&(0,a.jsx)("span",{className:"text-gray-600 truncate max-w-md",children:e.text||"No question text"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>c(d===e.id?null:e.id),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:(0,a.jsx)(E.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>u(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:(0,a.jsx)(K.A,{size:16})})]})]}),d===e.id&&(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text"}),(0,a.jsx)("textarea",{value:e.text,onChange:s=>x(e.id,"text",s.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Enter your survey question here"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Type"}),(0,a.jsxs)("select",{value:e.type,onChange:s=>x(e.id,"type",s.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"rating",children:"Rating (1-5 stars)"}),(0,a.jsx)("option",{value:"text",children:"Text Response"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",checked:!0===e.required,onChange:()=>x(e.id,"required",!0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:"Yes"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",checked:!1===e.required,onChange:()=>x(e.id,"required",!1),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:"No"})]})]})]})]}),"rating"===e.type&&(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[[1,2,3,4,5].map(e=>(0,a.jsx)(ev.A,{size:20,className:"text-yellow-400 fill-current"},e)),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"(1-5 rating scale)"})]})]})]})]},e.id))})]})]})]})},ek=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null),[m,u]=(0,r.useState)({username:"",password:"",role:"user",email:"",fullName:""}),[x,g]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[b,f]=(0,r.useState)("");(0,r.useEffect)(()=>{y()},[]);let y=async()=>{try{h(!0),f("");let e=await j.adminAPI.getAllUsers();e&&e.users&&s(e.users)}catch(e){console.error("Error loading users:",e),f("Failed to load users")}finally{h(!1)}},v=async e=>{if(e.preventDefault(),!m.username||!m.password)return void alert("Username dan password harus diisi!");try{h(!0),f(""),i?await j.adminAPI.updateUser(i.id,m):await j.adminAPI.createUser(m),await y(),u({username:"",fullName:"",email:"",role:"user",password:""}),n(!1),c(null)}catch(e){console.error("Error saving user:",e),f(e.message||"Failed to save user")}finally{h(!1)}},N=e=>{c(e),u({username:e.username,fullName:e.fullName||"",email:e.email||"",role:e.role,password:""}),n(!0)},k=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus user ini?"))try{h(!0),f(""),await j.adminAPI.deleteUser(e),await y()}catch(e){console.error("Error deleting user:",e),f(e.message||"Failed to delete user")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"space-y-6 text-gray-900",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Manajemen User"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Kelola user dan hak akses sistem"})]}),(0,a.jsxs)("button",{onClick:()=>n(!0),disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[(0,a.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"Tambah User"]})]}),b&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:b}),p&&(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}),t&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:i?"Edit User":"Tambah User Baru"}),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),(0,a.jsx)("input",{type:"text",value:m.username,onChange:e=>u({...m,username:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),(0,a.jsx)("input",{type:"text",value:m.fullName,onChange:e=>u({...m,fullName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",value:m.email,onChange:e=>u({...m,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,a.jsxs)("select",{value:m.role,onChange:e=>u({...m,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:x?"text":"password",value:m.password,onChange:e=>u({...m,password:e.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>g(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:x?(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{n(!1),c(null),u({username:"",fullName:"",email:"",role:"user",password:""})},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Batal"}),(0,a.jsx)("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:p?"Menyimpan...":i?"Update":"Simpan"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Daftar User"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dibuat"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)(l.A,{className:"h-4 w-4 text-gray-500"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName||e.username}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("admin"===e.role?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"),children:["admin"===e.role?(0,a.jsx)(P.A,{className:"h-3 w-3 mr-1"}):(0,a.jsx)(l.A,{className:"h-3 w-3 mr-1"}),"admin"===e.role?"Admin":"User"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("id-ID")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"Edit user",children:(0,a.jsx)(E.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>k(e.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Hapus user",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(l.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Belum ada user"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Mulai dengan menambahkan user pertama."})]})]})};var ew=t(12486),eS=t(69074);let eA=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)({title:"",content:"",priority:"normal",targetAudience:"all"}),m=(0,r.useCallback)(async()=>{try{let e=await j.Ay.admin.getAllAnnouncements();e.success?s(e.announcements||[]):(console.error("Failed to load announcements:",e.message),s([]))}catch(e){console.error("Error loading announcements:",e),s([])}},[]);(0,r.useEffect)(()=>{m()},[m]);let u=async e=>{if(e.preventDefault(),!d.title.trim()||!d.content.trim())return void alert("Judul dan konten pengumuman harus diisi!");let s={title:d.title,content:d.content,priority:d.priority,target_audience:d.targetAudience};console.log("Sending announcement data:",s);try{let e;(e=i?await j.Ay.admin.updateAnnouncement(i,s):await j.Ay.admin.createAnnouncement(s)).success?(await m(),p(),alert(i?"Pengumuman berhasil diperbarui!":"Pengumuman berhasil dibuat!")):alert("Gagal menyimpan pengumuman: "+(e.message||"Unknown error"))}catch(e){console.error("Error saving announcement:",e),alert("Terjadi kesalahan saat menyimpan pengumuman")}},x=e=>{c({title:e.title,content:e.content,priority:e.priority,targetAudience:e.target_audience||e.targetAudience}),o(e.id),n(!0)},g=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus pengumuman ini?"))try{let s=await j.Ay.admin.deleteAnnouncement(e);s.success?(await m(),alert("Pengumuman berhasil dihapus!")):alert("Gagal menghapus pengumuman: "+(s.message||"Unknown error"))}catch(e){console.error("Error deleting announcement:",e),alert("Terjadi kesalahan saat menghapus pengumuman")}},p=()=>{c({title:"",content:"",priority:"normal",targetAudience:"all"}),n(!1),o(null)},h=e=>new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";default:return"text-blue-600 bg-blue-100"}},f=e=>{switch(e){case"high":return"Tinggi";case"medium":return"Sedang";default:return"Normal"}},y=e=>{switch(e){case"users":return"Pengguna";case"admins":return"Admin";default:return"Semua"}};return(0,a.jsxs)("div",{className:"p-6 text-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Manajemen Pengumuman"}),(0,a.jsxs)("button",{onClick:()=>n(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,a.jsx)(J.A,{size:20}),"Buat Pengumuman"]})]}),t&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:i?"Edit Pengumuman":"Buat Pengumuman Baru"}),(0,a.jsxs)("form",{onSubmit:u,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul Pengumuman"}),(0,a.jsx)("input",{type:"text",value:d.title,onChange:e=>c({...d,title:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan judul pengumuman",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioritas"}),(0,a.jsxs)("select",{value:d.priority,onChange:e=>c({...d,priority:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"normal",children:"Normal"}),(0,a.jsx)("option",{value:"medium",children:"Sedang"}),(0,a.jsx)("option",{value:"high",children:"Tinggi"})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Audiens"}),(0,a.jsxs)("select",{value:d.targetAudience,onChange:e=>c({...d,targetAudience:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Semua Pengguna"}),(0,a.jsx)("option",{value:"users",children:"Pengguna"}),(0,a.jsx)("option",{value:"admins",children:"Admin"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Konten Pengumuman"}),(0,a.jsx)("textarea",{value:d.content,onChange:e=>c({...d,content:e.target.value}),rows:6,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan konten pengumuman",required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,a.jsx)(ew.A,{size:16}),i?"Update":"Publikasikan"]}),(0,a.jsx)("button",{type:"button",onClick:p,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Batal"})]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(eS.A,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Belum ada pengumuman yang dibuat"})]}):e.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.title}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(b(e.priority)),children:f(e.priority)}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:y(e.target_audience||e.targetAudience)})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-3 whitespace-pre-wrap",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(l.A,{size:14}),(0,a.jsx)("span",{children:e.author||"Admin"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eS.A,{size:14}),(0,a.jsx)("span",{children:h(e.created_at||e.createdAt)})]}),(e.updated_at||e.updatedAt)!==(e.created_at||e.createdAt)&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["(Diperbarui: ",h(e.updated_at||e.updatedAt),")"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>x(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:(0,a.jsx)(E.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Hapus",children:(0,a.jsx)(K.A,{size:16})})]})]})},e.id))})]})};var eC=t(91788),eD=t(5196),eP=t(18186),ez=t(47924),eT=t(66932);let eI=()=>{let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[u,x]=(0,r.useState)(""),[g,p]=(0,r.useState)("all"),[h,b]=(0,r.useState)(null),[y,v]=(0,r.useState)("all"),[N,k]=(0,r.useState)(!1),{currentUser:w}=(0,n.A)(),S=(0,r.useCallback)(async()=>{try{let e;(e=(null==w?void 0:w.role)==="admin"?await j.adminAPI.getAllCertificates():await j.certificateAPI.getUserCertificates()).success?s(e.certificates||[]):C()}catch(e){console.error("Error loading certificates from backend:",e),C()}},[w]),A=(0,r.useCallback)(async()=>{if((null==w?void 0:w.role)==="admin")try{let e=await j.adminAPI.getPendingCertificates();e.success&&i(e.certificates||[])}catch(e){console.error("Error loading pending certificates:",e)}},[w]),C=()=>{let e=[];for(let s=0;s<localStorage.length;s++){let t=localStorage.key(s);if(t&&t.startsWith("certificates_"))try{let s=JSON.parse(localStorage.getItem(t)||"[]");e.push(...s)}catch(e){console.error("Error loading certificates from key:",t,e)}}console.log("CertificateManager: Loaded certificates:",e),s(e)},D=(0,r.useCallback)(()=>{let s=e;if(u&&(s=s.filter(e=>(e.studentName||e.userName||"").toLowerCase().includes(u.toLowerCase())||(e.courseName||"").toLowerCase().includes(u.toLowerCase())||(e.cert_number||e.certNumber||"").toLowerCase().includes(u.toLowerCase()))),"all"!==g){let e=new Date,t=new Date;switch(g){case"week":t.setDate(e.getDate()-7);break;case"month":t.setMonth(e.getMonth()-1);break;case"year":t.setFullYear(e.getFullYear()-1)}s=s.filter(e=>new Date(e.completionDate)>=t)}c(s.sort((e,s)=>new Date(s.completionDate)-new Date(e.completionDate)))},[e,u,g]);(0,r.useEffect)(()=>{S(),(null==w?void 0:w.role)==="admin"&&A()},[S,A,w]),(0,r.useEffect)(()=>{D()},[D]);let P=t=>{if(window.confirm("Apakah Anda yakin ingin menghapus sertifikat ini?")){let a=e.filter(e=>e.id!==t);s(a),localStorage.setItem("certificates",JSON.stringify(a))}},I=async e=>{if(window.confirm("Apakah Anda yakin ingin menyetujui sertifikat ini?")){k(!0);try{let s=await j.adminAPI.approveCertificate(e);s.success?(alert("Sertifikat berhasil disetujui!"),S(),A()):alert("Gagal menyetujui sertifikat: "+(s.message||"Unknown error"))}catch(e){console.error("Error approving certificate:",e),alert("Gagal menyetujui sertifikat")}finally{k(!1)}}},E=async e=>{let s=prompt("Masukkan alasan penolakan:");if(s){k(!0);try{let t=await j.adminAPI.rejectCertificate(e,s);t.success?(alert("Sertifikat berhasil ditolak!"),S(),A()):alert("Gagal menolak sertifikat: "+(t.message||"Unknown error"))}catch(e){console.error("Error rejecting certificate:",e),alert("Gagal menolak sertifikat")}finally{k(!1)}}},M=e=>{let s=e.studentName||e.userName||"Unknown Student",t=e.courseName||"Unknown Course",a=e.cert_number||e.certNumber||"N/A",r=e.completionDate||new Date().toISOString(),n=e.grade||"N/A",l=new Blob(["\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Sertifikat - ".concat(t,'</title>\n        <style>\n          body { \n            font-family: \'Georgia\', serif; \n            margin: 0; \n            padding: 40px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n          .certificate {\n            background: white;\n            padding: 60px;\n            border-radius: 20px;\n            box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n            text-align: center;\n            max-width: 800px;\n            border: 8px solid #f8f9fa;\n            position: relative;\n          }\n          .certificate::before {\n            content: \'\';\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            right: 20px;\n            bottom: 20px;\n            border: 3px solid #667eea;\n            border-radius: 10px;\n          }\n          .header { color: #667eea; margin-bottom: 30px; }\n          .title { font-size: 48px; font-weight: bold; margin: 20px 0; color: #2d3748; }\n          .subtitle { font-size: 24px; margin: 20px 0; color: #4a5568; }\n          .name { font-size: 36px; font-weight: bold; color: #667eea; margin: 30px 0; text-decoration: underline; }\n          .course { font-size: 28px; font-weight: bold; color: #2d3748; margin: 20px 0; }\n          .details { margin: 30px 0; color: #718096; }\n          .signature { margin-top: 50px; display: flex; justify-content: space-between; }\n          .sig-line { border-top: 2px solid #e2e8f0; width: 200px; padding-top: 10px; }\n        </style>\n      </head>\n      <body>\n        <div class="certificate">\n          <div class="header">\n            <h1>\uD83C\uDFC6 SERTIFIKAT PENYELESAIAN \uD83C\uDFC6</h1>\n          </div>\n          <div class="title">CERTIFICATE OF COMPLETION</div>\n          <div class="subtitle">Dengan ini menyatakan bahwa</div>\n          <div class="name">').concat(s,'</div>\n          <div class="subtitle">telah berhasil menyelesaikan kursus</div>\n          <div class="course">').concat(t,'</div>\n          <div class="details">\n            <p><strong>Nomor Sertifikat:</strong> ').concat(a,"</p>\n            <p><strong>Tanggal Penyelesaian:</strong> ").concat(new Date(r).toLocaleDateString("id-ID"),"</p>\n            <p><strong>Grade:</strong> ").concat(n,'</p>\n          </div>\n          <div class="signature">\n            <div class="sig-line">\n              <div>Direktur Akademik</div>\n            </div>\n            <div class="sig-line">\n              <div>Instruktur Kursus</div>\n            </div>\n          </div>\n        </div>\n      </body>\n      </html>\n    ')],{type:"text/html"}),i=URL.createObjectURL(l),o=document.createElement("a");o.href=i;let d=t.replace(/[^a-zA-Z0-9]/g,"-"),c=s.replace(/[^a-zA-Z0-9]/g,"-");o.download="Sertifikat-".concat(d,"-").concat(c,".html"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},U=e=>new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 text-white p-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"bg-opacity-20 p-4 rounded-full",children:(0,a.jsx)(eP.A,{className:"text-white",size:32})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Manajemen Sertifikat"}),(0,a.jsx)("p",{className:"text-yellow-100 text-lg",children:"Kelola semua sertifikat yang telah diterbitkan"})]})]})}),(0,a.jsxs)("div",{className:"p-8",children:[(null==w?void 0:w.role)==="admin"&&(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsxs)("button",{onClick:()=>v("all"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("all"===y?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Semua Sertifikat (",e.length,")"]}),(0,a.jsxs)("button",{onClick:()=>v("pending"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("pending"===y?"bg-yellow-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Menunggu Persetujuan (",t.length,")"]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(ez.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Cari berdasarkan nama, kursus, atau nomor sertifikat...",value:u,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eT.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,a.jsx)("option",{value:"all",children:"Semua Waktu"}),(0,a.jsx)("option",{value:"week",children:"7 Hari Terakhir"}),(0,a.jsx)("option",{value:"month",children:"30 Hari Terakhir"}),(0,a.jsx)("option",{value:"year",children:"1 Tahun Terakhir"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-100",children:"Total Sertifikat"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:e.length})]}),(0,a.jsx)(z.A,{size:40,className:"text-blue-200"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-green-100",children:"Bulan Ini"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:e.filter(e=>{let s=new Date(e.completionDate),t=new Date;return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}).length})]}),(0,a.jsx)(eS.A,{size:40,className:"text-green-200"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-purple-100",children:"Kursus Unik"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:new Set(e.map(e=>e.courseName)).size})]}),(0,a.jsx)(T.A,{size:40,className:"text-purple-200"})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"pending"===y?"Sertifikat Menunggu Persetujuan":"Daftar Sertifikat"}),"pending"===y?0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(f.A,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"Tidak ada sertifikat yang menunggu persetujuan"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Permintaan sertifikat akan muncul di sini"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow border-l-4 border-yellow-400",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"bg-yellow-100 p-3 rounded-full",children:(0,a.jsx)(f.A,{className:"text-yellow-600",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800",children:e.user_name||"Unknown Student"}),(0,a.jsx)("p",{className:"text-gray-600",children:e.course_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["No: ",e.cert_number||e.certNumber||"N/A"]}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium",children:"Menunggu Persetujuan"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Diajukan"}),(0,a.jsx)("p",{className:"font-medium text-gray-800",children:U(e.created_at)})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>b(e),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Lihat Detail",children:(0,a.jsx)(d.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>I(e.id),disabled:N,className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50",title:"Setujui",children:(0,a.jsx)(eD.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>E(e.id),disabled:N,className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50",title:"Tolak",children:(0,a.jsx)(m.A,{size:16})})]})]})]})},e.id))}):0===o.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(eP.A,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"Tidak ada sertifikat ditemukan"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Sertifikat akan muncul setelah peserta menyelesaikan kursus"})]}):(0,a.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-full ".concat("approved"===e.status?"bg-green-100":"rejected"===e.status?"bg-red-100":"bg-yellow-100"),children:"approved"===e.status?(0,a.jsx)(z.A,{className:"text-green-600",size:24}):"rejected"===e.status?(0,a.jsx)(m.A,{className:"text-red-600",size:24}):(0,a.jsx)(f.A,{className:"text-yellow-600",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800",children:e.user_name||e.studentName||e.userName||"Unknown Student"}),(0,a.jsx)("p",{className:"text-gray-600",children:e.course_name||e.courseName}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["No: ",e.cert_number||e.certNumber||"N/A"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"approved"===e.status?"Disetujui":"rejected"===e.status?"Ditolak":"Menunggu Persetujuan"}),"rejected"===e.status&&e.rejection_reason&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",title:e.rejection_reason,children:["(Alasan: ",e.rejection_reason.length>30?e.rejection_reason.substring(0,30)+"...":e.rejection_reason,")"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"approved"===e.status?"Disetujui":"Diajukan"}),(0,a.jsx)("p",{className:"font-medium text-gray-800",children:U(e.approved_at||e.completion_date||e.completionDate||e.created_at)})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>b(e),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Lihat Detail",children:(0,a.jsx)(d.A,{size:16})}),"approved"===e.status&&(0,a.jsx)("button",{onClick:()=>M(e),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Download",children:(0,a.jsx)(eC.A,{size:16})}),(null==w?void 0:w.role)==="admin"&&(0,a.jsx)("button",{onClick:()=>P(e.id),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Hapus",children:(0,a.jsx)(K.A,{size:16})})]})]})]})},e.id))})]})]})]})}),h&&(0,a.jsx)(e=>{let{certificate:s,onClose:t}=e;return(0,a.jsx)("div",{className:"fixed text-gray-900 inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-3xl w-full overflow-hidden shadow-2xl",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r text-white p-6 ".concat("approved"===s.status?"from-green-400 via-green-500 to-green-600":"rejected"===s.status?"from-red-400 via-red-500 to-red-600":"from-yellow-400 via-yellow-500 to-yellow-600"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["approved"===s.status?(0,a.jsx)(z.A,{size:28}):"rejected"===s.status?(0,a.jsx)(m.A,{size:28}):(0,a.jsx)(f.A,{size:28}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Detail Sertifikat"})]}),(0,a.jsx)("button",{onClick:t,className:"bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition-all duration-200",children:"✕"})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"p-6 rounded-xl border-2 ".concat("approved"===s.status?"bg-gradient-to-br from-green-50 to-blue-50 border-green-300":"rejected"===s.status?"bg-gradient-to-br from-red-50 to-pink-50 border-red-300":"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-300"),children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:["approved"===s.status?(0,a.jsx)(z.A,{className:"mx-auto text-green-500 mb-3",size:40}):"rejected"===s.status?(0,a.jsx)(m.A,{className:"mx-auto text-red-500 mb-3",size:40}):(0,a.jsx)(f.A,{className:"mx-auto text-yellow-500 mb-3",size:40}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"SERTIFIKAT PENYELESAIAN"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Certificate of Completion"}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("approved"===s.status?"bg-green-100 text-green-800":"rejected"===s.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"approved"===s.status?"Disetujui":"rejected"===s.status?"Ditolak":"Menunggu Persetujuan"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(l.A,{className:"text-blue-500",size:16}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:"Nama Peserta"})]}),(0,a.jsx)("p",{className:"text-gray-800 font-medium",children:s.user_name||s.studentName||s.userName||"Unknown Student"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(T.A,{className:"text-green-500",size:16}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:"Nama Kursus"})]}),(0,a.jsx)("p",{className:"text-gray-800 font-medium",children:s.course_name||s.courseName})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(z.A,{className:"text-purple-500",size:16}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:"Nomor Sertifikat"})]}),(0,a.jsx)("p",{className:"text-gray-800 font-mono text-sm",children:s.cert_number||s.certNumber||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eS.A,{className:"text-red-500",size:16}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:"approved"===s.status?"Tanggal Disetujui":"Tanggal Diajukan"})]}),(0,a.jsx)("p",{className:"text-gray-800 font-medium",children:U(s.approved_at||s.completion_date||s.completionDate||s.created_at)})]}),"rejected"===s.status&&s.rejection_reason&&(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(m.A,{className:"text-red-500",size:16}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:"Alasan Penolakan"})]}),(0,a.jsx)("p",{className:"text-gray-800",children:s.rejection_reason})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-3",children:["approved"===s.status&&(0,a.jsxs)("button",{onClick:()=>M(s),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all duration-200 flex items-center gap-2",children:[(0,a.jsx)(eC.A,{size:16}),"Download"]}),(null==w?void 0:w.role)==="admin"&&"pending"===s.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{t(),I(s.id)},disabled:N,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[(0,a.jsx)(eD.A,{size:16}),"Setujui"]}),(0,a.jsxs)("button",{onClick:()=>{t(),E(s.id)},disabled:N,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[(0,a.jsx)(m.A,{size:16}),"Tolak"]})]}),(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Tutup"})]})]})})]})})},{certificate:h,onClose:()=>b(null)})]})};var eE=t(17576);let eM=()=>{let{currentUser:e}=(0,n.A)(),[s,t]=(0,r.useState)({postWork:{title:"Post Work Assignment",description:"Complete the assigned post-work tasks to reinforce your learning.",requirements:["Submit your work in PDF, DOCX, or image format","Maximum file size: 10MB","Include detailed explanations of your approach","Follow the provided guidelines and rubric"],guidelines:"Please ensure your submission is well-organized and clearly demonstrates your understanding of the concepts covered in this module."},finalProject:{title:"Final Project",description:"Create a comprehensive project that demonstrates your mastery of the course material.",requirements:["Create a complete web application using the technologies learned in this course","Include proper documentation and README file","Implement responsive design for mobile and desktop","Submit as a ZIP file or provide GitHub repository link","Maximum file size: 50MB"],guidelines:"Your final project should showcase your ability to apply the concepts and skills learned throughout the course. Focus on creating a functional, well-designed application that solves a real-world problem."}}),[l,i]=(0,r.useState)({postWork:!1,finalProject:!1}),[o,d]=(0,r.useState)({}),[c,m]=(0,r.useState)("postWork");(0,r.useEffect)(()=>{u()},[]);let u=()=>{let e=localStorage.getItem("projectInstructions");e&&t(JSON.parse(e))},x=e=>{d({...s[e]}),i({...l,[e]:!0})},g=e=>{i({...l,[e]:!1}),d({})},p=e=>{t({...s,[e]:o}),i({...l,[e]:!1}),d({})},h=(e,s)=>{d({...o,[e]:s})},b=()=>{h("requirements",[...o.requirements||[],""])},f=(e,s)=>{let t=[...o.requirements];t[e]=s,h("requirements",t)},j=e=>{h("requirements",o.requirements.filter((s,t)=>t!==e))};return(null==e?void 0:e.role)!=="admin"?(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-red-800 mb-2",children:"Akses Ditolak"}),(0,a.jsx)("p",{className:"text-red-600",children:"Anda tidak memiliki izin untuk mengakses halaman ini."})]})}):(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Kelola Instruksi Proyek"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Kelola instruksi dan persyaratan untuk Post Work dan Final Project"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg mb-6",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,a.jsx)("button",{onClick:()=>m("postWork"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("postWork"===c?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eE.A,{size:16}),(0,a.jsx)("span",{children:"Post Work"})]})}),(0,a.jsx)("button",{onClick:()=>m("finalProject"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("finalProject"===c?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(T.A,{size:16}),(0,a.jsx)("span",{children:"Final Project"})]})})]})}),(0,a.jsx)("div",{className:"p-6",children:l[c]?(e=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul"}),(0,a.jsx)("input",{type:"text",value:o.title||"",onChange:e=>h("title",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Masukkan judul"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi"}),(0,a.jsx)("textarea",{value:o.description||"",onChange:e=>h("description",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,placeholder:"Masukkan deskripsi"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Persyaratan"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(o.requirements||[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>f(s,e.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Masukkan persyaratan"}),(0,a.jsx)("button",{onClick:()=>j(s),className:"text-red-500 hover:text-red-700 p-1",children:(0,a.jsx)(K.A,{size:16})})]},s)),(0,a.jsxs)("button",{onClick:b,className:"flex items-center space-x-1 text-indigo-600 hover:text-indigo-700 text-sm",children:[(0,a.jsx)(J.A,{size:16}),(0,a.jsx)("span",{children:"Tambah Persyaratan"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Panduan"}),(0,a.jsx)("textarea",{value:o.guidelines||"",onChange:e=>h("guidelines",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:4,placeholder:"Masukkan panduan untuk siswa"})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>p(e),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(X.A,{size:16}),(0,a.jsx)("span",{children:"Simpan"})]}),(0,a.jsx)("button",{onClick:()=>g(e),className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Batal"})]})]}))(c):(e=>{let t=s[e];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:t.title}),(0,a.jsxs)("button",{onClick:()=>x(e),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(E.A,{size:16}),(0,a.jsx)("span",{children:"Edit"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Deskripsi"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Persyaratan"}),(0,a.jsx)("ul",{className:"space-y-2",children:t.requirements.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-gray-600",children:e})]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Panduan"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.guidelines})]})]})})(c)})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{onClick:()=>{localStorage.setItem("projectInstructions",JSON.stringify(s)),alert("Instruksi berhasil disimpan!")},className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-3 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 font-semibold flex items-center space-x-2 mx-auto",children:[(0,a.jsx)(X.A,{size:20}),(0,a.jsx)("span",{children:"Simpan Semua Perubahan"})]})})]})};var eU=t(16785);let eF=()=>{let{currentUser:e,courses:s}=(0,n.A)(),[t,l]=(0,r.useState)(""),[i,o]=(0,r.useState)("postwork"),[d,c]=(0,r.useState)({postwork:{title:"",description:"",requirements:[],deliverables:[],timeline:"",resources:[]},finalproject:{title:"",description:"",requirements:[],deliverables:[],timeline:"",resources:[]}}),[m,u]=(0,r.useState)(!1),[x,g]=(0,r.useState)(""),p=(null==e?void 0:e.role)==="admin";(0,r.useEffect)(()=>{t&&h(t)},[t]);let h=e=>{try{let s=localStorage.getItem("course_instructions_".concat(e));s?c(JSON.parse(s)):c({postwork:{title:"Post Work Assignment",description:"Silakan kerjakan tugas post work berikut untuk mempraktikkan materi yang telah dipelajari.",requirements:["Menyelesaikan semua materi pembelajaran","Memahami konsep dasar yang telah diajarkan"],deliverables:["Dokumen laporan hasil praktik","Screenshot atau bukti implementasi"],timeline:"7 hari setelah menyelesaikan materi",resources:["Materi pembelajaran yang telah dipelajari","Template dokumen (jika tersedia)"]},finalproject:{title:"Final Project",description:"Proyek akhir untuk mendemonstrasikan pemahaman komprehensif terhadap seluruh materi kursus.",requirements:["Menyelesaikan semua tahap pembelajaran","Menyelesaikan post work assignment"],deliverables:["Proyek lengkap sesuai spesifikasi","Dokumentasi proyek","Presentasi atau demo (jika diperlukan)"],timeline:"14 hari setelah menyelesaikan post work",resources:["Seluruh materi kursus","Template proyek (jika tersedia)","Panduan teknis"]}})}catch(e){console.error("Error loading course instructions:",e)}},b=async()=>{if(!t)return void g("Pilih course terlebih dahulu");u(!0),g("");try{let e="course_instructions_".concat(t);localStorage.setItem(e,JSON.stringify(d)),g("✅ Instruksi berhasil disimpan!"),setTimeout(()=>g(""),3e3)}catch(e){console.error("Error saving instructions:",e),g("❌ Gagal menyimpan instruksi")}finally{u(!1)}},f=(e,s,t)=>{c(a=>({...a,[e]:{...a[e],[s]:t}}))},j=(e,s)=>{c(t=>({...t,[e]:{...t[e],[s]:[...t[e][s],""]}}))},y=(e,s,t,a)=>{c(r=>{let n=[...r[e][s]];return n[t]=a,{...r,[e]:{...r[e],[s]:n}}})},v=(e,s,t)=>{c(a=>{let r=a[e][s].filter((e,s)=>s!==t);return{...a,[e]:{...a[e],[s]:r}}})},N=(e,s,t,r)=>{let n=d[e][s]||[];return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,a.jsxs)("button",{onClick:()=>j(e,s),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[(0,a.jsx)(J.A,{className:"w-4 h-4"}),"Tambah"]})]}),n.map((t,n)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:t=>y(e,s,n,t.target.value),placeholder:r,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:()=>v(e,s,n),className:"text-red-600 hover:text-red-800 p-2",children:(0,a.jsx)(K.A,{className:"w-4 h-4"})})]},n)),0===n.length&&(0,a.jsxs)("p",{className:"text-gray-500 text-sm italic",children:["Belum ada ",t.toLowerCase()]})]})};if(!p)return(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Akses Ditolak"}),(0,a.jsx)("p",{className:"text-red-600",children:"Hanya admin yang dapat mengakses halaman ini."})]})});let k=d[i];return(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"border-b border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Kelola Instruksi Course"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Course"}),(0,a.jsxs)("select",{value:t,onChange:e=>l(e.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"-- Pilih Course --"}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),x&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-md bg-blue-50 border border-blue-200",children:(0,a.jsx)("p",{className:"text-sm text-blue-800",children:x})})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,a.jsx)("button",{onClick:()=>o("postwork"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("postwork"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.A,{className:"w-4 h-4"}),"Post Work"]})}),(0,a.jsx)("button",{onClick:()=>o("finalproject"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("finalproject"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eU.A,{className:"w-4 h-4"}),"Final Project"]})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Instruksi ","postwork"===i?"Post Work":"Final Project"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul"}),(0,a.jsx)("input",{type:"text",value:k.title,onChange:e=>f(i,"title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan judul instruksi"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi"}),(0,a.jsx)("textarea",{value:k.description,onChange:e=>f(i,"description",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan deskripsi instruksi"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timeline"}),(0,a.jsx)("input",{type:"text",value:k.timeline,onChange:e=>f(i,"timeline",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Contoh: 7 hari setelah menyelesaikan materi"})]}),N(i,"requirements","Persyaratan","Masukkan persyaratan"),N(i,"deliverables","Deliverables","Masukkan deliverable"),N(i,"resources","Resources","Masukkan resource")]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Preview"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,a.jsx)("h4",{className:"text-xl font-bold text-gray-900 mb-3",children:k.title||"Judul Instruksi"}),(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:k.description||"Deskripsi instruksi akan muncul di sini."}),k.timeline&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"⏰ Timeline:"}),(0,a.jsx)("p",{className:"text-gray-700",children:k.timeline})]}),k.requirements.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"\uD83D\uDCCB Persyaratan:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1",children:k.requirements.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-700",children:e},s))})]}),k.deliverables.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"\uD83D\uDCE6 Deliverables:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1",children:k.deliverables.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-700",children:e},s))})]}),k.resources.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"\uD83D\uDCDA Resources:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1",children:k.resources.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-700",children:e},s))})]})]})]})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-end",children:(0,a.jsxs)("button",{onClick:b,disabled:m||!t,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-semibold",children:[(0,a.jsx)(X.A,{className:"w-5 h-5"}),m?"Menyimpan...":"Simpan Instruksi"]})})]})]})]})})};var eR=t(62559),eL=t(52918),eq=t(14711);let eO=()=>{let{currentUser:e,courses:s}=(0,n.A)(),[t,l]=(0,r.useState)(""),[i,o]=(0,r.useState)({hasPostWork:!1,hasFinalProject:!1,stepWeights:{intro:10,pretest:15,lessons:40,posttest:35,postwork:0,finalproject:0}}),[d,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),p=(null==e?void 0:e.role)==="admin";(0,r.useEffect)(()=>{t&&h(t)},[t]);let h=async e=>{g(!0);try{let s=await fetch("".concat("https://8080-firebase-agileku-1751862903205.cluster-ejd22kqny5htuv5dfowoyipt52.cloudworkstations.dev","/api/protected/admin/courses/").concat(e,"/config"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken")),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();o({hasPostWork:e.hasPostWork||!1,hasFinalProject:e.hasFinalProject||!1,stepWeights:e.stepWeights||{intro:10,pretest:15,lessons:40,posttest:35,postwork:0,finalproject:0}})}else console.error("Failed to load course config"),o({hasPostWork:!1,hasFinalProject:!1,stepWeights:{intro:10,pretest:15,lessons:40,posttest:35,postwork:0,finalproject:0}})}catch(e){console.error("Error loading course config:",e)}finally{g(!1)}},b=async()=>{if(!t)return void u("Pilih course terlebih dahulu");c(!0),u("");try{(await fetch("".concat("https://8080-firebase-agileku-1751862903205.cluster-ejd22kqny5htuv5dfowoyipt52.cloudworkstations.dev","/api/protected/admin/courses/").concat(t,"/config"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken")),"Content-Type":"application/json"},body:JSON.stringify(i)})).ok?(u("✅ Konfigurasi berhasil disimpan!"),setTimeout(()=>u(""),3e3)):u("❌ Gagal menyimpan konfigurasi")}catch(e){console.error("Error saving config:",e),u("❌ Gagal menyimpan konfigurasi")}finally{c(!1)}},f=(e,s)=>{o(t=>({...t,stepWeights:{...t.stepWeights,[e]:parseInt(s)||0}}))},j=e=>{o(s=>{let t={...s,[e]:!s[e]};if("hasPostWork"===e||"hasFinalProject"===e){let a={...s.stepWeights};"hasPostWork"===e&&(s.hasPostWork?(a.postwork=0,a.posttest=35):(a.postwork=10,a.posttest=25)),"hasFinalProject"===e&&(s.hasFinalProject?(a.finalproject=0,a.lessons=40):(a.finalproject=15,a.lessons=25)),t.stepWeights=a}return t})},y=()=>Object.values(i.stepWeights).reduce((e,s)=>e+s,0),v=e=>({intro:"Intro",pretest:"Pre Test",lessons:"Lessons",posttest:"Post Test",postwork:"Post Work",finalproject:"Final Project"})[e]||e;return p?(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-6 text-gray-900",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"border-b border-gray-200 p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(I.A,{className:"w-6 h-6"}),"Konfigurasi Course"]}),(0,a.jsxs)("div",{className:"mb-4 text-gray-900",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Course"}),(0,a.jsxs)("select",{value:t,onChange:e=>l(e.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"-- Pilih Course --"}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),m&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-md bg-blue-50 border border-blue-200",children:(0,a.jsx)("p",{className:"text-sm text-blue-800",children:m})})]}),t&&(0,a.jsx)("div",{className:"p-6",children:x?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Memuat konfigurasi..."})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Fitur Course"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Post Work"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aktifkan tugas post work setelah post test"})]}),(0,a.jsx)("button",{onClick:()=>j("hasPostWork"),className:"flex items-center ".concat(i.hasPostWork?"text-green-600":"text-gray-400"),children:i.hasPostWork?(0,a.jsx)(eR.A,{className:"w-8 h-8"}):(0,a.jsx)(eL.A,{className:"w-8 h-8"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Final Project"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aktifkan final project sebagai tahap terakhir"})]}),(0,a.jsx)("button",{onClick:()=>j("hasFinalProject"),className:"flex items-center ".concat(i.hasFinalProject?"text-green-600":"text-gray-400"),children:i.hasFinalProject?(0,a.jsx)(eR.A,{className:"w-8 h-8"}):(0,a.jsx)(eL.A,{className:"w-8 h-8"})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(eq.A,{className:"w-5 h-5"}),"Bobot Progress (%)"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[Object.entries(i.stepWeights).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"font-medium text-gray-900",children:v(s)}),("postwork"===s&&!i.hasPostWork||"finalproject"===s&&!i.hasFinalProject)&&(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"(Tidak aktif)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:t,onChange:e=>f(s,e.target.value),className:"w-32",disabled:"postwork"===s&&!i.hasPostWork||"finalproject"===s&&!i.hasFinalProject}),(0,a.jsx)("input",{type:"number",min:"0",max:"100",value:t,onChange:e=>f(s,e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center",disabled:"postwork"===s&&!i.hasPostWork||"finalproject"===s&&!i.hasFinalProject}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"%"})]})]},s)}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-blue-900",children:"Total Bobot:"}),(0,a.jsxs)("span",{className:"font-bold text-lg ".concat(100===y()?"text-green-600":"text-red-600"),children:[y(),"%"]})]}),100!==y()&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"⚠️ Total bobot harus 100% untuk perhitungan progress yang akurat"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:b,disabled:d||!t,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-semibold",children:[(0,a.jsx)(X.A,{className:"w-5 h-5"}),d?"Menyimpan...":"Simpan Konfigurasi"]})})]})})]})}):(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Akses Ditolak"}),(0,a.jsx)("p",{className:"text-red-600",children:"Hanya admin yang dapat mengakses halaman ini."})]})})},e_=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[c,m]=(0,r.useState)([]),[u,x]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null),[h,b]=(0,r.useState)({grade:"",feedback:""});(0,r.useEffect)(()=>{f(),y()},[]),(0,r.useEffect)(()=>{i&&v(i)},[i]);let f=async()=>{try{let e=await j.adminAPI.getGrades();e.success&&s(e.grades||[])}catch(e){console.error("Error loading grades:",e)}},y=async()=>{try{m([{id:1,title:"JavaScript Fundamentals"},{id:2,title:"React Development"},{id:3,title:"Node.js Backend"}])}catch(e){console.error("Error loading courses:",e)}finally{x(!1)}},v=async e=>{try{let s=await j.adminAPI.getCourseSubmissions(e);s.success&&n(s.submissions||[])}catch(e){console.error("Error loading submissions:",e)}},N=async e=>{p(e),b({grade:"",feedback:""})},k=async()=>{if(!h.grade||h.grade<0||h.grade>100)return void alert("Please enter a valid grade (0-100)");try{let e={userId:g.userId,courseId:g.courseId,submissionId:g.id,grade:parseFloat(h.grade),feedback:h.feedback};(await j.adminAPI.createGrade(e)).success&&(alert("Grade submitted successfully!"),p(null),b({grade:"",feedback:""}),f(),i&&v(i))}catch(e){console.error("Error submitting grade:",e),alert("Failed to submit grade. Please try again.")}};return u?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Grading System"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Course to Review Submissions"}),(0,a.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Choose a course..."}),c.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),i&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Submissions to Grade"}),0===t.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No submissions found for this course."}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.userName}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.type,")"]})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(eS.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:new Date(e.submittedAt).toLocaleDateString()})]}),e.fileName&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(T.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.fileName})]})]}),e.grade&&(0,a.jsxs)("div",{className:"mt-2 text-sm",children:[(0,a.jsxs)("span",{className:"text-green-600 font-medium",children:["Grade: ",e.grade,"/100"]}),e.feedback&&(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["Feedback: ",e.feedback]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[!e.grade&&(0,a.jsx)("button",{onClick:()=>N(e),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Grade"}),(0,a.jsx)("button",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]})]})},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Grades"}),0===e.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No grades submitted yet."}):(0,a.jsx)("div",{className:"space-y-4",children:e.slice(0,10).map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.userName}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["- ",e.courseTitle]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(ev.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:[e.grade,"/100"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(eS.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:new Date(e.gradedAt).toLocaleDateString()})]})]}),e.feedback&&(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:e.feedback})]})})},e.id))})]})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Grade Submission"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,a.jsx)("strong",{children:"Student:"})," ",g.userName]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,a.jsx)("strong",{children:"Type:"})," ",g.type]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Description:"})," ",g.description]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade (0-100)"}),(0,a.jsx)("input",{type:"number",min:"0",max:"100",value:h.grade,onChange:e=>b({...h,grade:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter grade"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feedback (Optional)"}),(0,a.jsx)("textarea",{value:h.feedback,onChange:e=>b({...h,feedback:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Enter feedback for the student"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,a.jsxs)("button",{onClick:k,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Submit Grade"})]}),(0,a.jsx)("button",{onClick:()=>p(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})]})};var eB=t(54861);let eJ=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[c,m]=(0,r.useState)("all"),[u,x]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{b()},[]),(0,r.useEffect)(()=>{i&&f()},[i,c]);let b=async()=>{try{let e=await j.GS.getAllCourses();e.success&&n(e.courses||[])}catch(e){console.error("Error loading courses:",e)}finally{x(!1)}},f=async()=>{if(i)try{x(!0);let e=await j.adminAPI.getCourseSubmissions(i);if(e.success){let t=e.submissions||[];"all"!==c&&(t=t.filter(e=>e.type===c)),s(t)}}catch(e){console.error("Error loading submissions:",e)}finally{x(!1)}},y=e=>{p(e)},v=async e=>{if(!e.fileName)return void alert("No file available for download");try{alert("Downloading: ".concat(e.fileName))}catch(e){console.error("Error downloading file:",e),alert("Failed to download file")}},N=(()=>{let s=e.length,t=e.filter(e=>null!==e.grade&&void 0!==e.grade).length;return{total:s,graded:t,pending:s-t}})();return u&&!i?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Submission Review"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Course"}),(0,a.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Choose a course..."}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Submission Type"}),(0,a.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"postwork",children:"Postwork"}),(0,a.jsx)("option",{value:"final_project",children:"Final Project"})]})]})]}),i&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(T.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Total Submissions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:N.total})]})]})}),(0,a.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Graded"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-900",children:N.graded})]})]})}),(0,a.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eB.A,{className:"h-8 w-8 text-yellow-600"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-600",children:"Pending"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-900",children:N.pending})]})]})})]}),i&&(0,a.jsx)("div",{children:u?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(T.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No submissions found for the selected criteria."})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.userName}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full {submission.type === 'postwork'  ? 'bg-blue-100 text-blue-800'  : 'bg-purple-100 text-purple-800' }",children:"postwork"===e.type?"Postwork":"Final Project"}),null!==e.grade&&void 0!==e.grade&&(0,a.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:["Graded: ",e.grade,"/100"]})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(eS.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:new Date(e.submittedAt).toLocaleDateString()})]}),e.fileName&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(T.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.fileName})]})]}),e.feedback&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Feedback:"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:e.feedback})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>y(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"View Details",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}),e.fileName&&(0,a.jsx)("button",{onClick:()=>v(e),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Download File",children:(0,a.jsx)(eC.A,{className:"h-4 w-4"})})]})]})},e.id))})})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Submission Details"}),(0,a.jsx)("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(eB.A,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Student"}),(0,a.jsx)("p",{className:"text-gray-900",children:g.userName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,a.jsx)("p",{className:"text-gray-900",children:"postwork"===g.type?"Postwork":"Final Project"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(g.submittedAt).toLocaleString()})]}),null!==g.grade&&void 0!==g.grade&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Grade"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[g.grade,"/100"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded border",children:(0,a.jsx)("p",{className:"text-gray-900",children:g.description})})]}),g.fileName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded border",children:[(0,a.jsx)(T.A,{className:"h-5 w-5 text-gray-500"}),(0,a.jsx)("span",{className:"text-gray-900",children:g.fileName}),(0,a.jsx)("button",{onClick:()=>v(g),className:"ml-auto px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Download"})]})]}),g.feedback&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded border",children:(0,a.jsx)("p",{className:"text-gray-900",children:g.feedback})})]})]}),(0,a.jsx)("div",{className:"flex justify-end mt-6",children:(0,a.jsx)("button",{onClick:()=>p(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:"Close"})})]})})]})};var eW=t(53904),eG=t(50430);let eK=e=>{let{courseId:s,courseName:t}=e,{currentUser:l,getStageLocks:o,updateStageLock:c}=(0,n.A)(),[m,u]=(0,r.useState)([]),[x,p]=(0,r.useState)(!0),[b,f]=(0,r.useState)(!1),[j,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[k,w]=(0,r.useState)(0),S={intro:{label:"Materi Pengantar",description:"Pengenalan dan overview course"},pretest:{label:"Pre-Test",description:"Tes awal sebelum pembelajaran"},lessons:{label:"Materi Pembelajaran",description:"Konten utama pembelajaran"},posttest:{label:"Post-Test",description:"Tes akhir setelah pembelajaran"},postwork:{label:"Tugas Akhir",description:"Tugas praktik setelah pembelajaran"},finalproject:{label:"Proyek Final",description:"Proyek akhir untuk menyelesaikan course"}},A=()=>Object.keys(S).map(e=>({id:Math.random(),courseId:parseInt(s),stageName:e,isLocked:!1,lockMessage:"",lockedBy:null,lockedAt:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));(0,r.useEffect)(()=>{s&&C()},[s]);let C=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(p(!0),y(""),e){let e=A();u(e),y("Menggunakan data default. Koneksi ke server bermasalah.");return}let t=await o(s);if(t.success&&t.data)u(t.data),w(0);else throw Error(t.error||"Failed to load stage locks")}catch(e){console.error("Error loading stage locks:",e),k<2?(w(e=>e+1),setTimeout(()=>C(),2e3),y("Mencoba ulang... (".concat(k+1,"/3)"))):(u(A()),y("Koneksi bermasalah. Menggunakan data default. Error: ".concat(e.message)))}finally{p(!1)}},D=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{f(!0),y(""),N(""),u(s=>s.map(s=>s.stageName===e?{...s,isLocked:t,lockMessage:a,updatedAt:new Date().toISOString()}:s));let n=await c(s,e,t,a);if(n.success){var r;N("Stage ".concat(null==(r=S[e])?void 0:r.label," berhasil ").concat(t?"dikunci":"dibuka","!"));try{await C()}catch(e){console.warn("Failed to reload from server, keeping local state:",e)}}else throw Error(n.error||"Failed to update stage lock")}catch(s){console.error("Error updating stage lock:",s),u(s=>s.map(s=>s.stageName===e?{...s,isLocked:!t,lockMessage:"",updatedAt:new Date().toISOString()}:s)),y("Gagal memperbarui stage lock: ".concat(s.message))}finally{f(!1)}},P=async(e,s)=>{let t=!s,a="";t&&(a=prompt("Masukkan pesan untuk tahap yang dikunci (opsional):")||"Tahap ini masih dikunci oleh admin."),await D(e,t,a)},z=async(e,s)=>{let t=prompt("Masukkan pesan baru untuk tahap yang dikunci:",s)||s,a=m.find(s=>s.stageName===e);a&&t!==s&&await D(e,a.isLocked,t)};return l&&"admin"===l.role?x?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Memuat data stage locks..."})]})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"border-b border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Kelola Akses Tahap Course"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["Course: ",(0,a.jsx)("span",{className:"font-medium",children:t})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Anda dapat mengunci atau membuka akses ke setiap tahap dalam course ini."})]}),(0,a.jsxs)("div",{className:"p-6",children:[j&&(0,a.jsxs)("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(g.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-600 mt-1",children:j}),j.includes("Koneksi bermasalah")&&(0,a.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{w(0),C()},disabled:x,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-1",children:[(0,a.jsx)(eW.A,{size:14}),"Coba Lagi"]}),(0,a.jsx)("button",{onClick:()=>{C(!0)},disabled:x,className:"px-3 py-1 text-sm bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Gunakan Default"})]})]}),v&&(0,a.jsxs)("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,a.jsx)(h.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Berhasil"})]}),(0,a.jsx)("p",{className:"text-green-600 mt-1",children:v})]}),(0,a.jsx)("div",{className:"space-y-4",children:Object.keys(S).map(e=>{let s=m.find(s=>s.stageName===e)||{stageName:e,isLocked:!1,lockMessage:""},t=S[e];return(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(s.isLocked?"bg-red-100 text-red-600":"bg-green-100 text-green-600"),children:s.isLocked?(0,a.jsx)(i.A,{size:20}):(0,a.jsx)(eG.A,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:t.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:t.description})]})]}),s.isLocked&&s.lockMessage&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"Pesan:"})," ",s.lockMessage]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[s.isLocked&&(0,a.jsx)("button",{onClick:()=>z(e,s.lockMessage),disabled:b,className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition-colors disabled:opacity-50",title:"Edit pesan kunci",children:(0,a.jsx)(d.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>P(e,s.isLocked),disabled:b,className:"px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 ".concat(s.isLocked?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"),children:b?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Menyimpan..."})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s.isLocked?(0,a.jsx)(eG.A,{size:16}):(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:s.isLocked?"Buka":"Kunci"})]})})]})]})},e)})}),j&&j.includes("data default")&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(g.A,{size:20,className:"text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-yellow-800",children:[(0,a.jsx)("p",{className:"font-medium",children:"Mode Offline:"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Saat ini menggunakan data default karena koneksi ke server bermasalah. Perubahan akan disimpan secara lokal dan akan disinkronkan ketika koneksi pulih."})]})]})}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(g.A,{size:20,className:"text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-blue-800",children:[(0,a.jsx)("p",{className:"font-medium",children:"Informasi Penting:"}),(0,a.jsxs)("ul",{className:"text-sm mt-1 space-y-1",children:[(0,a.jsx)("li",{children:"• Tahap yang dikunci tidak dapat diakses oleh siswa"}),(0,a.jsx)("li",{children:"• Admin tetap dapat mengakses semua tahap meskipun dikunci"}),(0,a.jsx)("li",{children:"• Pesan kunci akan ditampilkan kepada siswa yang mencoba mengakses tahap yang dikunci"}),(0,a.jsx)("li",{children:"• Perubahan akan langsung berlaku untuk semua siswa"}),j&&j.includes("data default")&&(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Mode Offline:"})," Perubahan disimpan lokal, akan disinkronkan saat koneksi pulih"]})]})]})]})})]})]}):(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(g.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Akses Ditolak"})]}),(0,a.jsx)("p",{className:"text-red-600 mt-1",children:"Hanya admin yang dapat mengakses fitur ini."})]})};var eV=t(33109);let eQ=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[m,u]=(0,r.useState)("all"),[x,g]=(0,r.useState)("all"),[p,h]=(0,r.useState)([]),[b,f]=(0,r.useState)({totalAttempts:0,averagePreTestScore:0,averagePostTestScore:0,passRate:0});(0,r.useEffect)(()=>{console.log("TestResultsManager: Component mounted, loading data..."),y()},[]);let y=async()=>{try{console.log("TestResultsManager: Starting to load data..."),n(!0),i(""),console.log("TestResultsManager: Calling adminAPI.getTestResults()...");let e=await j.adminAPI.getTestResults();console.log("TestResultsManager: getTestResults response:",e),e&&e.success?(console.log("TestResultsManager: Test results data:",e.data),s(e.data||[]),v(e.data||[])):(console.warn("TestResultsManager: getTestResults failed or returned no success flag:",e),s([]),i("Gagal memuat data hasil test dari server")),console.log("TestResultsManager: Calling adminAPI.getAllCourses()...");let t=await j.adminAPI.getAllCourses();console.log("TestResultsManager: getAllCourses response:",t),t&&t.success?(console.log("TestResultsManager: Courses data:",t.data),h(t.data||[])):(console.warn("TestResultsManager: getAllCourses failed or returned no success flag:",t),h([]))}catch(e){console.error("TestResultsManager: Error loading test results:",e),console.error("TestResultsManager: Error details:",{message:e.message,stack:e.stack,response:e.response}),i(e.message||"Gagal memuat data hasil test. Silakan coba lagi.")}finally{console.log("TestResultsManager: Data loading completed"),n(!1)}},v=e=>{if(console.log("TestResultsManager: Calculating stats for results:",e),!e||0===e.length){console.log("TestResultsManager: No results found, setting empty stats"),f({totalAttempts:0,averagePreTestScore:0,averagePostTestScore:0,passRate:0});return}let s=e.filter(e=>"pretest"===e.quiz_type),t=e.filter(e=>"posttest"===e.quiz_type);console.log("TestResultsManager: PreTest results:",s.length),console.log("TestResultsManager: PostTest results:",t.length);let a=s.length>0?s.reduce((e,s)=>e+s.score,0)/s.length:0,r=t.length>0?t.reduce((e,s)=>e+s.score,0)/t.length:0,n=e.filter(e=>e.passed),l=e.length>0?n.length/e.length*100:0,i={totalAttempts:e.length,averagePreTestScore:Math.round(a),averagePostTestScore:Math.round(r),passRate:Math.round(l)};console.log("TestResultsManager: Calculated stats:",i),f(i)},N=e.filter(e=>{let s=(e.user_name||"").toLowerCase().includes(o.toLowerCase())||(e.course_title||"").toLowerCase().includes(o.toLowerCase())||(e.quiz_title||"").toLowerCase().includes(o.toLowerCase()),t="all"===m||e.quiz_type===m,a="all"===x||e.course_id.toString()===x;return s&&t&&a});return console.log("TestResultsManager: About to render JSX"),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Hasil Pre Test & Post Test"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor dan analisis hasil test pengguna"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Nama Pengguna,Course,Jenis Test,Skor,Status,Waktu Pengerjaan,Tanggal",...N.map(e=>[e.user_name||"N/A",e.course_title||"N/A","pretest"===e.quiz_type?"Pre Test":"Post Test",e.score,e.passed?"Lulus":"Tidak Lulus","".concat(Math.floor(e.time_spent/60),":").concat((e.time_spent%60).toString().padStart(2,"0")),new Date(e.submitted_at).toLocaleDateString("id-ID")].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),t=URL.createObjectURL(e);s.setAttribute("href",t),s.setAttribute("download","hasil_test_".concat(new Date().toISOString().split("T")[0],".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},disabled:t,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[(0,a.jsx)(eC.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),l&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),t&&(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(A.A,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Attempts"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b.totalAttempts})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(eV.A,{className:"h-6 w-6 text-orange-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Pre Test"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[b.averagePreTestScore,"%"]})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(z.A,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Post Test"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[b.averagePostTestScore,"%"]})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(U.A,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pass Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[b.passRate,"%"]})]})]})})]}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(ez.A,{className:"h-4 w-4 inline mr-1"}),"Cari"]}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Nama pengguna, course, atau quiz...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(eT.A,{className:"h-4 w-4 inline mr-1"}),"Jenis Test"]}),(0,a.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Semua"}),(0,a.jsx)("option",{value:"pretest",children:"Pre Test"}),(0,a.jsx)("option",{value:"posttest",children:"Post Test"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(eT.A,{className:"h-4 w-4 inline mr-1"}),"Course"]}),(0,a.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Semua Course"}),p.map(e=>(0,a.jsx)("option",{value:e.id.toString(),children:e.title},e.id))]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:y,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pengguna"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenis Test"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skor"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Waktu"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===N.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:o||"all"!==m||"all"!==x?"Tidak ada hasil yang sesuai dengan filter.":"Belum ada hasil test yang tersedia."})}):N.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.user_name||"N/A"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.user_id]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.course_title||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("pretest"===e.quiz_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"pretest"===e.quiz_type?"Pre Test":"Post Test"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.score,"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.correct_count,"/",e.total_count," benar"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.passed?"Lulus":"Tidak Lulus"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Math.floor(e.time_spent/60),":",(e.time_spent%60).toString().padStart(2,"0")]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.submitted_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{onClick:()=>{alert("Detail akan ditampilkan di modal")},className:"text-blue-600 hover:text-blue-900 mr-3",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})})]},"".concat(e.user_id,"-").concat(e.quiz_id,"-").concat(e.attempt_number)))})]})})}),N.length>0&&(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Menampilkan ",N.length," dari ",e.length," hasil test"]})})]})},eH=e=>{let{activeTab:s="overview"}=e;console.log("AdminDashboard: activeTab =",s);let{currentUser:t}=(0,n.A)(),[l,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),[x,g]=(0,r.useState)(!0),[p,h]=(0,r.useState)(null),[b,f]=(0,r.useState)({totalCourses:0,totalLessons:0,totalStudents:0,completionRate:0,activeStudents:0,totalEnrollments:0});(0,r.useEffect)(()=>{(async()=>{try{let e=await j.adminAPI.getAllCourses();console.log("Courses API Response:",e),e&&e.success&&Array.isArray(e.data)?i(e.data):Array.isArray(e)?i(e):e&&Array.isArray(e.courses)?i(e.courses):(console.warn("Unexpected courses response format:",e),i([]));let s=await j.adminAPI.getDashboardStats();console.log("Dashboard Stats API Response:",s),s&&s.success&&s.stats?f(s.stats):console.warn("Unexpected stats response format:",s)}catch(e){console.error("Error loading data:",e),i([])}finally{g(!1)}})()},[]);let y=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus course ini?"))try{await j.adminAPI.deleteCourse(e),i(l.filter(s=>s.id!==e)),alert("Course berhasil dihapus!")}catch(e){console.error("Error deleting course:",e),alert("Gagal menghapus course. Silakan coba lagi.")}},v=async e=>{try{if(m){let s=await j.adminAPI.updateCourse(m.id,e);s.success&&(i(l.map(e=>e.id===m.id?s.course:e)),alert("Course berhasil diperbarui!"))}else{let s=await j.adminAPI.createCourse(e);s.success&&(i([...l,s.course]),alert("Course berhasil dibuat!"))}c(!1),u(null)}catch(e){console.error("Error saving course:",e),alert("Gagal menyimpan course. Silakan coba lagi.")}};return(Array.isArray(l)&&l.length,Array.isArray(l)&&l.reduce((e,s)=>s&&s.lessons&&Array.isArray(s.lessons)?e+s.lessons.length:e,0),x)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):o?(0,a.jsx)(eh,{course:m,onSave:v,onCancel:()=>{c(!1),u(null)}}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your courses and monitor progress"})]}),(0,a.jsxs)("button",{onClick:()=>{u(null),c(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"Add Course"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(W.A,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Courses"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b.totalCourses})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Lessons"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b.totalLessons})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(U.A,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b.totalStudents})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(A.A,{className:"h-6 w-6 text-orange-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[b.completionRate,"%"]})]})]})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[console.log("AdminDashboard: Rendering tab content, activeTab =",s),"overview"===s&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-3"}),'Course "JavaScript Fundamentals" was updated']}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),'New student enrolled in "React Development"']}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mr-3"}),"Quiz completed by 5 students"]})]})]})}),"courses"===s&&(0,a.jsx)(eb,{courses:l,onEdit:e=>{u(e),c(!0)},onDelete:y}),"quizzes"===s&&(0,a.jsx)(ey,{courses:l}),"surveys"===s&&(0,a.jsx)(eN,{courses:l}),"stage-management"===s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Kelola Akses Tahap Course"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Pilih course untuk mengelola akses tahap-tahapnya:"}),(0,a.jsxs)("div",{className:"mb-4 p-3 bg-gray-100 rounded text-sm",children:[(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"Debug Info:"})}),(0,a.jsxs)("p",{children:["Courses Array: ",Array.isArray(l)?"Yes":"No"]}),(0,a.jsxs)("p",{children:["Courses Length: ",Array.isArray(l)?l.length:"N/A"]}),(0,a.jsxs)("p",{children:["Loading: ",x?"Yes":"No"]}),(0,a.jsxs)("p",{children:["Courses Data: ",JSON.stringify(l,null,2)]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:Array.isArray(l)&&l.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,a.jsx)("button",{onClick:()=>h(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kelola Tahap"})]})},e.id))}),Array.isArray(l)&&0===l.length&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Belum ada course yang tersedia."})]}),p&&(0,a.jsx)(eK,{courseId:p.id,courseName:p.title})]}),"announcements"===s&&(0,a.jsx)(eA,{}),"certificates"===s&&(0,a.jsx)(eI,{}),"project-instructions"===s&&(0,a.jsx)(eM,{}),"course-instructions"===s&&(0,a.jsx)(eF,{}),"course-config"===s&&(0,a.jsx)(eO,{}),"users"===s&&(0,a.jsx)(ek,{}),"test-results"===s&&(0,a.jsxs)("div",{children:[console.log("AdminDashboard: Rendering TestResultsManager"),(0,a.jsx)(eQ,{})]}),"grading"===s&&(0,a.jsx)(e_,{}),"submissions"===s&&(0,a.jsx)(eJ,{}),"students"===s&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Student Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Student management features will be implemented here."})]})]})]})},eX=e=>{let{currentUser:s}=(0,n.A)(),[t,a]=(0,r.useState)({currentStep:"intro",completedSteps:[],lessonProgress:{},quizScores:{},submissions:{},lastAccessed:null,totalTimeSpent:0,startedAt:null,completedAt:null,isCompleted:!1}),[l,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)("saved"),u=(0,r.useCallback)(async t=>{if(e&&s)try{m("saving"),new Date().toISOString(),await (0,j.rT)({courseId:parseInt(e),currentStep:t.currentStep,completedSteps:t.completedSteps,lessonProgress:t.lessonProgress,quizScores:t.quizScores,submissions:t.submissions,totalTimeSpent:t.totalTimeSpent,completedAt:t.completedAt}),m("saved"),setTimeout(()=>m("idle"),2e3)}catch(e){console.error("Error saving progress to backend:",e),m("error")}},[e,s]),x=(0,r.useCallback)(e=>{a(s=>{let t={...s,...e};return m("pending"),u(t),t})},[u]),g=(0,r.useCallback)(e=>{a(s=>{let t={...s,completedSteps:[...new Set([...s.completedSteps,e])]};return m("pending"),u(t),t})},[u]),p=(0,r.useCallback)(e=>{x({currentStep:e})},[x]),h=(0,r.useCallback)(async(e,s)=>{a(t=>{let a={...t,lessonProgress:{...t.lessonProgress,[e]:{...t.lessonProgress[e],...s,lastAccessed:new Date().toISOString()}}};return m("pending"),u(a),a})},[u]),b=(0,r.useCallback)(function(e,s){var a;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=r?"pretest_".concat(e):"posttest_".concat(e);console.log("Saving quiz score:",{quizId:e,score:s,isPreTest:r,quizKey:n,currentQuizScores:t.quizScores}),x({quizScores:{...t.quizScores,[n]:{score:s,completedAt:new Date().toISOString(),attempts:((null==(a=t.quizScores[n])?void 0:a.attempts)||0)+1}}})},[t.quizScores,x]),f=(0,r.useCallback)((e,s)=>{x({submissions:{...t.submissions,[e]:{...s,submittedAt:new Date().toISOString()}}})},[t.submissions,x]),y=(0,r.useCallback)(()=>{let e=["intro","pretest","lessons","posttest","postwork","finalproject"];e.every(e=>t.completedSteps.includes(e))?x({completedAt:new Date().toISOString(),isCompleted:!0}):console.warn("Cannot mark course as completed - not all steps are finished:",{completedSteps:t.completedSteps,missingSteps:e.filter(e=>!t.completedSteps.includes(e))})},[x,t.completedSteps]),v=(0,r.useCallback)(()=>{let e={intro:5,pretest:10,lessons:50,posttest:15,postwork:10,finalproject:10};l&&l.stepWeights&&(e={...e,...l.stepWeights});let s=0;return t.completedSteps.forEach(t=>{e[t]&&(s+=e[t])}),Math.min(s,100)},[t.completedSteps,l]),N=(0,r.useCallback)(()=>{let e=["intro","pretest","lessons","posttest"];return(null==l?void 0:l.hasPostWork)&&e.push("postwork"),(null==l?void 0:l.hasFinalProject)&&e.push("finalproject"),e.every(e=>t.completedSteps.includes(e))},[t.completedSteps,l]),k=(0,r.useCallback)(()=>{if(!t.startedAt)return 0;let e=new Date(t.startedAt);return Math.round(((t.completedAt?new Date(t.completedAt):new Date)-e)/6e4)},[t.startedAt,t.completedAt]),w=(0,r.useCallback)(async()=>{let t={currentStep:"intro",completedSteps:[],lessonProgress:{},quizScores:{},submissions:{},lastAccessed:new Date().toISOString(),totalTimeSpent:0,startedAt:new Date().toISOString(),completedAt:null,isCompleted:!1};if(a(t),e&&s)try{await (0,j.rT)({courseId:parseInt(e),currentStep:t.currentStep,completedSteps:t.completedSteps,lessonProgress:t.lessonProgress,quizScores:t.quizScores,submissions:t.submissions,totalTimeSpent:t.totalTimeSpent,completedAt:t.completedAt})}catch(e){console.error("Failed to reset progress in backend:",e)}},[e,s]);return(0,r.useEffect)(()=>{(async()=>{if(e&&(null==s?void 0:s.id))try{d(!0);let[s,t]=await Promise.all([(0,j.Hb)(e),fetch("".concat("https://8080-firebase-agileku-1751862903205.cluster-ejd22kqny5htuv5dfowoyipt52.cloudworkstations.dev","/api/public/courses/").concat(e)).then(e=>e.json())]);if(t&&t.success&&t.data){let e=t.data;i({hasPostWork:e.hasPostWork,hasFinalProject:e.hasFinalProject,certificateDelay:e.certificateDelay,stepWeights:e.stepWeights})}if(s&&s.success&&s.data){let e=s.data,t={currentStep:e.currentStep||"intro",completedSteps:e.completedSteps||[],lessonProgress:e.lessonProgress||{},quizScores:e.quizScores||{},submissions:e.submissions||{},lastAccessed:new Date().toISOString(),totalTimeSpent:e.totalTimeSpent||0,startedAt:e.startedAt||new Date().toISOString(),completedAt:e.completedAt||null,isCompleted:!!e.completedAt};a(t)}else{let e={currentStep:"intro",completedSteps:[],lessonProgress:{},quizScores:{},submissions:{},lastAccessed:new Date().toISOString(),totalTimeSpent:0,startedAt:new Date().toISOString(),completedAt:null,isCompleted:!1};a(e)}}catch(e){console.error("Failed to load course data from backend:",e),a({currentStep:"intro",completedSteps:[],lessonProgress:{},quizScores:{},submissions:{},lastAccessed:new Date().toISOString(),totalTimeSpent:0,startedAt:new Date().toISOString(),completedAt:null,isCompleted:!1})}finally{d(!1)}})()},[e,null==s?void 0:s.id]),(0,r.useEffect)(()=>{let e=setInterval(()=>{"pending"===c&&a(e=>(e.lastAccessed&&u(e),e))},3e4);return()=>clearInterval(e)},[u,c]),{progress:t,courseConfig:l,isLoading:o,autoSaveStatus:c,updateProgress:x,markStepCompleted:g,setCurrentStep:p,updateLessonProgress:h,saveQuizScore:b,saveSubmission:f,markCourseCompleted:y,getCompletionPercentage:v,isCourseCompleted:N,getTimeSpent:k,resetProgress:w}},eY=(e,s)=>{let{currentUser:t,getCourseById:a}=(0,n.A)(),[l,i]=(0,r.useState)(null),[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),h=(0,r.useRef)(t),b=(0,r.useRef)(e),f=(0,r.useRef)(s);(0,r.useEffect)(()=>{h.current=t},[t]),(0,r.useEffect)(()=>{b.current=e},[e]),(0,r.useEffect)(()=>{f.current=s},[s]);let y=(0,r.useCallback)(async()=>{if(h.current){if(g)return void console.log("Already loading certificates, skipping...");p(!0);try{console.log("Loading certificates from backend...");let e=await (0,j.UV)();e.success&&e.certificates?(console.log("Certificates loaded:",e.certificates),d(e.certificates)):(console.log("No certificates found or invalid response:",e),d([]))}catch(e){console.error("Error loading certificates from backend:",e),d([])}finally{p(!1)}}},[]),v=(0,r.useCallback)(async()=>{if(b.current&&h.current){if(!f.current&&0!==f.current)return void console.log("User not enrolled or no progress data available, skipping backend progress load");try{let e=await (0,j.Hb)(b.current);e&&e.data?i(s=>JSON.stringify(s)!==JSON.stringify(e.data)?e.data:s):i(s=>JSON.stringify(s)!==JSON.stringify(e)?e:s)}catch(e){console.log("Backend progress not available (user may not be enrolled):",e.message),i(null)}}},[]),N=(0,r.useCallback)(()=>{let e=f.current;if(!e&&0!==e)return m(e=>!1===e&&e),!1;let s=e>=100;return console.log("Certificate eligibility check:",{userProgress:e,eligible:s,courseId:b.current,hasBackendProgress:!!l}),m(e=>e!==s?s:e),s},[]),k=(0,r.useCallback)(()=>l&&l.overall_progress?Math.round(l.overall_progress):f.current||0,[l]);(0,r.useCallback)(()=>{if(l&&l.time_spent){let e=Math.round(l.time_spent/60);return e<1?"< 1 jam":"".concat(e," jam")}return"0 jam"},[l]);let w=(0,r.useCallback)(async e=>{if(console.log("generateCertificateForCourse called with:",{targetCourseId:e,currentUser:!!h.current}),!h.current||!e)return void console.log("Cannot request certificate: missing data");x(!0);try{console.log("Requesting certificate via backend API for course:",e);let s=await (0,j.requestCertificate)(e);if(s.success)return console.log("Certificate request submitted successfully:",s.message),await y(),x(!1),s;return console.error("Failed to request certificate:",s),x(!1),null}catch(e){throw console.error("Error requesting certificate:",e),x(!1),e}},[y]),S=(0,r.useCallback)(e=>o.find(s=>s.courseId===parseInt(e)),[o]);return(0,r.useEffect)(()=>{(null==t?void 0:t.id)&&y()},[null==t?void 0:t.id]),(0,r.useEffect)(()=>{e&&(null==t?void 0:t.id)&&void 0!==s&&v()},[e,null==t?void 0:t.id,s]),(0,r.useEffect)(()=>{void 0!==s&&N()},[s]),(0,r.useEffect)(()=>{if(!c||!e||u||!(null==t?void 0:t.id)||o.find(s=>s.courseId===parseInt(e)))return;console.log("Auto-requesting certificate in 5 seconds...");let s=setTimeout(()=>{w(e).catch(console.error)},5e3);return()=>clearTimeout(s)},[c,e,u,null==t?void 0:t.id,o.length]),{certificates:o,isEligible:c,isGenerating:u,isLoading:g,generateCertificate:w,getCertificateForCourse:S,calculateFinalGrade:k,checkEligibility:N,loadCertificates:y}};var eZ=t(89140),e$=t(15968),e0=t(85690),e2=t(33786),e1=t(90792);let e6=e=>{let{item:s,fileUrls:t}=e;console.log("=== VideoPlayer RENDERED ==="),console.log("Item:",s),console.log("FileUrls:",t);let[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(0),m=(0,r.useRef)(null),u=e=>{var s,t,a;if(!e)return null;if(e.includes("youtube.com/embed/"))return e;if(e.includes("youtube.com/watch?v=")){let t=null==(s=e.split("v=")[1])?void 0:s.split("&")[0];return t?"https://www.youtube.com/embed/".concat(t):null}if(e.includes("youtu.be/")){let s=null==(t=e.split("youtu.be/")[1])?void 0:t.split("?")[0];return s?"https://www.youtube.com/embed/".concat(s):null}if(e.includes("vimeo.com/")){let s=null==(a=e.split("vimeo.com/")[1])?void 0:a.split("?")[0];return s?"https://player.vimeo.com/video/".concat(s):null}return e},x=(()=>{if("upload"===s.uploadMethod&&s.fileId&&t[s.fileId])return{type:"upload",url:t[s.fileId]};let e=s.src||s.url||s.videoUrl;return e?{type:"embed",url:u(e),originalUrl:e}:null})(),p=()=>{o(!1),l(!0)};return((0,r.useEffect)(()=>{l(!1),o(!0)},[s,t]),console.log("VideoPlayer Debug:",{item:s,videoSource:x,fileUrls:s.fileId?{[s.fileId]:t[s.fileId]}:{},isLoading:i,videoError:n,retryCount:d}),console.log("Video URL Details:",{"item.src":s.src,"item.url":s.url,"item.videoUrl":s.videoUrl,uploadMethod:s.uploadMethod,fileId:s.fileId,fileUrl:s.fileId?t[s.fileId]:null,normalizedUrl:null==x?void 0:x.url,originalUrl:null==x?void 0:x.originalUrl,videoType:null==x?void 0:x.type}),x)?(0,a.jsxs)("div",{className:"relative bg-black rounded-lg overflow-hidden shadow-lg",style:{paddingBottom:"56.25%"},children:[i&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-10",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)(eW.A,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{children:"Loading video..."})]})}),n&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-10",children:(0,a.jsxs)("div",{className:"text-center text-white p-6",children:[(0,a.jsx)(g.A,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),(0,a.jsx)("p",{className:"mb-4",children:"Gagal memuat video"}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{if(l(!1),o(!0),c(e=>e+1),m.current){let e=m.current.src;m.current.src="",setTimeout(()=>{m.current.src=e},100)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(eW.A,{className:"w-4 h-4 inline mr-2"}),"Coba Lagi"]}),(x.originalUrl||x.url)&&(0,a.jsxs)("button",{onClick:()=>{((null==x?void 0:x.originalUrl)||(null==x?void 0:x.url))&&window.open(x.originalUrl||x.url,"_blank")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(e2.A,{className:"w-4 h-4 inline mr-2"}),"Buka di Tab Baru"]})]})]})}),"upload"===x.type?(0,a.jsx)("video",{src:x.url,className:"absolute top-0 left-0 w-full h-full",controls:!0,title:s.title,onLoadStart:()=>o(!0),onLoadedData:()=>o(!1),onError:p,children:"Your browser does not support the video tag."}):(0,a.jsx)("iframe",{ref:m,src:"".concat(x.url).concat(x.url.includes("?")?"&":"?","enablejsapi=1&origin=").concat(encodeURIComponent(window.location.origin)),className:"absolute top-0 left-0 w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,title:s.title,onLoad:()=>{o(!1),l(!1)},onError:p})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 bg-gray-100 rounded-lg",children:[(0,a.jsx)(g.A,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-center mb-2",children:"Video tidak tersedia"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 text-center",children:["Debug: ",JSON.stringify({src:s.src,url:s.url,videoUrl:s.videoUrl,uploadMethod:s.uploadMethod,fileId:s.fileId},null,2)]})]})},e4=e=>{let{item:s,fileUrls:t}=e,r="upload"===s.uploadMethod&&s.fileId?t[s.fileId]:s.embedUrl||s.downloadUrl||s.url,n=s.title||"PDF Document";return s.filename,(0,a.jsxs)("div",{style:{margin:"20px 0",padding:"20px",border:"2px dashed #ccc",borderRadius:"8px",background:"#f9f9f9",textAlign:"center"},children:[(0,a.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,a.jsx)("span",{style:{fontSize:"24px",marginRight:"8px"},children:"\uD83D\uDCC4"}),(0,a.jsx)("strong",{style:{color:"#333"},children:n})]}),(0,a.jsx)("p",{style:{color:"#666",marginBottom:"20px",fontSize:"14px"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[(0,a.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:{color:"#fff",background:"#3b82f6",padding:"10px 16px",borderRadius:"6px",textDecoration:"none",display:"inline-flex",alignItems:"center",fontSize:"14px",fontWeight:"500"},children:"\uD83D\uDD17 Buka PDF di Tab Baru"}),(0,a.jsx)("a",{href:r,download:!0,style:{color:"#fff",background:"#10b981",padding:"10px 16px",borderRadius:"6px",textDecoration:"none",display:"inline-flex",alignItems:"center",fontSize:"14px",fontWeight:"500"},children:"⬇️ Download PDF"})]})]})},e3=e=>{let{material:s,onComplete:t}=e,[n,l]=(0,r.useState)({});return(0,r.useEffect)(()=>{(async()=>{if(!s||!s.content||!Array.isArray(s.content))return;let e={};for(let t of s.content)if(t.fileId&&"upload"===t.uploadMethod)try{let s=await et(t.fileId);s&&(e[t.fileId]=er(s))}catch(e){console.error("Error loading file:",e)}l(e)})()},[s]),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(S.A,{className:"text-white",size:32})}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Materi Pengantar"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Pelajari konsep dasar sebelum memulai pembelajaran utama"})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8 mb-8",children:(0,a.jsx)("div",{className:"prose prose-lg max-w-none",children:s.content?"string"==typeof s.content?(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:s.content}}):(e=>Array.isArray(e)?e.map((e,s)=>{if(!e||"object"!=typeof e)return console.warn("Invalid content item:",e),null;switch(e.type){case"text":return(0,a.jsx)("div",{className:"text-gray-700 mb-4 leading-relaxed",children:(0,a.jsx)(e1.oz,{children:e.content})},s);case"image":return(0,a.jsxs)("div",{className:"my-6",children:[(0,a.jsx)("img",{src:e.src,alt:e.alt,className:"w-full max-w-2xl mx-auto rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",loading:"lazy"}),e.caption&&(0,a.jsx)("p",{className:"text-center text-sm text-gray-600 mt-2 italic",children:e.caption})]},s);case"list":return(0,a.jsxs)("div",{className:"mb-4",children:[e.ordered?(0,a.jsxs)("div",{className:"flex items-start space-x-2 mb-2",children:[(0,a.jsx)(eZ.A,{className:"text-blue-600 mt-1 flex-shrink-0",size:18}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Langkah-langkah:"})]}):(0,a.jsxs)("div",{className:"flex items-start space-x-2 mb-2",children:[(0,a.jsx)(e$.A,{className:"text-blue-600 mt-1 flex-shrink-0",size:18}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Poin-poin penting:"})]}),e.ordered?(0,a.jsx)("ol",{className:"list-decimal list-inside mb-4 space-y-2 pl-2",children:e.items.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-700",children:(0,a.jsx)(e1.oz,{components:{p:e=>{let{node:s,...t}=e;return(0,a.jsx)("span",{...t})}},children:e})},s))}):(0,a.jsx)("ul",{className:"list-disc list-inside mb-4 space-y-2 pl-2",children:e.items.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-700",children:(0,a.jsx)(e1.oz,{components:{p:e=>{let{node:s,...t}=e;return(0,a.jsx)("span",{...t})}},children:e})},s))})]},s);case"video":return(0,a.jsx)("div",{className:"my-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"bg-white/20 rounded-lg p-2",children:(0,a.jsx)(e0.A,{className:"text-white",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.title||"Video Pembelajaran"}),e.description&&(0,a.jsx)("p",{className:"text-red-100 text-sm mt-1",children:e.description}),e.duration&&(0,a.jsxs)("p",{className:"text-red-100 text-sm mt-1",children:["Durasi: ",e.duration]})]})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(e6,{item:e,fileUrls:n})})]})},s);case"pdf":return(0,a.jsx)("div",{className:"my-8",children:(0,a.jsx)(e4,{item:e,fileUrls:n})},s);case"external_link":return(0,a.jsx)("div",{className:"my-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"bg-white/20 rounded-lg p-2",children:(0,a.jsx)(e2.A,{className:"text-white",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.title||"Link Eksternal"}),e.description&&(0,a.jsx)("p",{className:"text-green-100 text-sm mt-1",children:e.description})]})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(e2.A,{className:"text-green-600",size:20}),(0,a.jsx)("span",{className:"font-medium text-gray-900 truncate",children:e.url})]}),(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 font-medium flex-shrink-0 ml-4",children:[(0,a.jsx)(e2.A,{className:"mr-2 h-4 w-4"}),"Kunjungi"]})]})})]})},s);default:return console.warn("Unknown content type:",e.type,e),(0,a.jsxs)("div",{className:"my-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-yellow-800",children:["Unsupported content type: ",e.type]}),(0,a.jsx)("pre",{className:"text-xs text-yellow-600 mt-2",children:JSON.stringify(e,null,2)})]},s)}}):"string"==typeof e?e.split("\n").map((e,s)=>{if(e.startsWith("# "))return(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4 mt-6 first:mt-0",children:e.substring(2)},s);if(e.startsWith("## "))return(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 mt-6",children:e.substring(3)},s);if(e.startsWith("### "))return(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2 mt-4",children:e.substring(4)},s);if(e.trim().startsWith("![")&&e.includes("](")&&e.includes(")")){let t=e.match(/!\[([^\]]*)\]\(([^\)]+)\)/);if(t){let[,e,r]=t;return(0,a.jsxs)("div",{className:"my-6",children:[(0,a.jsx)("img",{src:r,alt:e,className:"w-full max-w-2xl mx-auto rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",loading:"lazy"}),e&&(0,a.jsx)("p",{className:"text-center text-sm text-gray-600 mt-2 italic",children:e})]},s)}}if(e.trim().startsWith("[VIDEO:")&&e.includes("](")&&e.includes(")")){let t=e.match(/\[VIDEO:\s*([^\]]+)\]\(([^\)]+)\)/);if(t){let[,e,r]=t;return(0,a.jsxs)("div",{className:"my-8 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-200",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-purple-800 mb-4 flex items-center",children:[(0,a.jsx)(e0.A,{className:"mr-2",size:20}),e]}),(0,a.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:r,title:e,className:"w-full h-full",allowFullScreen:!0})})]},s)}}return""===e.trim()?(0,a.jsx)("br",{},s):(0,a.jsx)("p",{className:"mb-3 text-sm sm:text-base leading-relaxed text-gray-700",children:e},s)}):null)(s.content):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(T.A,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,a.jsx)("p",{className:"text-gray-500",children:"Materi pengantar belum tersedia"})]})})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl",children:"Lanjut ke Pre-Test"})})]})},e5="localhost"===window.location.hostname,e8="".concat(e5?"https://api.mindshiftlearning.id":"https://8080-firebase-agileku-1751862903205.cluster-ejd22kqny5htuv5dfowoyipt52.cloudworkstations.dev","/api/protected"),e7=()=>localStorage.getItem("authToken"),e9=()=>{let e=e7();return{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""}},se=async e=>{if(!e.ok)throw Error(await e.text()||"HTTP error! status: ".concat(e.status));return e.json()},ss={getQuiz:async(e,s)=>{try{let t=await fetch("".concat(e8,"/courses/").concat(e,"/quiz/").concat(s),{method:"GET",headers:e9()});return await se(t)}catch(e){throw console.error("Error getting quiz:",e),e}},startQuizAttempt:async(e,s)=>{try{let t=await fetch("".concat(e8,"/courses/").concat(e,"/quiz/").concat(s,"/start"),{method:"POST",headers:e9()});return await se(t)}catch(e){throw console.error("Error starting quiz attempt:",e),e}},submitQuizAttempt:async(e,s,t)=>{try{let a=await fetch("".concat(e8,"/quiz/attempts/").concat(e,"/submit"),{method:"POST",headers:e9(),body:JSON.stringify({answers:s,timeSpent:t})});return await se(a)}catch(e){throw console.error("Error submitting quiz:",e),e}},getQuizAttempts:async(e,s)=>{try{let t=await fetch("".concat(e8,"/courses/").concat(e,"/quiz/").concat(s,"/attempts"),{method:"GET",headers:e9()});return await se(t)}catch(e){throw console.error("Error getting quiz attempts:",e),e}},getQuizResult:async e=>{try{let s=await fetch("".concat(e8,"/quiz/attempts/").concat(e,"/result"),{method:"GET",headers:e9()});return await se(s)}catch(e){throw console.error("Error getting quiz result:",e),e}}},st=e=>{let{courseId:s,quizType:t,onComplete:n,onBack:l}=e,[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(0),[x,g]=(0,r.useState)({}),[p,h]=(0,r.useState)(0),[b,f]=(0,r.useState)(0),[j,y]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),[k,w]=(0,r.useState)(!0),[S,A]=(0,r.useState)(null),[C,D]=(0,r.useState)(null),[P,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{try{w(!0),A(null);let e=await ss.getQuiz(s,t);if(e.success){o(e.data);let a=await ss.getQuizAttempts(s,t);if(a.success&&a.data&&a.data.length>0){let s=a.data[0];if(s.completed){let e=await ss.getQuizResult(s.id);e.success&&(N(e.data),z(!0))}else{c(s),g(s.answers||{}),D(new Date(s.startedAt));let t=Math.floor((Date.now()-new Date(s.startedAt))/1e3),a=Math.max(0,60*e.data.timeLimit-t);h(a),f(t)}}}}catch(e){console.error("Error loading quiz:",e),A("Failed to load quiz. Please try again.")}finally{w(!1)}};s&&t&&e()},[s,t]),(0,r.useEffect)(()=>{if(d&&!P&&"pretest"!==t&&"posttest"!==t){if(p>0){let e=setInterval(()=>{h(e=>e<=1?(E(),0):e-1),f(e=>e+1)},1e3);return()=>clearInterval(e)}}else if(d&&!P){let e=setInterval(()=>{f(e=>e+1)},1e3);return()=>clearInterval(e)}},[d,p,P,t]);let T=async()=>{try{w(!0),A(null);let e=await ss.startQuizAttempt(s,t);e.success&&(c(e.data),g({}),u(0),h(60*i.timeLimit),f(0),D(new Date),z(!1))}catch(e){console.error("Error starting quiz:",e),A(e.message||"Failed to start quiz. Please try again.")}finally{w(!1)}},I=(e,s)=>{g(t=>({...t,[e]:s}))},E=(0,r.useCallback)(async()=>{if(!j&&d)try{y(!0),A(null);let e=await ss.submitQuizAttempt(d.id,x,b);e.success&&(N(e.data),z(!0),c(null),n&&n({type:t,result:e.data,passed:e.data.passed}))}catch(e){console.error("Error submitting quiz:",e),A(e.message||"Failed to submit quiz. Please try again.")}finally{y(!1)}},[d,x,b,j,t,n]),M=e=>{let s=Math.floor(e/60);return"".concat(s.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))};if(k)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md w-full",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading quiz..."})]})});if(S)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md w-full",children:[(0,a.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:S}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 transform hover:scale-105",children:"Retry"})]})});if(!i)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md w-full",children:[(0,a.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Quiz Not Found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["The ",t," for this course is not available."]}),(0,a.jsx)("button",{onClick:l,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 transform hover:scale-105",children:"Go Back"})]})});if(P&&v)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-100 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-2xl w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:[i.title," - Results"]}),"pretest"!==t&&"posttest"!==t&&(0,a.jsx)("div",{className:"inline-flex items-center px-6 py-3 rounded-full text-lg font-semibold ".concat(v.passed?"bg-green-100 text-green-800 border-2 border-green-200":"bg-red-100 text-red-800 border-2 border-red-200"),children:v.passed?"✅ Passed":"❌ Failed"}),("pretest"===t||"posttest"===t)&&(0,a.jsx)("div",{className:"inline-flex items-center px-6 py-3 rounded-full text-lg font-semibold bg-blue-100 text-blue-800 border-2 border-blue-200",children:"✅ Completed"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-xl text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[v.score,"%"]}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Score"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-xl text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[v.correctCount,"/",v.totalCount]}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Correct Answers"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-xl text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:M(v.timeSpent)}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Time Spent"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 p-6 rounded-xl text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:v.attemptNumber}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Attempt"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[v.canRetake&&"pretest"!==t&&"posttest"!==t&&(0,a.jsx)("button",{onClick:()=>{N(null),z(!1),T()},className:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-8 rounded-lg transition duration-200 transform hover:scale-105 flex items-center justify-center",children:"\uD83D\uDD04 Retake Quiz"}),(0,a.jsx)("button",{onClick:()=>{n?"pretest"===t||"posttest"===t?n({type:t,result:v,passed:!0,shouldProceed:!0}):n({type:t,result:v,passed:v.passed,shouldProceed:v.passed}):l()},className:"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white font-bold py-4 px-8 rounded-xl transition duration-200 transform hover:scale-105 flex items-center justify-center shadow-lg",children:"pretest"===t||"posttest"===t||v.passed?"\uD83D\uDE80 Lanjut ke Materi Selanjutnya":"\uD83D\uDCDA Kembali ke Course"}),(0,a.jsx)("button",{onClick:l,className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 transform hover:scale-105 flex items-center justify-center",children:"← Kembali"})]})]})});if(!d)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-100 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-2xl w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"pretest"===t?"\uD83D\uDCDD":"\uD83C\uDFAF"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:i.title}),(0,a.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed",children:i.description})]}),(0,a.jsxs)("div",{className:"grid ".concat("grid-cols-2"," gap-4 mb-8"),children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-xl text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:i.questions?i.questions.length:0}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Questions"})]}),"pretest"!==t&&"posttest"!==t&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-xl text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-2",children:i.timeLimit}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Minutes"})]}),"pretest"!==t&&"posttest"!==t&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-xl text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600 mb-2",children:[i.passingScore,"%"]}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Passing Score"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 p-6 rounded-xl text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600 mb-2",children:i.maxAttempts}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Max Attempts"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsxs)("button",{onClick:T,className:"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white font-bold py-4 px-8 rounded-xl transition duration-200 transform hover:scale-105 flex items-center justify-center text-lg shadow-lg",children:["\uD83D\uDE80 Start ","pretest"===t?"Pre-test":"Post-test"]}),(0,a.jsx)("button",{onClick:l,className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-4 px-8 rounded-xl transition duration-200 transform hover:scale-105 flex items-center justify-center",children:"← Back"})]})]})});if(!i.questions||0===i.questions.length)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-100 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md w-full",children:[(0,a.jsx)("div",{className:"text-yellow-500 text-6xl mb-4",children:"\uD83D\uDCCB"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Questions Available"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This quiz has no questions available."}),(0,a.jsx)("button",{onClick:l,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 transform hover:scale-105",children:"Go Back"})]})});let U=i.questions[m];return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:i.title}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"bg-white bg-opacity-20 rounded-full h-3 mb-2",children:(0,a.jsx)("div",{className:"bg-white rounded-full h-3 transition-all duration-300 ease-out",style:{width:"".concat(i&&i.questions&&d?Math.round((m+1)/i.questions.length*100):0,"%")}})}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Question ",m+1," of ",i.questions?i.questions.length:0]})]}),"pretest"!==t&&"posttest"!==t&&(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-4 py-2 rounded-full font-semibold ".concat(p<300?"bg-red-100 text-red-800 animate-pulse":"bg-opacity-20 text-white"),children:["⏱️ ",M(p)]})})]})]}),(0,a.jsx)("div",{className:"p-8",children:(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 leading-relaxed mb-6",children:U.question}),(0,a.jsx)("div",{className:"space-y-4",children:U.options.map((e,s)=>(0,a.jsx)("div",{className:"group cursor-pointer p-4 rounded-xl border-2 transition-all duration-200 hover:shadow-md ".concat(x[U.id]===s?"border-indigo-500 bg-indigo-50 shadow-md transform scale-[1.02]":"border-gray-200 bg-gray-50 hover:border-indigo-300 hover:bg-indigo-25"),onClick:()=>I(U.id,s),children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"flex items-center justify-center w-8 h-8 rounded-full font-semibold text-sm ".concat(x[U.id]===s?"bg-indigo-500 text-white":"bg-gray-300 text-gray-700 group-hover:bg-indigo-400 group-hover:text-white"),children:String.fromCharCode(65+s)}),(0,a.jsx)("span",{className:"text-gray-700 font-medium flex-1",children:e}),x[U.id]===s&&(0,a.jsx)("span",{className:"text-indigo-500 text-xl",children:"✓"})]})},s))})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-8 py-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6",children:[(0,a.jsx)("button",{onClick:()=>{m>0&&u(e=>e-1)},disabled:0===m,className:"px-6 py-3 rounded-lg font-semibold transition duration-200 ".concat(0===m?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-600 hover:bg-gray-700 text-white transform hover:scale-105"),children:"← Previous"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:i.questions&&i.questions.map((e,s)=>(0,a.jsx)("button",{className:"w-10 h-10 rounded-full font-semibold text-sm transition-all duration-200 ".concat(s===m?"bg-indigo-600 text-white ring-4 ring-indigo-200 transform scale-110":void 0!==x[i.questions[s].id]?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-600 hover:bg-gray-300"),onClick:()=>u(s),children:s+1},s))}),i.questions&&m===i.questions.length-1?(0,a.jsx)("button",{onClick:E,disabled:j,className:"px-8 py-3 rounded-lg font-bold transition duration-200 ".concat(j?"bg-gray-400 text-white cursor-not-allowed":"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white transform hover:scale-105 shadow-lg"),children:j?"⏳ Submitting...":"\uD83C\uDFAF Submit Quiz"}):(0,a.jsx)("button",{onClick:()=>{i&&i.questions&&m<i.questions.length-1&&u(e=>e+1)},className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-lg transition duration-200 transform hover:scale-105",children:"Next →"})]})})]})})})},sa=e=>{let{courseId:s,onComplete:t,onBack:r}=e;return(0,a.jsx)("div",{className:"pretest-enhanced",children:(0,a.jsx)(st,{courseId:s,quizType:"pretest",onComplete:e=>{console.log("Pre-test completed:",e),t&&t({type:"pretest",passed:e.passed,score:e.result.score,canRetake:e.result.canRetake,result:e.result,shouldProceed:e.shouldProceed})},onBack:r})})};var sr=t(29621),sn=t(60132),sl=t(38391);let si=e=>{var s;let{lessons:t,onMarkComplete:n,courseId:l,currentLessonIndex:i=0,onLessonChange:o}=e;console.log("=== LessonContent RENDERED ==="),console.log("Lessons received:",t),console.log("Current lesson index:",i);let[d,c]=(0,r.useState)({}),{progress:m,updateLessonProgress:u,markStepCompleted:x}=eX(l);if((0,r.useEffect)(()=>{(async()=>{if(!t||!Array.isArray(t))return;let e={};for(let s of t)if(s.content&&Array.isArray(s.content)){for(let t of s.content)if(t.fileId&&"upload"===t.uploadMethod)try{let s=await et(t.fileId);s&&(e[t.fileId]=er(s))}catch(e){console.error("Error loading file:",e)}}c(e)})()},[t,i]),!t||!Array.isArray(t)||0===t.length)return(0,a.jsx)("div",{className:"px-4 py-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No lessons available."})});let g=t[i],p=e=>(console.log("=== renderContent CALLED ==="),console.log("Content received:",e),Array.isArray(e))?b(e):(0,a.jsx)(e1.oz,{components:{h1:e=>{let{node:s,...t}=e;return(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4 mt-6 first:mt-0",...t})},h2:e=>{let{node:s,...t}=e;return(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 mt-6",...t})},h3:e=>{let{node:s,...t}=e;return(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2 mt-4",...t})},p:e=>{let{node:s,...t}=e;return(0,a.jsx)("p",{className:"mb-3 text-sm sm:text-base leading-relaxed text-gray-700",...t})},ul:e=>{let{node:s,...t}=e;return(0,a.jsx)("ul",{className:"list-disc list-inside mb-4 space-y-2 pl-2",...t})},ol:e=>{let{node:s,...t}=e;return(0,a.jsx)("ol",{className:"list-decimal list-inside mb-4 space-y-2 pl-2",...t})},li:e=>{let{node:s,...t}=e;return(0,a.jsx)("li",{className:"text-gray-700",...t})},a:e=>{let{node:s,href:t,...r}=e;return(0,a.jsx)("a",{href:t,className:"text-blue-600 hover:text-blue-800 underline",target:t.startsWith("http")?"_blank":void 0,rel:t.startsWith("http")?"noopener noreferrer":void 0,...r})},img:e=>{let{node:s,src:t,alt:r,...n}=e;return(0,a.jsxs)("div",{className:"my-6",children:[(0,a.jsx)("img",{src:t,alt:r||"",className:"w-full max-w-2xl mx-auto rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",loading:"lazy",...n}),r&&(0,a.jsx)("p",{className:"text-center text-sm text-gray-600 mt-2 italic",children:r})]})},code:e=>{let{node:s,inline:t,className:r,children:n,...l}=e,i=/language-(\w+)/.exec(r||""),o=i?i[1]:"";return t?(0,a.jsx)("code",{className:"bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-sm font-mono",...l,children:n}):(0,a.jsxs)("div",{className:"my-4 bg-gray-900 rounded-lg p-4 overflow-x-auto shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(sr.A,{size:16,className:"text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:o||"code"})]}),(0,a.jsx)(sn.A,{language:o||"javascript",style:sl.A,className:"rounded-md",...l,children:String(n).replace(/\n$/,"")})]})}},children:e}),b=e=>(console.log("=== renderMixedContent CALLED ==="),console.log("Content array:",e),e.map((e,s)=>{switch(console.log("Processing item ".concat(s,":"),e),e.type){case"text":return(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"text-gray-700 leading-relaxed",children:(0,a.jsx)(e1.oz,{children:e.content})})},s);case"image":return(0,a.jsxs)("div",{className:"my-6",children:[(0,a.jsx)("img",{src:e.src,alt:e.alt,className:"w-full max-w-2xl mx-auto rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",loading:"lazy"}),e.caption&&(0,a.jsx)("p",{className:"text-center text-sm text-gray-600 mt-2 italic",children:e.caption})]},s);case"list":return(0,a.jsxs)("div",{className:"mb-4",children:[e.ordered?(0,a.jsxs)("div",{className:"flex items-start space-x-2 mb-2",children:[(0,a.jsx)(eZ.A,{className:"text-blue-600 mt-1 flex-shrink-0",size:18}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Langkah-langkah:"})]}):(0,a.jsxs)("div",{className:"flex items-start space-x-2 mb-2",children:[(0,a.jsx)(e$.A,{className:"text-blue-600 mt-1 flex-shrink-0",size:18}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Poin-poin penting:"})]}),e.ordered?(0,a.jsx)("ol",{className:"list-decimal list-inside mb-4 space-y-2 pl-2",children:e.items.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-700",children:(0,a.jsx)(e1.oz,{components:{p:e=>{let{node:s,...t}=e;return(0,a.jsx)("span",{...t})}},children:e})},s))}):(0,a.jsx)("ul",{className:"list-disc list-inside mb-4 space-y-2 pl-2",children:e.items.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-700",children:(0,a.jsx)(e1.oz,{components:{p:e=>{let{node:s,...t}=e;return(0,a.jsx)("span",{...t})}},children:e})},s))})]},s);case"code":return(0,a.jsxs)("div",{className:"my-4 bg-gray-900 rounded-lg p-4 overflow-x-auto shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(sr.A,{size:16,className:"text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:e.language||"code"})]}),(0,a.jsx)(sn.A,{language:e.language||"javascript",style:sl.A,className:"rounded-md",children:e.content})]},s);case"pdf":return(0,a.jsx)("div",{className:"my-8",children:(0,a.jsx)(e4,{item:e,fileUrls:d})},s);case"video":return console.log("=== RENDERING VIDEO CASE ==="),console.log("Video item:",e),console.log("FileUrls available:",d),(0,a.jsx)("div",{className:"my-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(Q.A,{className:"text-blue-600",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.duration&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,a.jsx)(e0.A,{className:"mr-1",size:12}),e.duration]})]})]})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(e6,{item:e,fileUrls:d})})]})},s);case"external_link":return(0,a.jsx)("div",{className:"my-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(H.A,{className:"text-green-600",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:(0,a.jsx)(e2.A,{className:"text-gray-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Link Eksternal"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.url})]})]}),(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,a.jsx)(e2.A,{className:"mr-2 h-4 w-4"}),"Kunjungi"]})]})})]})},s);default:return null}}));return g?(console.log("=== CURRENT LESSON ==="),console.log("Current lesson:",t[i]),console.log("Lesson content:",null==(s=t[i])?void 0:s.content),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 space-y-4 sm:space-y-0",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:g.title}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{i>0&&o&&o(i-1)},disabled:0===i,className:"px-3 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm ".concat(0===i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:[(0,a.jsx)(G.A,{size:16}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Previous"})]}),(0,a.jsxs)("button",{onClick:()=>{i<t.length-1&&o&&o(i+1)},disabled:i===t.length-1,className:"px-3 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm ".concat(i===t.length-1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,a.jsx)(q.A,{size:16})]})]})]}),"reading"===g.type&&(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(S.A,{className:"text-purple-600",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Materi Bacaan"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Pelajari konsep-konsep penting dalam lesson ini"})]})]})}),(0,a.jsx)("div",{className:"p-6 sm:p-8",children:(0,a.jsx)("div",{className:"text-gray-700 leading-relaxed",children:(g.content,p(g.content))})})]})}),"video"===g.type&&(console.log("=== LESSON TYPE VIDEO DETECTED ==="),console.log("Lesson data:",g),(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(Q.A,{className:"text-blue-600",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Video Tutorial"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Tonton video pembelajaran berikut"})]})]})}),(0,a.jsx)("div",{className:"p-6 sm:p-8",children:(0,a.jsx)("div",{className:"text-gray-700 leading-relaxed",children:(console.log("=== CALLING renderContent for lesson.content ==="),console.log("lesson.content:",g.content),p(g.content))})})]})})),"mixed"===g.type&&(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,a.jsx)(S.A,{className:"text-indigo-600",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Materi Pembelajaran"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Konten interaktif dengan berbagai format media"})]})]})}),(0,a.jsx)("div",{className:"p-6 sm:p-8",children:Array.isArray(g.content)?b(g.content):(0,a.jsx)("div",{className:"text-gray-700 leading-relaxed",children:(console.log("=== CALLING renderContent for lesson.content ==="),console.log("lesson.content:",g.content),p(g.content))})})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 sm:mt-8 pt-6 border-t space-y-4 sm:space-y-0",children:[(0,a.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500",children:["Lesson ",i+1," of ",t.length]}),(0,a.jsx)("div",{className:"w-full max-w-md mx-4 order-first sm:order-none",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((i+1)/t.length*100,"%")}})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{i>0&&o&&o(i-1)},disabled:0===i,className:"px-3 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm ".concat(0===i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:[(0,a.jsx)(G.A,{size:16}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Previous"})]}),(0,a.jsxs)("button",{onClick:()=>{i<t.length-1&&o&&o(i+1)},disabled:i===t.length-1,className:"px-3 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm ".concat(i===t.length-1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,a.jsx)(q.A,{size:16})]}),(0,a.jsxs)("button",{onClick:()=>{let e=t[i];n&&e?(console.log("Marking lesson complete:",e.id),n(e.id)):console.log("Missing onMarkComplete or currentLesson:",{onMarkComplete:!!n,currentLesson:e})},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2 text-sm sm:text-base",children:[(0,a.jsx)(h.A,{size:16}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Mark Complete"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Complete"})]})]})]})]})):(0,a.jsx)("div",{className:"px-4 py-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No lesson content available."})})},so=e=>{var s,t;let{courseId:n,onComplete:l,onBack:i}=e,[o,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),[g,p]=(0,r.useState)({satisfaction:0,difficulty:0,usefulness:0,feedback:""}),[b,f]=(0,r.useState)(!1),y=async()=>{var e,s,t,a,r;console.log("Survey submitted:",g);try{let a={course_id:n,rating:g.satisfaction,difficulty:g.difficulty,clarity:g.usefulness,usefulness:g.usefulness,feedback:g.feedback||"",post_test_score:(null==u||null==(e=u.result)?void 0:e.score)||0,post_test_completed:!0};await (0,j.Qh)(a),console.log("Survey successfully submitted to backend"),f(!0),l&&l({type:"posttest",score:(null==u||null==(s=u.result)?void 0:s.score)||0,canRetake:(null==u||null==(t=u.result)?void 0:t.canRetake)||!0,result:(null==u?void 0:u.result)||{},surveyCompleted:!0})}catch(e){console.error("Error submitting survey:",e),f(!0),l&&l({type:"posttest",score:(null==u||null==(a=u.result)?void 0:a.score)||0,canRetake:(null==u||null==(r=u.result)?void 0:r.canRetake)||!0,result:(null==u?void 0:u.result)||{},surveyCompleted:!0})}},v=(e,s,t)=>{let{emoji:r,text:n,color:l}=(e=>{switch(e){case 0:default:return{emoji:"❓",text:"Belum dinilai",color:"text-gray-500"};case 1:return{emoji:"\uD83D\uDE1E",text:"Sangat Buruk",color:"text-red-500"};case 2:return{emoji:"\uD83D\uDE15",text:"Buruk",color:"text-orange-500"};case 3:return{emoji:"\uD83D\uDE10",text:"Cukup",color:"text-yellow-500"};case 4:return{emoji:"\uD83D\uDE0A",text:"Baik",color:"text-green-500"};case 5:return{emoji:"\uD83D\uDE0D",text:"Sangat Baik",color:"text-green-600"}}})(e);return(0,a.jsxs)("div",{className:"mb-6 text-gray-900",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:t}),(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[1,2,3,4,5].map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>s(t),className:"p-2 transition-all duration-200 transform hover:scale-110 rounded-full ".concat(t<=e?"text-yellow-400 bg-yellow-50":"text-gray-300 hover:text-yellow-300 hover:bg-gray-50"),children:(0,a.jsx)(ev.A,{size:28,fill:t<=e?"currentColor":"none"})},t))}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,a.jsx)("span",{className:"text-2xl",children:r}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(l),children:n})]}),e>0&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-200 to-yellow-300 rounded-full px-3 py-1",children:(0,a.jsxs)("span",{className:"text-xs font-semibold text-yellow-800",children:[e,"/5 ⭐"]})})})]})]})};return b?(0,a.jsxs)("div",{className:"text-center space-y-6 px-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 rounded-full w-20 h-20 sm:w-24 sm:h-24 flex items-center justify-center mx-auto animate-pulse",children:(0,a.jsx)(h.A,{className:"text-white",size:32})}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 text-2xl animate-bounce",children:"\uD83C\uDF89"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Terima Kasih! \uD83D\uDE4F"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-1 text-2xl",children:[(0,a.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0s"},children:"\uD83C\uDF1F"}),(0,a.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0.1s"},children:"✨"}),(0,a.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0.2s"},children:"\uD83C\uDF1F"})]})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Post-test dan survei telah selesai. Anda dapat melanjutkan ke tahap berikutnya."}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,a.jsxs)("p",{className:"text-blue-800 font-medium",children:["Skor Post-Test: ",(null==u||null==(s=u.result)?void 0:s.score)||0,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"✅"}),(0,a.jsx)("p",{className:"text-blue-600 text-sm",children:"Status: Telah Disubmit"})]})]})]}):c&&u?(0,a.jsx)("div",{className:"max-w-2xl mx-auto px-4 text-gray-900",children:(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-full w-20 h-20 sm:w-24 sm:h-24 flex items-center justify-center mx-auto animate-pulse",children:(0,a.jsx)(h.A,{className:"text-white",size:40})}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 text-2xl animate-bounce",children:"\uD83C\uDFAF"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Post-Test Selesai! \uD83C\uDF89"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-1 text-2xl",children:[(0,a.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0s"},children:"⭐"}),(0,a.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0.1s"},children:"✨"}),(0,a.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0.2s"},children:"⭐"})]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200 shadow-lg",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCCA"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:"Skor Anda"}),(0,a.jsxs)("p",{className:"text-4xl font-extrabold text-blue-600",children:[(null==(t=u.result)?void 0:t.score)||0,"%"]})]}),(0,a.jsx)("span",{className:"text-3xl",children:"\uD83C\uDFAF"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"✅"}),(0,a.jsx)("p",{className:"text-blue-600 font-medium",children:"Status: Telah Disubmit"})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCA1"}),(0,a.jsx)("p",{className:"text-green-700 text-sm sm:text-base",children:"Sekarang mari bantu kami meningkatkan kualitas pembelajaran dengan mengisi survei singkat"})]})}),(0,a.jsxs)("button",{onClick:()=>{m(!1),d(!0)},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 font-semibold transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCDD"}),(0,a.jsx)("span",{children:"Lanjut ke Survei"}),(0,a.jsx)("span",{children:"\uD83D\uDE80"})]})]})}):o&&u?(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 text-gray-900",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 animate-pulse",children:(0,a.jsx)(D.A,{className:"text-white",size:32})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 text-lg animate-spin",children:"\uD83D\uDCAB"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Survei Pengalaman Belajar \uD83D\uDCDD"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2 text-lg",children:[(0,a.jsx)("span",{children:"\uD83D\uDCAD"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Bantu kami meningkatkan kualitas pembelajaran"}),(0,a.jsx)("span",{children:"\uD83D\uDE80"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8 border border-purple-100",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDE0A"}),(0,a.jsx)("h4",{className:"font-semibold text-purple-800",children:"Kepuasan Pembelajaran"})]}),v(g.satisfaction,e=>p(s=>({...s,satisfaction:e})),"Seberapa puas Anda dengan materi pembelajaran ini?")]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83E\uDDE0"}),(0,a.jsx)("h4",{className:"font-semibold text-blue-800",children:"Tingkat Kesulitan"})]}),v(g.difficulty,e=>p(s=>({...s,difficulty:e})),"Seberapa mudah materi ini dipahami? (1=Sangat Sulit, 5=Sangat Mudah)")]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCA1"}),(0,a.jsx)("h4",{className:"font-semibold text-green-800",children:"Kegunaan Materi"})]}),v(g.usefulness,e=>p(s=>({...s,usefulness:e})),"Seberapa berguna materi ini untuk Anda?")]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-4 border border-orange-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCAC"}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-orange-800",children:["Saran atau masukan tambahan ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]})]}),(0,a.jsx)("textarea",{value:g.feedback,onChange:e=>p(s=>({...s,feedback:e.target.value})),className:"w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white",rows:4,placeholder:"\uD83D\uDCAD Bagikan pengalaman belajar Anda... Apa yang paling berkesan? Apa yang bisa diperbaiki?",required:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-orange-600",children:"\uD83D\uDCDD Masukan Anda sangat berharga untuk kami"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[g.feedback.length,"/500"]})]})]})]}),(0,a.jsxs)("button",{onClick:y,disabled:0===g.satisfaction||0===g.difficulty||0===g.usefulness||!g.feedback.trim(),className:"w-full mt-6 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDE80"}),(0,a.jsx)("span",{children:"Kirim Survei"}),(0,a.jsx)("span",{children:"✨"})]})]})]}):(0,a.jsx)("div",{className:"posttest-with-survey",children:(0,a.jsx)(st,{courseId:n,quizType:"posttest",onComplete:e=>{console.log("Post-test completed:",e),x(e),m(!0)},onBack:i})})},sd=e=>{let{courseId:s,onSubmit:t,stageAccess:l}=e,{currentUser:i,isEnrolledInCourse:o,enrollInCourse:d}=(0,n.A)(),[c,u]=(0,r.useState)("not_submitted"),[x,p]=(0,r.useState)(null),[b,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(null),[k,w]=(0,r.useState)(""),[S,A]=(0,r.useState)(null),[C,D]=(0,r.useState)(!1),[P,z]=(0,r.useState)("saved"),[I,E]=(0,r.useState)(null),[M,U]=(0,r.useState)(null),[F,R]=(0,r.useState)(!1),[L,q]=(0,r.useState)(null),[O,_]=(0,r.useState)([]),[B,J]=(0,r.useState)(!1),W=(0,r.useCallback)(()=>{try{let e="course_instructions_".concat(s),t=localStorage.getItem(e);if(t){let e=JSON.parse(t);U(e.postwork)}else U({title:"Post Work Assignment",description:"Silakan kerjakan tugas post work berikut untuk mempraktikkan materi yang telah dipelajari.",requirements:["Menyelesaikan semua materi pembelajaran","Memahami konsep dasar yang telah diajarkan"],deliverables:["Dokumen laporan hasil praktik","Screenshot atau bukti implementasi"],timeline:"7 hari setelah menyelesaikan materi",resources:["Materi pembelajaran yang telah dipelajari","Template dokumen (jika tersedia)"]})}catch(e){console.error("Error loading instructions:",e),U({title:"Post Work Assignment",description:"Silakan kerjakan tugas post work berikut untuk mempraktikkan materi yang telah dipelajari.",requirements:["Menyelesaikan semua materi pembelajaran"],deliverables:["Dokumen laporan hasil praktik"],timeline:"7 hari setelah menyelesaikan materi",resources:["Materi pembelajaran yang telah dipelajari"]})}},[s]),G=(0,r.useCallback)(async()=>{let e=localStorage.getItem("postWork_".concat(s,"_").concat(null==i?void 0:i.id));if(e){let s=JSON.parse(e);y(s.description||""),u(s.status||"not_submitted"),N(s.submissionDate),w(s.feedback||""),A(s.grade),E(s.lastSaved)}J(!0);try{if(!await o(parseInt(s)))try{await d(parseInt(s))}catch(e){throw console.error("Failed to auto-enroll user:",e),Error("User not enrolled in course")}let e=await j.hJ.getPostWorkSubmissions(parseInt(s));if(e.success&&e.data&&e.data.length>0){_(e.data);let s=e.data[0];u("submitted"),y(s.content||""),N(new Date(s.submittedAt).toLocaleDateString("id-ID")),s.feedback&&(w(s.feedback),u("reviewed")),s.score&&A(s.score),s.fileId&&q(s.fileId)}}catch(e){console.error("Failed to load existing submissions:",e)}finally{J(!1)}},[s,null==i?void 0:i.id]);(0,r.useEffect)(()=>{i&&s&&(G(),W())},[G,W,i,s]);let K=(0,r.useCallback)(()=>{if(!i)return;z("saving");let e={description:b,status:c,submissionDate:v,feedback:k,grade:S,lastSaved:new Date().toISOString()};try{localStorage.setItem("postWork_".concat(s,"_").concat(i.id),JSON.stringify(e)),z("saved"),E(new Date().toISOString())}catch(e){z("error")}},[i,s,b,c,v,k,S]);(0,r.useEffect)(()=>{let e=setTimeout(()=>{(b||x)&&K()},2e3);return()=>clearTimeout(e)},[b,x,K]);let Q=async e=>{let s=e.target.files[0];if(s){p(s),R(!0);try{let e=await j.hJ.uploadFile(s);q(e.data.id),alert("File berhasil diupload!")}catch(e){console.error("Upload error:",e),alert("Upload gagal: "+e.message),p(null)}finally{R(!1)}}},H=async e=>{if(e){p(e),R(!0),z("saving");try{let s=await j.hJ.uploadFile(e);q(s.data.id),z("saved"),E(new Date),alert("File berhasil diupload!")}catch(e){console.error("File upload failed:",e),z("error"),p(null),alert("Upload gagal: "+e.message)}finally{R(!1)}}},Y=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?D(!0):"dragleave"===e.type&&D(!1)},Z=async()=>{if(!L||!b.trim())return void alert("Silakan upload file dan berikan deskripsi tugas.");if(l&&l.finalproject&&!l.finalproject.canAccess)return void alert("Tahap selanjutnya dikunci oleh admin: ".concat(l.finalproject.lockMessage||"Silakan hubungi admin untuk informasi lebih lanjut."));try{z("saving");let e={courseId:parseInt(s),lessonId:null,title:"PostWork Submission",content:b,attachments:JSON.stringify([L])},a=await j.hJ.createPostWorkSubmission(e);a.success&&(u("submitted"),N(new Date().toLocaleDateString("id-ID")),z("saved"),t&&t({fileId:L,description:b,submissionDate:new Date().toISOString(),submissionId:a.data.id}),alert("Tugas berhasil dikumpulkan!"))}catch(e){console.error("Submission failed:",e),z("error"),alert("Gagal mengumpulkan tugas. Silakan coba lagi.")}},$=async()=>{if(!L||!b.trim())return void alert("Silakan upload file dan berikan deskripsi tugas.");if(l&&l.finalproject&&!l.finalproject.canAccess)return void alert("Tahap selanjutnya dikunci oleh admin: ".concat(l.finalproject.lockMessage||"Silakan hubungi admin untuk informasi lebih lanjut."));try{z("saving");let e={courseId:parseInt(s),lessonId:null,title:"PostWork Update",content:b,attachments:JSON.stringify([L])},a=await j.hJ.createPostWorkSubmission(e);a.success&&(N(new Date().toLocaleDateString("id-ID")),z("saved"),t&&t({fileId:L,description:b,submissionDate:new Date().toISOString(),isUpdate:!0,submissionId:a.data.id}),alert("Tugas berhasil diperbarui!"))}catch(e){console.error("Update failed:",e),z("error"),alert("Gagal memperbarui tugas. Silakan coba lagi.")}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 text-gray-900",children:[(0,a.jsx)("style",{children:"\n  .file-upload-section {\n    margin: 20px 0;\n    padding: 20px;\n    border: 2px dashed #ddd;\n    border-radius: 8px;\n    text-align: center;\n  }\n\n  .file-upload-label {\n    display: block;\n    cursor: pointer;\n    color: #666;\n    font-weight: 500;\n  }\n\n  .file-upload-input {\n    display: none;\n  }\n\n  .file-info {\n    margin-top: 10px;\n    padding: 10px;\n    background-color: #f0f8ff;\n    border-radius: 4px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .file-size {\n    color: #888;\n    font-size: 0.9em;\n  }\n\n  .upload-progress {\n    margin-top: 10px;\n    padding: 10px;\n    background-color: #fff3cd;\n    border-radius: 4px;\n    color: #856404;\n  }\n\n  .uploaded-file-info {\n    margin-top: 10px;\n    padding: 15px;\n    background-color: #d4edda;\n    border: 1px solid #c3e6cb;\n    border-radius: 4px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .download-btn {\n    background-color: #007bff;\n    color: white;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.9em;\n    transition: background-color 0.2s;\n  }\n\n  .download-btn:hover {\n    background-color: #0056b3;\n  }\n"}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(V.A,{className:"text-white",size:32})}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Post Work"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Kumpulkan hasil pekerjaan atau tugas kecil Anda di sini"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(()=>{switch(c){case"not_submitted":return(0,a.jsx)(f.A,{className:"text-yellow-500",size:24});case"submitted":return(0,a.jsx)(h.A,{className:"text-green-500",size:24});case"reviewed":return(0,a.jsx)(h.A,{className:"text-blue-500",size:24});default:return(0,a.jsx)(g.A,{className:"text-gray-500",size:24})}})(),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Status Tugas"}),(0,a.jsx)("p",{className:"text-gray-600",children:(()=>{switch(c){case"not_submitted":return"Belum Dikumpulkan";case"submitted":return"Sudah Dikumpulkan - Menunggu Review";case"reviewed":return"Sudah Dinilai";default:return"Status Tidak Diketahui"}})()}),v&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Terakhir diperbarui: ",v]})]})]}),S&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-semibold text-green-800",children:["Nilai: ",S,"/100"]}),k&&(0,a.jsx)("p",{className:"text-green-700 mt-2",children:k})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Upload Tugas"}),(0,a.jsx)("div",{className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 ".concat(C?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-400 hover:bg-gray-50"),onDragEnter:Y,onDragLeave:Y,onDragOver:Y,onDrop:e=>{e.preventDefault(),e.stopPropagation(),D(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&H(e.dataTransfer.files[0])},children:x?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)(T.A,{className:"text-orange-500",size:24}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:x.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(x.size)})]}),(0,a.jsx)("button",{onClick:()=>{p(null)},className:"text-red-500 hover:text-red-700 p-1",children:(0,a.jsx)(m.A,{size:20})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"File siap untuk diunggah"})]}):L?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3 p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)(h.A,{className:"text-green-500",size:24}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"File berhasil diupload"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"File siap untuk dikumpulkan"})]}),(0,a.jsx)("button",{onClick:async()=>{try{let e=await j.hJ.getFile(L);if(e.success){let s=window.URL.createObjectURL(e.data),t=document.createElement("a");t.href=s,t.download=e.filename||"download",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}}catch(e){console.error("Failed to download file:",e)}},className:"text-blue-500 hover:text-blue-700 p-1",children:(0,a.jsx)(eC.A,{size:20})})]}),(0,a.jsxs)("label",{className:"inline-block bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 cursor-pointer transition-colors",children:["Ganti File",(0,a.jsx)("input",{type:"file",className:"hidden",onChange:Q,accept:".pdf,.docx,.doc,.jpg,.jpeg,.png,.gif"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(V.A,{className:"mx-auto text-gray-400",size:48}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drag & drop file di sini atau"}),(0,a.jsxs)("label",{className:"inline-block bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 cursor-pointer transition-colors",children:["Pilih File",(0,a.jsx)("input",{type:"file",className:"hidden",onChange:Q,accept:".pdf,.docx,.doc,.jpg,.jpeg,.png,.gif"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsx)("p",{children:"Format yang didukung: PDF, DOCX, JPG, PNG, GIF"}),(0,a.jsx)("p",{children:"Maksimal ukuran file: 10MB"})]})]})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi Tugas *"}),(0,a.jsx)("textarea",{value:b,onChange:e=>y(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:4,placeholder:"Jelaskan tugas yang Anda kumpulkan, metodologi yang digunakan, atau hal-hal penting lainnya...",required:!0})]}),(0,a.jsx)("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:"not_submitted"===c?(0,a.jsx)("button",{onClick:Z,disabled:!x||!b.trim()||F||!L,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 px-6 rounded-lg hover:from-orange-700 hover:to-red-700 transition-all duration-300 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Mengupload...":"Kumpulkan Tugas"}):(0,a.jsx)("button",{onClick:$,disabled:!x||!b.trim()||F||!L,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Mengupload...":"Perbarui Tugas"})})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(X.A,{className:"".concat("saving"===P?"animate-spin text-blue-500":"saved"===P?"text-green-500":"text-red-500"),size:20}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["saving"===P&&"Menyimpan...","saved"===P&&I&&"Tersimpan otomatis ".concat(new Date(I).toLocaleTimeString("id-ID")),"error"===P&&"Gagal menyimpan"]})]})}),M&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-blue-800 mb-3",children:M.title}),M.description&&(0,a.jsx)("p",{className:"text-blue-700 mb-3 text-sm",children:M.description}),M.timeline&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-blue-100 rounded-lg",children:[(0,a.jsx)("h5",{className:"font-semibold text-blue-800 mb-1",children:"⏰ Timeline:"}),(0,a.jsx)("p",{className:"text-blue-700 text-sm",children:M.timeline})]}),M.requirements&&M.requirements.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCCB Persyaratan:"}),(0,a.jsx)("ul",{className:"text-blue-700 space-y-1 text-sm",children:M.requirements.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]}),M.deliverables&&M.deliverables.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCE6 Deliverables:"}),(0,a.jsx)("ul",{className:"text-blue-700 space-y-1 text-sm",children:M.deliverables.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]}),M.resources&&M.resources.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCDA Resources:"}),(0,a.jsx)("ul",{className:"text-blue-700 space-y-1 text-sm",children:M.resources.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]})]}),O.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCB Riwayat Submission"}),B?(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("span",{className:"text-gray-500",children:"⏳ Memuat riwayat submission..."})}):(0,a.jsx)("div",{className:"space-y-4",children:O.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Submission #",O.length-s]}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:new Date(e.submittedAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.score&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:["Score: ",e.score]})]}),e.content&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Deskripsi:"}),(0,a.jsxs)("p",{className:"text-gray-800 text-sm bg-gray-50 p-2 rounded",children:[e.content.substring(0,200),e.content.length>200&&"..."]})]}),e.fileId&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("button",{onClick:async()=>{try{let s=await j.hJ.getFile(e.fileId);if(s.success){let e=window.URL.createObjectURL(s.data),t=document.createElement("a");t.href=e,t.download=s.filename||"download",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(e),document.body.removeChild(t)}}catch(e){console.error("Failed to download file:",e)}},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 text-sm",children:[(0,a.jsx)(eC.A,{size:16}),(0,a.jsx)("span",{children:"Download File"})]})}),e.feedback&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Feedback:"}),(0,a.jsx)("p",{className:"text-blue-800 text-sm",children:e.feedback})]})]},e.id||s))})]})]})};var sc=t(38164);let sm={project:{extensions:[".pdf",".docx",".doc",".zip",".rar",".7z"],mimeTypes:["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/zip","application/x-rar-compressed","application/x-7z-compressed"],maxSize:0x3200000},image:{extensions:[".jpg",".jpeg",".png",".gif",".webp"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp"],maxSize:0xa00000},document:{extensions:[".pdf",".docx",".doc",".txt"],mimeTypes:["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"],maxSize:0x1900000}},su=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"project",t=sm[s];if(!t)return{isValid:!1,error:"Invalid file type configuration"};if(e.size>t.maxSize)return{isValid:!1,error:"File size exceeds ".concat(sx(t.maxSize)," limit")};let a="."+e.name.split(".").pop().toLowerCase(),r=t.extensions.includes(a),n=t.mimeTypes.includes(e.type);return r||n?{isValid:!0,error:null}:{isValid:!1,error:"File type not supported. Allowed types: ".concat(t.extensions.join(", "))}},sx=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},sg=e=>"application/pdf"===e.type?URL.createObjectURL(e):null,sp=e=>{e&&URL.revokeObjectURL(e)},sh=e=>["application/pdf","image/jpeg","image/png","image/gif","image/webp","text/plain"].includes(e.type);class sb{startUpload(e,s){this.uploads.set(e,{fileName:s,progress:0,status:"uploading",startTime:Date.now()})}updateProgress(e,s){let t=this.uploads.get(e);t&&(t.progress=s,t.status=100===s?"completed":"uploading")}setError(e,s){let t=this.uploads.get(e);t&&(t.status="error",t.error=s)}getUpload(e){return this.uploads.get(e)}removeUpload(e){this.uploads.delete(e)}getAllUploads(){return Array.from(this.uploads.entries()).map(e=>{let[s,t]=e;return{id:s,...t}})}constructor(){this.uploads=new Map}}new sb;let sf=e=>{let{courseId:s,onSubmit:l,stageAccess:i}=e,{currentUser:o}=(0,n.A)(),[c,u]=(0,r.useState)("not_submitted"),[x,p]=(0,r.useState)(null),[b,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(null),[k,w]=(0,r.useState)(""),[S,A]=(0,r.useState)(null),[C,D]=(0,r.useState)("file"),[P,z]=(0,r.useState)(""),[I,E]=(0,r.useState)(!1),[M,U]=(0,r.useState)(!1),[F,R]=(0,r.useState)(null),[L,q]=(0,r.useState)("saved"),[O,_]=(0,r.useState)(null),[B,J]=(0,r.useState)(null),[W,G]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(null),[H,Y]=(0,r.useState)(null),[Z,$]=(0,r.useState)(!1),ee=(0,r.useCallback)(()=>{let e=localStorage.getItem("finalProject_".concat(s,"_").concat(null==o?void 0:o.id));if(e){let s=JSON.parse(e);y(s.description||""),z(s.link||""),D(s.submissionType||"file"),u(s.status||"not_submitted"),N(s.submissionDate),w(s.feedback||""),A(s.grade),_(s.lastSaved)}},[s,null==o?void 0:o.id]),es=(0,r.useCallback)(()=>{try{let e="course_instructions_".concat(s),t=localStorage.getItem(e);if(t){let e=JSON.parse(t);J(e.finalproject)}else J({title:"Final Project",description:"Proyek akhir untuk mendemonstrasikan pemahaman komprehensif terhadap seluruh materi kursus.",requirements:["Menyelesaikan semua tahap pembelajaran","Menyelesaikan post work assignment"],deliverables:["Proyek lengkap sesuai spesifikasi","Dokumentasi proyek","Presentasi atau demo (jika diperlukan)"],timeline:"14 hari setelah menyelesaikan post work",resources:["Seluruh materi kursus","Template proyek (jika tersedia)","Panduan teknis"]})}catch(e){console.error("Error loading instructions:",e),J({title:"Final Project",description:"Proyek akhir untuk mendemonstrasikan pemahaman komprehensif terhadap seluruh materi kursus.",requirements:["Menyelesaikan semua tahap pembelajaran"],deliverables:["Proyek lengkap sesuai spesifikasi"],timeline:"14 hari setelah menyelesaikan post work",resources:["Seluruh materi kursus"]})}},[s]);(0,r.useEffect)(()=>{ee(),es();let e=async()=>{$(!0);try{let e=await j.hJ.getFinalProjectSubmission(parseInt(s));if(e.success&&e.data){let s=e.data;Y(s),u("submitted"),y(s.content||""),N(new Date(s.submittedAt).toLocaleDateString("id-ID")),s.feedback&&(w(s.feedback),u("reviewed")),s.score&&A(s.score),s.fileId&&Q(s.fileId),l&&l({type:s.githubUrl?"link":"file",link:s.githubUrl||s.liveUrl,description:s.content,submissionDate:s.submittedAt,submissionId:s.id,isExisting:!0})}}catch(e){console.error("Failed to load existing submission:",e)}finally{$(!1)}};o&&s&&e()},[ee,es,s,o]);let et=(0,r.useCallback)(()=>{if(!o)return;q("saving");let e={description:b,link:P,submissionType:C,status:c,submissionDate:v,feedback:k,grade:S,lastSaved:new Date().toISOString()};try{localStorage.setItem("finalProject_".concat(s,"_").concat(o.id),JSON.stringify(e)),q("saved"),_(new Date().toISOString())}catch(e){q("error")}},[o,s,b,P,C,c,v,k,S]);(0,r.useEffect)(()=>{let e=setTimeout(()=>{(b||x||P)&&et()},2e3);return()=>clearTimeout(e)},[b,x,P,C,et]);let ea=()=>{let e=localStorage.getItem("courseProgress_".concat(s,"_").concat(null==o?void 0:o.id));return!!e&&!0===JSON.parse(e).completed},er=async()=>{if(!ea())return void alert("Anda harus menyelesaikan semua materi kursus terlebih dahulu untuk mendapatkan sertifikat.");if("reviewed"!==c)return void alert("Proyek akhir harus dinilai terlebih dahulu untuk mendapatkan sertifikat.");try{let{certificateAPI:e}=await Promise.resolve().then(t.bind(t,39360)),a=await e.requestCertificate(parseInt(s));a.success?alert("Selamat! Anda berhasil mengerjakan course 100 persen. Sertifikat menunggu approval admin."):alert("Gagal mengajukan sertifikat: "+(a.message||"Terjadi kesalahan"))}catch(e){console.error("Error requesting certificate:",e),alert("Gagal mengajukan sertifikat. Silakan coba lagi.")}},en=async e=>{let s=e.target.files[0];if(s){let e=[".pdf",".doc",".docx",".txt",".zip",".rar",".jpg",".jpeg",".png"];if(!e.includes("."+s.name.split(".").pop().toLowerCase()))return void alert("File type not supported. Please upload: "+e.join(", "));if(s.size>0xa00000)return void alert("File size exceeds 10MB limit");p(s),G(!0);try{let e=await j.hJ.uploadFile(s);e.success?(Q(e.data.id),p(null),alert("File project berhasil diupload!")):alert("Upload gagal: "+e.error)}catch(e){console.error("Upload error:",e),alert("Upload gagal: "+e.message)}finally{G(!1)}}},el=async e=>{let s=su(e,"project");if(!s.isValid)return void alert(s.error);p(e),G(!0),q("saving");try{let s=await j.hJ.uploadFile(e);s.success&&(Q(s.data.id),q("saved"),_(new Date().toISOString()))}catch(e){console.error("File upload failed:",e),q("error"),p(null)}finally{G(!1)}sh(e)&&"application/pdf"===e.type&&R(sg(e))},ei=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?E(!0):"dragleave"===e.type&&E(!1)},[]),eo=(0,r.useCallback)(async e=>{E(!1);let s=e.dataTransfer.files;s.length>0&&await el(s[0])},[]),ed=async()=>{if("file"===C?b.trim()&&K:P.trim()&&b.trim()){if(i&&i.finalproject&&!i.finalproject.canAccess)return void alert("Tahap ini dikunci oleh admin: ".concat(i.finalproject.lockMessage||"Silakan hubungi admin untuk informasi lebih lanjut."));try{q("saving");let e={courseId:parseInt(s),title:"Final Project Submission",description:b,content:b,attachments:"file"===C?JSON.stringify([K]):null,githubUrl:"link"===C?P:null,liveUrl:"link"===C?P:null},t=await j.hJ.createFinalProjectSubmission(e);t.success&&(u("submitted"),N(new Date().toLocaleDateString("id-ID")),q("saved"),l&&l({type:C,file:x,link:P,description:b,submissionDate:new Date().toISOString(),submissionId:t.data.id}),alert("Proyek akhir berhasil dikumpulkan!"))}catch(e){console.error("Submission failed:",e),q("error"),alert("Gagal mengumpulkan proyek akhir. Silakan coba lagi.")}}else alert("file"===C?"Silakan upload file dan berikan deskripsi proyek.":"Silakan masukkan link dan berikan deskripsi proyek.")},ec=async()=>{if("file"===C?b.trim()&&K:P.trim()&&b.trim()){if(i&&i.finalproject&&!i.finalproject.canAccess)return void alert("Tahap ini dikunci oleh admin: ".concat(i.finalproject.lockMessage||"Silakan hubungi admin untuk informasi lebih lanjut."));try{q("saving");let e={courseId:parseInt(s),title:"Final Project Update",description:b,content:b,attachments:"file"===C?JSON.stringify([K]):null,githubUrl:"link"===C?P:null,liveUrl:"link"===C?P:null},t=await j.hJ.createFinalProjectSubmission(e);t.success&&(N(new Date().toLocaleDateString("id-ID")),q("saved"),l&&l({type:C,file:x,link:P,description:b,submissionDate:new Date().toISOString(),isUpdate:!0,submissionId:t.data.id}),alert("Proyek akhir berhasil diperbarui!"))}catch(e){console.error("Update failed:",e),q("error"),alert("Gagal memperbarui proyek akhir. Silakan coba lagi.")}}else alert("file"===C?"Silakan upload file dan berikan deskripsi proyek.":"Silakan masukkan link dan berikan deskripsi proyek.")},em=()=>{switch(c){case"not_submitted":return(0,a.jsx)(f.A,{className:"text-yellow-500",size:24});case"submitted":return(0,a.jsx)(h.A,{className:"text-green-500",size:24});case"reviewed":return(0,a.jsx)(h.A,{className:"text-blue-500",size:24});default:return(0,a.jsx)(g.A,{className:"text-gray-500",size:24})}},eu=()=>{switch(c){case"not_submitted":return"Belum Dikumpulkan";case"submitted":return"Sudah Dikumpulkan - Menunggu Review";case"reviewed":return"Sudah Dinilai";default:return"Status Tidak Diketahui"}};return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-gray-900",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Final Project"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Submit your final project for evaluation"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Project Status"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[em(),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:eu()})]})]}),S&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-semibold text-green-800",children:["Nilai: ",S,"/100"]}),k&&(0,a.jsx)("p",{className:"text-green-700 mt-2",children:k})]})]}),"not_submitted"!==c&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Submission History"}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:x?x.name:"Project Submission"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Submitted on ",v]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[em(),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:eu()})]})]})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Jenis Pengumpulan"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>D("file"),className:"p-4 rounded-lg border-2 transition-all ".concat("file"===C?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300 text-gray-600"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(T.A,{size:24}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Upload File"}),(0,a.jsx)("p",{className:"text-sm",children:"Upload file proyek (PDF, DOCX, ZIP)"})]})]})}),(0,a.jsx)("button",{onClick:()=>D("link"),className:"p-4 rounded-lg border-2 transition-all ".concat("link"===C?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300 text-gray-600"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(e2.A,{size:24}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Link Eksternal"}),(0,a.jsx)("p",{className:"text-sm",children:"GitHub, Google Drive, dll."})]})]})})]}),"file"===C&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 ".concat(I?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-indigo-400 hover:bg-gray-50"),onDragEnter:ei,onDragLeave:ei,onDragOver:ei,onDrop:eo,children:x?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(T.A,{className:"text-indigo-500",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:x.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:sx(x.size)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["application/pdf"===x.type&&(0,a.jsxs)("button",{onClick:()=>{F&&U(!0)},className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:[(0,a.jsx)(d.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"Preview"})]}),(0,a.jsx)("button",{onClick:()=>{F&&(sp(F),R(null)),p(null)},className:"text-red-500 hover:text-red-700 p-1",children:(0,a.jsx)(m.A,{size:20})})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"File siap untuk diunggah"})]}):K?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(h.A,{className:"text-green-500",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"File project berhasil diupload"}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"File siap untuk dikumpulkan"})]})]}),(0,a.jsxs)("button",{type:"button",onClick:async()=>{try{let e=await j.hJ.getFile(K);if(e.success){let s=window.URL.createObjectURL(e.data),t=document.createElement("a");t.href=s,t.download=e.filename||"download",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}}catch(e){console.error("Failed to download file:",e)}},className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:[(0,a.jsx)(eC.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"Download"})]})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(V.A,{className:"mx-auto text-gray-400",size:48}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drag & drop file di sini atau"}),(0,a.jsxs)("label",{className:"inline-block bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 cursor-pointer transition-colors",children:["Pilih File",(0,a.jsx)("input",{type:"file",className:"hidden",onChange:en,accept:".pdf,.docx,.doc,.zip"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsx)("p",{children:"Format yang didukung: PDF, DOCX, ZIP"}),(0,a.jsx)("p",{children:"Maksimal ukuran file: 50MB"})]})]})})}),"link"===C&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Proyek *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(sc.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"url",value:P,onChange:e=>z(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"https://github.com/username/project atau https://drive.google.com/...",required:!0})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pastikan link dapat diakses oleh instruktur"})]})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi Proyek *"}),(0,a.jsx)("textarea",{value:b,onChange:e=>y(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:5,placeholder:"Jelaskan proyek Anda, teknologi yang digunakan, fitur utama, dan hal-hal penting lainnya...",required:!0})]}),(0,a.jsx)("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:"not_submitted"===c?(0,a.jsx)("button",{onClick:ed,disabled:"file"===C?!b.trim()||W||!K:!P.trim()||!b.trim(),className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Kumpulkan Proyek Akhir"}):(0,a.jsx)("button",{onClick:ec,disabled:"file"===C?!b.trim()||W||!K:!P.trim()||!b.trim(),className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Perbarui Proyek Akhir"})})]}),B&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-blue-800 mb-4",children:B.title}),(0,a.jsx)("p",{className:"text-blue-700 mb-4",children:B.description}),B.requirements&&B.requirements.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Requirements:"}),(0,a.jsx)("div",{className:"space-y-2 text-gray-700",children:B.requirements.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{children:e})]},s))})]}),B.deliverables&&B.deliverables.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Deliverables:"}),(0,a.jsx)("div",{className:"space-y-2 text-gray-700",children:B.deliverables.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{children:e})]},s))})]}),B.timeline&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-yellow-100 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Timeline:"}),(0,a.jsx)("p",{className:"text-yellow-700 text-sm",children:B.timeline})]}),B.resources&&B.resources.length>0&&(0,a.jsxs)("div",{className:"p-4 bg-blue-100 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Resources:"}),(0,a.jsx)("div",{className:"space-y-1 text-blue-700 text-sm",children:B.resources.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("p",{children:e})]},s))})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(X.A,{className:"".concat("saving"===L?"animate-spin text-blue-500":"saved"===L?"text-green-500":"text-red-500"),size:20}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["saving"===L&&"Menyimpan...","saved"===L&&O&&"Tersimpan otomatis ".concat(new Date(O).toLocaleTimeString("id-ID")),"error"===L&&"Gagal menyimpan"]})]}),"reviewed"===c&&(0,a.jsxs)("button",{onClick:er,className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-2 rounded-lg hover:from-yellow-600 hover:to-orange-600 transition-all duration-300 font-semibold flex items-center space-x-2",children:[(0,a.jsx)(h.A,{size:20}),(0,a.jsx)("span",{children:"Dapatkan Sertifikat"})]})]})})]})]}),H&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCB Submission Final Project"}),Z?(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("span",{className:"text-gray-500",children:"⏳ Memuat submission..."})}):(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Final Project Submission"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:new Date(H.submittedAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),H.score&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:["Score: ",H.score]})]}),H.content&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Deskripsi Project:"}),(0,a.jsxs)("p",{className:"text-gray-800 text-sm bg-gray-50 p-2 rounded",children:[H.content.substring(0,300),H.content.length>300&&"..."]})]}),H.fileId&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("button",{onClick:async()=>{try{let e=await j.hJ.getFile(H.fileId);if(e.success){let s=window.URL.createObjectURL(e.data),t=document.createElement("a");t.href=s,t.download=e.filename||"download",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}}catch(e){console.error("Failed to download file:",e)}},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 text-sm",children:[(0,a.jsx)(eC.A,{size:16}),(0,a.jsx)("span",{children:"Download Project File"})]})}),H.feedback&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Feedback:"}),(0,a.jsx)("p",{className:"text-blue-800 text-sm",children:H.feedback})]})]})]}),M&&F&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-4xl h-full max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"PDF Preview"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("a",{href:F,download:null==x?void 0:x.name,className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:[(0,a.jsx)(eC.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"Download"})]}),(0,a.jsx)("button",{onClick:()=>{U(!1)},className:"text-gray-500 hover:text-gray-700 p-1",children:(0,a.jsx)(m.A,{size:20})})]})]}),(0,a.jsx)("div",{className:"flex-1 p-4",children:(0,a.jsx)("iframe",{src:F,className:"w-full h-full border rounded-lg",title:"PDF Preview"})})]})})]})};var sj=t(55595);let sy=e=>{let{courseId:s,courseName:r,onClose:l}=e,{currentUser:i,getUserProgress:o}=(0,n.A)(),d=o(s);console.log("Certificate component - userProgress:",d,"courseId:",s);let{certificates:c,isEligible:m,getCertificateForCourse:u,generateCertificate:x,isGenerating:g}=eY(s,d),p=u(s),b=async()=>{try{await x(),alert("Sertifikat berhasil dibuat!")}catch(e){console.error("Error generating certificate:",e),e.message.includes("already exists")?alert("Sertifikat untuk kursus ini sudah ada."):alert("Gagal membuat sertifikat. Silakan coba lagi.")}},f=async()=>{try{let e=(await Promise.all([t.e(930),t.e(628),t.e(316),t.e(260)]).then(t.t.bind(t,64227,23))).default,s='\n        <div style="\n          font-family: \'Georgia\', serif;\n          background: white;\n          padding: 60px;\n          text-align: center;\n          max-width: 800px;\n          margin: 0 auto;\n          border: 8px solid #f8f9fa;\n          position: relative;\n        ">\n          <div style="\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            right: 20px;\n            bottom: 20px;\n            border: 3px solid #667eea;\n            border-radius: 10px;\n          "></div>\n          <div style="color: #667eea; margin-bottom: 30px; position: relative; z-index: 1;">\n            <h1 style="font-size: 32px; margin: 0;">\uD83C\uDFC6 SERTIFIKAT PENYELESAIAN \uD83C\uDFC6</h1>\n          </div>\n          <div style="font-size: 36px; font-weight: bold; margin: 20px 0; color: #2d3748; position: relative; z-index: 1;">CERTIFICATE OF COMPLETION</div>\n          <div style="font-size: 18px; margin: 20px 0; color: #4a5568; position: relative; z-index: 1;">Dengan ini menyatakan bahwa</div>\n          <div style="font-size: 28px; font-weight: bold; color: #667eea; margin: 30px 0; text-decoration: underline; position: relative; z-index: 1;">'.concat(p.userName,'</div>\n          <div style="font-size: 18px; margin: 20px 0; color: #4a5568; position: relative; z-index: 1;">telah berhasil menyelesaikan kursus</div>\n          <div style="font-size: 22px; font-weight: bold; color: #2d3748; margin: 20px 0; position: relative; z-index: 1;">').concat(r,'</div>\n          <div style="margin: 30px 0; color: #718096; position: relative; z-index: 1;">\n            <p><strong>Nomor Sertifikat:</strong> ').concat(p.certificateNumber,"</p>\n            <p><strong>Tanggal Penyelesaian:</strong> ").concat(new Date(p.completionDate).toLocaleDateString("id-ID"),"</p>\n            <p><strong>Grade:</strong> ").concat(p.grade||"A",'</p>\n          </div>\n          <div style="margin-top: 50px; display: flex; justify-content: space-between; position: relative; z-index: 1;">\n            <div style="border-top: 2px solid #e2e8f0; width: 200px; padding-top: 10px;">\n              <div>Direktur Akademik</div>\n            </div>\n            <div style="border-top: 2px solid #e2e8f0; width: 200px; padding-top: 10px;">\n              <div>Instruktur Kursus</div>\n            </div>\n          </div>\n        </div>\n      '),a=document.createElement("div");a.innerHTML=s,a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a);let n={margin:1,filename:"Sertifikat-".concat(r.replace(/\s+/g,"-"),"-").concat(p.userName.replace(/\s+/g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"landscape"}};await e().set(n).from(a).save(),document.body.removeChild(a)}catch(e){console.error("Error generating PDF:",e),alert("Gagal membuat PDF. Silakan coba lagi.")}};return p?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full overflow-hidden shadow-2xl",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 text-white p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(eP.A,{size:32}),(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Sertifikat Penyelesaian"}),(0,a.jsx)(eP.A,{size:32})]})}),(0,a.jsx)("div",{className:"p-8",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 p-8 rounded-xl border-4 border-yellow-300 relative",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 text-yellow-500",children:(0,a.jsx)(ev.A,{size:24})}),(0,a.jsx)("div",{className:"absolute top-4 right-4 text-yellow-500",children:(0,a.jsx)(ev.A,{size:24})}),(0,a.jsx)("div",{className:"absolute bottom-4 left-4 text-yellow-500",children:(0,a.jsx)(ev.A,{size:24})}),(0,a.jsx)("div",{className:"absolute bottom-4 right-4 text-yellow-500",children:(0,a.jsx)(ev.A,{size:24})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(z.A,{className:"mx-auto text-yellow-500 mb-4",size:48}),(0,a.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mb-2",children:"SERTIFIKAT PENYELESAIAN"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Certificate of Completion"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-lg text-gray-700 mb-2",children:"Dengan ini menyatakan bahwa"}),(0,a.jsx)("h4",{className:"text-2xl font-bold text-blue-600 mb-2",children:p.userName}),(0,a.jsx)("p",{className:"text-lg text-gray-700 mb-2",children:"telah berhasil menyelesaikan kursus"}),(0,a.jsx)("h5",{className:"text-xl font-bold text-gray-800",children:r})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(h.A,{className:"text-green-500",size:16}),(0,a.jsx)("span",{className:"font-semibold",children:"Nomor Sertifikat"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:p.certificateNumber})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eS.A,{className:"text-blue-500",size:16}),(0,a.jsx)("span",{className:"font-semibold",children:"Tanggal Penyelesaian"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:new Date(p.completionDate).toLocaleDateString("id-ID")})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("button",{onClick:l,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Tutup"}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob(["\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Sertifikat - ".concat(r,'</title>\n        <style>\n          body { \n            font-family: \'Georgia\', serif; \n            margin: 0; \n            padding: 40px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n          .certificate {\n            background: white;\n            padding: 60px;\n            border-radius: 20px;\n            box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n            text-align: center;\n            max-width: 800px;\n            border: 8px solid #f8f9fa;\n            position: relative;\n          }\n          .certificate::before {\n            content: \'\';\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            right: 20px;\n            bottom: 20px;\n            border: 3px solid #667eea;\n            border-radius: 10px;\n          }\n          .header { color: #667eea; margin-bottom: 30px; }\n          .title { font-size: 48px; font-weight: bold; margin: 20px 0; color: #2d3748; }\n          .subtitle { font-size: 24px; margin: 20px 0; color: #4a5568; }\n          .name { font-size: 36px; font-weight: bold; color: #667eea; margin: 30px 0; text-decoration: underline; }\n          .course { font-size: 28px; font-weight: bold; color: #2d3748; margin: 20px 0; }\n          .details { margin: 30px 0; color: #718096; }\n          .signature { margin-top: 50px; display: flex; justify-content: space-between; }\n          .sig-line { border-top: 2px solid #e2e8f0; width: 200px; padding-top: 10px; }\n        </style>\n      </head>\n      <body>\n        <div class="certificate">\n          <div class="header">\n            <h1>\uD83C\uDFC6 SERTIFIKAT PENYELESAIAN \uD83C\uDFC6</h1>\n          </div>\n          <div class="title">CERTIFICATE OF COMPLETION</div>\n          <div class="subtitle">Dengan ini menyatakan bahwa</div>\n          <div class="name">').concat(p.userName,'</div>\n          <div class="subtitle">telah berhasil menyelesaikan kursus</div>\n          <div class="course">').concat(r,'</div>\n          <div class="details">\n            <p><strong>Nomor Sertifikat:</strong> ').concat(p.certificateNumber,"</p>\n            <p><strong>Tanggal Penyelesaian:</strong> ").concat(new Date(p.completionDate).toLocaleDateString("id-ID"),"</p>\n            <p><strong>Grade:</strong> ").concat(p.grade,'</p>\n          </div>\n          <div class="signature">\n            <div class="sig-line">\n              <div>Direktur Akademik</div>\n            </div>\n            <div class="sig-line">\n              <div>Instruktur Kursus</div>\n            </div>\n          </div>\n        </div>\n      </body>\n      </html>\n    ')],{type:"text/html"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="Sertifikat-".concat(r.replace(/\s+/g,"-"),"-").concat(p.userName.replace(/\s+/g,"-"),".html"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center gap-2",children:[(0,a.jsx)(T.A,{size:20}),"Download HTML"]}),(0,a.jsxs)("button",{onClick:f,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:from-red-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2",children:[(0,a.jsx)(eC.A,{size:20}),"Download PDF"]})]})]})]})})]})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full p-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(eP.A,{className:"mx-auto text-yellow-500 mb-4",size:64}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:m?"Dapatkan Sertifikat Anda!":"Sertifikat Belum Tersedia"}),(0,a.jsx)("p",{className:"text-gray-600",children:m?"Selamat! Anda telah menyelesaikan kursus ".concat(r):"Selesaikan kursus ".concat(r," untuk mendapatkan sertifikat. Progress saat ini: ").concat(d||0,"%")})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-4",children:[(0,a.jsx)(sj.A,{className:"text-gold-500",size:32}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Sertifikat Resmi"}),(0,a.jsx)(sj.A,{className:"text-gold-500",size:32})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Sertifikat ini akan mencantumkan nama Anda, nama kursus, tanggal penyelesaian, dan nomor sertifikat unik yang dapat diverifikasi."})]}),(0,a.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,a.jsx)("button",{onClick:l,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Nanti Saja"}),(0,a.jsx)("button",{onClick:b,disabled:g||!m,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center gap-2 disabled:opacity-50",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Membuat Sertifikat..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.A,{size:20}),"Buat Sertifikat"]})})]})]})})};var sv=t(9428);let sN=e=>{let{currentStep:s,completedSteps:t,onStepClick:r,isCourseCompleted:n=!1,backendProgress:l=null,stageAccess:o={},courseConfig:d={}}=e,c=(e,s)=>{if("locked"===s||"admin-locked"===s)return void alert("admin-locked"===s?"Stage ini telah dikunci oleh admin. Silakan hubungi admin untuk membuka akses.":"Stage ini masih terkunci. Selesaikan stage sebelumnya terlebih dahulu.");r&&("available"===s||"current"===s||"completed"===s)&&r(e)},m=[{id:"intro",title:"Materi Pengantar",description:"Pelajari konsep dasar",icon:S.A,color:"blue"},{id:"pretest",title:"Pre-Test",description:"Tes pemahaman awal",icon:T.A,color:"purple"},{id:"lessons",title:"Materi Inti",description:"Pembelajaran utama",icon:S.A,color:"green"},{id:"posttest",title:"Post-Test & Survei",description:"Evaluasi & feedback",icon:z.A,color:"orange"},{id:"postwork",title:"Post Work",description:"Tugas praktik lanjutan",icon:V.A,color:"orange"},{id:"finalproject",title:"Final Project",description:"Proyek akhir komprehensif",icon:eU.A,color:"red"}].filter(e=>"postwork"===e.id?!0===d.hasPostWork:"finalproject"!==e.id||!0===d.hasFinalProject),u=(e,a)=>{let r=o[e];if(r&&!r.canAccess)return"admin-locked";let l=m.every(e=>t.includes(e.id)),i=m.findIndex(e=>e.id===s);return t.includes(e)?"completed":e===s?"current":l||n?"available":0===a||t.includes(m[a-1].id)||a<=i?"available":"locked"},x=(e,s)=>{let t=e.icon;return"completed"===s?(0,a.jsx)(h.A,{className:"text-green-500",size:24}):"locked"===s||"admin-locked"===s?(0,a.jsx)(i.A,{className:"admin-locked"===s?"text-red-500":"text-gray-400",size:24}):(0,a.jsx)(t,{className:"text-".concat(e.color,"-500"),size:24})},g=(e,s)=>{let t="relative flex items-center p-4 rounded-xl transition-all duration-300 cursor-pointer";switch(e){case"completed":return"".concat(t," bg-green-50 border-2 border-green-200 hover:bg-green-100");case"current":return"".concat(t," bg-").concat(s,"-50 border-2 border-").concat(s,"-500 shadow-lg ring-2 ring-").concat(s,"-200");case"available":return"".concat(t," bg-gray-50 border-2 border-gray-200 hover:bg-gray-100 hover:border-").concat(s,"-300");case"admin-locked":return"".concat(t," bg-red-50 border-2 border-red-200 opacity-70 cursor-not-allowed");case"locked":return"".concat(t," bg-gray-50 border-2 border-gray-200 opacity-60 cursor-not-allowed");default:return t}},p=()=>null!==l?l:Math.round(t.length/m.length*100);return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Progress Pembelajaran"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-gray-600",children:n?"Kursus telah selesai! Anda dapat mengakses semua materi untuk review":"Ikuti setiap tahap untuk menyelesaikan kursus"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(n?"text-green-600":"text-blue-600"),children:[p(),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Selesai"})]})]}),(0,a.jsx)("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(p(),"%")}})})]}),(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)("div",{className:"grid gap-4 ".concat(m.length<=3?"grid-cols-3":m.length<=4?"grid-cols-2":(m.length,"grid-cols-3")),children:m.map((e,s)=>{let t=u(e.id,s);return(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:g(t,e.color),onClick:()=>c(e.id,t),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:x(e,t)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:e.title})}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat("completed"===t?"bg-green-500 text-white":"current"===t?"bg-".concat(e.color,"-500 text-white"):"available"===t?"bg-gray-400 text-white":"bg-gray-300 text-gray-500"),children:s+1})]})},e.id)})})}),(0,a.jsx)("div",{className:"lg:hidden space-y-4",children:m.map((e,s)=>{let r=u(e.id,s);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:g(r,e.color),onClick:()=>c(e.id,r),children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 w-full",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:x(e,r)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.title})}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat("completed"===r?"bg-green-500 text-white":"current"===r?"bg-".concat(e.color,"-500 text-white"):"available"===r?"bg-gray-400 text-white":"bg-gray-300 text-gray-500"),children:s+1})]})}),s<m.length-1&&(0,a.jsx)("div",{className:"flex justify-center py-2",children:(0,a.jsx)("div",{className:"w-1 h-8 ".concat(t.includes(e.id)?"bg-green-400":"bg-gray-300"," rounded-full")})})]},e.id)})}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"text-green-500",size:16}),(0,a.jsx)("span",{className:"text-gray-600",children:"Selesai"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(sv.A,{className:"text-blue-500",size:16}),(0,a.jsx)("span",{className:"text-gray-600",children:"Sedang Aktif"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(sv.A,{className:"text-gray-400",size:16}),(0,a.jsx)("span",{className:"text-gray-600",children:"Tersedia"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.A,{className:"text-gray-400",size:16}),(0,a.jsx)("span",{className:"text-gray-600",children:"Terkunci"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.A,{className:"text-red-500",size:16}),(0,a.jsx)("span",{className:"text-gray-600",children:"Dikunci Admin"})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:(0,a.jsxs)("p",{children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Catatan:"})," Setiap langkah memiliki bobot yang sama dalam menentukan progres pembelajaran Anda."]})})]})]})},sk=e=>{var s;let{currentLesson:t,onBack:l,preTestState:i,postTestState:o,onRetakeQuiz:d,onMarkComplete:c}=e,{getCourseById:m,currentUser:u,getUserProgress:x,getUserProgressSync:g,refreshUserProgress:p}=(0,n.A)(),[h,b]=(0,r.useState)(!1),[f,y]=(0,r.useState)(0),[v,N]=(0,r.useState)(t),[k,w]=(0,r.useState)(!1),[S,A]=(0,r.useState)({}),[C,D]=(0,r.useState)(!1),[P,z]=(0,r.useState)(null),[T,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(null==t?void 0:t.id){w(!0);try{let e=await m(t.id);e&&(e.id||e.title)?N(e):(console.error("Course data incomplete from backend:",e),N(t))}catch(e){console.error("Failed to load course from backend:",e),N(null)}finally{w(!1)}}})()},[null==t?void 0:t.id,m]),(0,r.useEffect)(()=>{(async()=>{if((null==v?void 0:v.id)&&u){I(!0);try{let e=await fetch("".concat("https://8080-firebase-agileku-1751862903205.cluster-ejd22kqny5htuv5dfowoyipt52.cloudworkstations.dev","/api/protected/admin/courses/").concat(v.id,"/config"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken")),"Content-Type":"application/json"}});if(e.ok){let s=await e.json();z({hasPostWork:s.hasPostWork||!1,hasFinalProject:s.hasFinalProject||!1,certificateDelay:s.certificateDelay||0,stepWeights:s.stepWeights||{}})}else console.warn("Failed to load course config, using defaults"),z({hasPostWork:!1,hasFinalProject:!1,certificateDelay:0,stepWeights:{}})}catch(e){console.error("Error loading course config:",e),z({hasPostWork:!1,hasFinalProject:!1,certificateDelay:0,stepWeights:{}})}finally{I(!1)}}})()},[null==v?void 0:v.id,u]),(0,r.useEffect)(()=>{(async()=>{if(!(null==v?void 0:v.id)||!u)return;D(!0);let e={};try{for(let s of["intro","pretest","lessons","posttest","postwork","finalproject"])try{let t=await j.GS.checkStageAccess(v.id,s),a=t.data||t;e[s]={canAccess:a.canAccess,lockMessage:a.lockMessage||"Tahap ini masih dikunci oleh admin."}}catch(t){console.warn("Failed to check access for stage ".concat(s,":"),t),e[s]={canAccess:!0,lockMessage:null}}A(e)}catch(e){console.error("Error checking stage access:",e)}finally{D(!1)}})()},[null==v?void 0:v.id,u]);let{progress:E,isLoading:M,setCurrentStep:U,markStepCompleted:F,updateLessonProgress:R,saveQuizScore:L,saveSubmission:q,markCourseCompleted:O,getCompletionPercentage:_,isCourseCompleted:B}=eX(null==v?void 0:v.id),J=g(null==v?void 0:v.id)||0,{certificates:W,isEligible:K,isGenerating:V,generateCertificate:Q,getCertificateForCourse:H}=eY(null==v?void 0:v.id,J);if((0,r.useEffect)(()=>{E.currentStep&&"intro"!==E.currentStep&&!M&&console.log("Resuming to step:",E.currentStep)},[E.currentStep,M]),(0,r.useEffect)(()=>{var e;(null==(e=E.lessonProgress)?void 0:e.currentLessonIndex)!==void 0&&y(E.lessonProgress.currentLessonIndex)},[null==(s=E.lessonProgress)?void 0:s.currentLessonIndex]),!v||k||M||T)return(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:v?k?"Loading course details...":T?"Loading course configuration...":"Loading progress...":"Loading course..."})]})});let X=async e=>{F(e);try{await p()}catch(e){console.warn("Failed to refresh user progress:",e)}let s=(()=>{let e=["intro","pretest","lessons","posttest"];return(null==P?void 0:P.hasPostWork)&&e.push("postwork"),(null==P?void 0:P.hasFinalProject)&&e.push("finalproject"),e})(),t=s.indexOf(e);if(t<s.length-1){let e=s[t+1],a=S[e];if(a&&!a.canAccess)return void alert(a.lockMessage||"Tahap selanjutnya telah dikunci oleh admin. Silakan hubungi admin untuk membuka akses.");U(e)}},Y=()=>{X("pretest")},Z=async e=>{var s,t;console.log("handleLessonComplete called with:",{lessonId:e,currentLessonIndex:f,courseId:v.id});let a=[...new Set([...(null==(s=E.lessonProgress)?void 0:s.completedLessons)||[],f])];console.log("Updating lesson progress:",{currentLessonIndex:f,completedLessons:a,totalLessons:v.lessons.length}),await R(f,{currentLessonIndex:f,completedLessons:a,timeSpent:((null==(t=E.lessonProgress)?void 0:t.timeSpent)||0)+1,lastCompletedLesson:f,lastCompletedAt:new Date().toISOString()});let r=a.length>=v.lessons.length,n=f===v.lessons.length-1;r||n?(console.log("Lessons completed! Marking lessons step as complete and navigating to post test."),await X("lessons")):(console.log("Lesson ".concat(f+1," completed. ").concat(a.length,"/").concat(v.lessons.length," lessons done.")),f<v.lessons.length-1&&y(f+1)),c&&(console.log("Calling parent onMarkComplete"),c())};return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("button",{onClick:l,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 mb-4 px-4 lg:px-0",children:[(0,a.jsx)(G.A,{size:20}),(0,a.jsx)("span",{children:"Back to Dashboard"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 sm:p-8 text-white",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:v.title}),(0,a.jsx)("p",{className:"text-blue-100 text-sm sm:text-base",children:v.description}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white/20 rounded-lg px-3 py-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:[E.completedSteps.length,"/",(()=>{let e=["intro","pretest","lessons","posttest"];return(null==P?void 0:P.hasPostWork)&&e.push("postwork"),(null==P?void 0:P.hasFinalProject)&&e.push("finalproject"),e.length})()]})," Tahap Selesai"]}),(0,a.jsxs)("div",{className:"bg-white/20 rounded-lg px-3 py-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:[_(),"%"]})," Progress"]})]})]}),(E.isCompleted||B())&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,a.jsx)(eP.A,{size:48,className:"text-yellow-300"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold",children:"Selamat! \uD83C\uDF89"}),(0,a.jsx)("p",{className:"text-green-100 text-lg",children:"Anda telah menyelesaikan course ini!"})]}),(0,a.jsx)(eP.A,{size:48,className:"text-yellow-300"})]}),(0,a.jsxs)("div",{className:"bg-white/20 rounded-xl p-4 sm:p-6 text-center",children:[(0,a.jsxs)("p",{className:"text-lg mb-2",children:["Course ",(0,a.jsx)("strong",{children:v.title})," telah selesai!"]}),(0,a.jsx)("p",{className:"text-green-100",children:"Untuk sertifikat, silakan cek menu Achievement."})]})]}),(0,a.jsx)("div",{className:"p-4 sm:p-6 bg-gray-50",children:(0,a.jsx)(sN,{currentStep:E.currentStep,completedSteps:E.completedSteps,onStepClick:e=>{let s=(()=>{let e=["intro","pretest","lessons","posttest"];return(null==P?void 0:P.hasPostWork)&&e.push("postwork"),(null==P?void 0:P.hasFinalProject)&&e.push("finalproject"),e})(),t=s.indexOf(e),a=s.indexOf(E.currentStep),r=S[e];if(r&&!r.canAccess)return void alert(r.lockMessage||"Tahap ini masih dikunci oleh admin.");let n=s.every(e=>E.completedSteps.includes(e));(0===t||E.completedSteps.includes(e)||e===E.currentStep||E.completedSteps.includes(s[t-1])||n||E.isCompleted||t<=a)&&U(e)},isCourseCompleted:B(),backendProgress:_(),stageAccess:S,courseConfig:P})}),(0,a.jsxs)("div",{className:"p-4 sm:p-8",children:["intro"===E.currentStep&&(0,a.jsx)(e3,{material:v.introMaterial||{content:v.description},onComplete:()=>X("intro")}),"pretest"===E.currentStep&&(0,a.jsx)(sa,{courseId:null==v?void 0:v.id,onComplete:e=>{console.log("Pre-test completed:",e),e.shouldProceed&&e.passed&&Y()},onBack:l}),"lessons"===E.currentStep&&(0,a.jsx)(si,{lessons:v.lessons,onMarkComplete:Z,courseId:v.id,currentLessonIndex:f,onLessonChange:e=>{var s,t;y(e),R(v.id,{currentLessonIndex:e,completedLessons:(null==(s=E.lessonProgress)?void 0:s.completedLessons)||[],timeSpent:((null==(t=E.lessonProgress)?void 0:t.timeSpent)||0)+1})}}),"posttest"===E.currentStep&&(0,a.jsx)(so,{courseId:null==v?void 0:v.id,onComplete:e=>{console.log("Post-test with survey completed:",e),X("posttest")},onBack:l}),"postwork"===E.currentStep&&(null==P?void 0:P.hasPostWork)&&(0,a.jsx)(sd,{courseId:v.id,onSubmit:e=>{console.log("Post work submitted:",e),q("postwork",e),X("postwork")},stageAccess:S}),"finalproject"===E.currentStep&&(null==P?void 0:P.hasFinalProject)&&(0,a.jsx)(sf,{courseId:v.id,onSubmit:e=>{console.log("Final project submitted:",e),q("finalproject",e),X("finalproject"),O()},stageAccess:S})]})]}),h&&(0,a.jsx)(sy,{courseId:v.id,courseName:v.title,onClose:()=>b(!1)})]})};var sw=t(94631),sS=t(23464);let sA=t(49509).env.REACT_APP_API_URL||"https://api.mindshiftlearning.id/api",sC={getUserDetail:async()=>{let e=localStorage.getItem("authToken");return(await sS.A.get("".concat(sA,"/protected/user/detail"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).data},updateUserDetail:async e=>{let s=localStorage.getItem("authToken");return(await sS.A.put("".concat(sA,"/protected/user/detail"),e,{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}})).data}},sD=()=>{let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!1),[n,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(""),d=async()=>{a(!0),l(null);try{let e=await sC.getUserDetail();s(e)}catch(s){var e,t;l((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||s.message||"Failed to fetch user detail"),console.error("Error fetching user detail:",s)}finally{a(!1)}},c=async e=>{a(!0),l(null),o("saving");try{let t=await sC.updateUserDetail(e);return s(t),o("saved"),setTimeout(()=>o(""),3e3),t}catch(e){var t,r;throw l((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||e.message||"Failed to update user detail"),o("error"),setTimeout(()=>o(""),3e3),console.error("Error updating user detail:",e),e}finally{a(!1)}};return(0,r.useEffect)(()=>{d()},[]),{userDetail:e,loading:t,error:n,saveStatus:i,updateUserDetail:c,refetch:d}},sP=()=>{let{currentUser:e}=(0,n.A)(),{userDetail:s,loading:t,error:i,saveStatus:o,updateUserDetail:d}=sD(),[c,m]=(0,r.useState)({fullName:"",email:"",bio:"",phone:"",location:"",occupation:"",education:"",learningStyle:"",skillLevel:"",emailNotifications:!0,pushNotifications:!0,weeklyReports:!0});(0,r.useEffect)(()=>{if(s){var t,a,r;m({fullName:(null==e?void 0:e.fullName)||(null==e?void 0:e.username)||"",email:(null==e?void 0:e.email)||"",bio:s.bio||"",phone:s.phone||"",location:s.location||"",occupation:s.occupation||"",education:s.education||"",learningStyle:s.learning_style||"",skillLevel:s.skill_level||"",emailNotifications:null==(t=s.email_notifications)||t,pushNotifications:null==(a=s.push_notifications)||a,weeklyReports:null==(r=s.weekly_reports)||r})}else e&&m(s=>({...s,fullName:e.fullName||e.username||"",email:e.email||""}))},[s,e]);let u=e=>{let{name:s,value:t,type:a,checked:r}=e.target;m(e=>({...e,[s]:"checkbox"===a?r:t}))},x=async e=>{e.preventDefault();try{let e={bio:c.bio,phone:c.phone,location:c.location,occupation:c.occupation,education:c.education,learning_style:c.learningStyle,skill_level:c.skillLevel,email_notifications:c.emailNotifications,push_notifications:c.pushNotifications,weekly_reports:c.weeklyReports};await d(e)}catch(e){console.error("Failed to update profile:",e)}};return(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 text-gray-700",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 sm:p-8 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Profile Settings"}),(0,a.jsx)("p",{className:"text-blue-100",children:"Manage your account information and preferences"})]}),o&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["saving"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sw.A,{className:"animate-spin",size:20}),(0,a.jsx)("span",{className:"text-sm",children:"Saving..."})]}),"saved"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{size:20,className:"text-green-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Saved!"})]}),"error"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{size:20,className:"text-red-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Error saving"})]})]})]})}),(0,a.jsxs)("div",{className:"p-6 sm:p-8",children:[i&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2",children:[(0,a.jsx)(g.A,{size:20,className:"text-red-500"}),(0,a.jsx)("span",{className:"text-red-700",children:i})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-8 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.A,{size:24,className:"text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:c.fullName||"User Profile"}),(0,a.jsx)("p",{className:"text-gray-600",children:c.email})]})]}),(0,a.jsxs)("form",{onSubmit:x,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,a.jsx)(l.A,{className:"mr-2",size:20}),"Personal Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,a.jsx)("input",{type:"text",name:"fullName",value:c.fullName,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,a.jsx)("input",{type:"email",name:"email",value:c.email,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",name:"phone",value:c.phone,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your phone number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,a.jsx)("input",{type:"text",name:"location",value:c.location,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your location"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,a.jsx)(eE.A,{className:"mr-2",size:20}),"Professional Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Occupation"}),(0,a.jsx)("input",{type:"text",name:"occupation",value:c.occupation,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your occupation"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Education"}),(0,a.jsx)("input",{type:"text",name:"education",value:c.education,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your education"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,a.jsx)(T.A,{className:"mr-2",size:20}),"About Me"]}),(0,a.jsx)("textarea",{name:"bio",value:c.bio,onChange:u,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"Tell us about yourself..."})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,a.jsx)(S.A,{className:"mr-2",size:20}),"Learning Preferences"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Learning Style"}),(0,a.jsxs)("select",{name:"learningStyle",value:c.learningStyle,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,a.jsx)("option",{value:"",children:"Select your learning style"}),(0,a.jsx)("option",{value:"visual",children:"Visual"}),(0,a.jsx)("option",{value:"auditory",children:"Auditory"}),(0,a.jsx)("option",{value:"kinesthetic",children:"Kinesthetic"}),(0,a.jsx)("option",{value:"reading",children:"Reading/Writing"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Level"}),(0,a.jsxs)("select",{name:"skillLevel",value:c.skillLevel,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,a.jsx)("option",{value:"",children:"Select your skill level"}),(0,a.jsx)("option",{value:"beginner",children:"Beginner"}),(0,a.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,a.jsx)("option",{value:"advanced",children:"Advanced"}),(0,a.jsx)("option",{value:"expert",children:"Expert"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[(0,a.jsx)("button",{type:"submit",disabled:t,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sw.A,{className:"animate-spin mr-2",size:20}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(X.A,{className:"mr-2",size:20}),"Save Changes"]})}),(0,a.jsx)("button",{type:"button",onClick:()=>window.location.reload(),className:"flex-1 sm:flex-none px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium flex items-center justify-center",children:"Reset"})]})]})]})]})})},sz=()=>{let{currentUser:e,getUserProgressSync:s}=(0,n.A)(),{certificates:l,loadCertificates:i}=eY(),[o,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{if(null==e?void 0:e.id)try{let e=await s();if(e&&Array.isArray(e)){let s=e.filter(e=>e.overall_progress>=100);for(let e of(d(s),s))if(!l.find(s=>s.courseId===e.course_id)){console.log("Auto-requesting certificate for completed course ".concat(e.course_id));try{let{requestCertificate:s}=await Promise.resolve().then(t.bind(t,39360));await s(e.course_id)}catch(s){console.error("Failed to auto-request certificate for course ".concat(e.course_id,":"),s)}}s.length>0&&setTimeout(()=>{i()},2e3)}}catch(e){console.error("Error checking completed courses:",e)}})()},[null==e?void 0:e.id,l.length]);let c=async e=>{try{let s=(await Promise.all([t.e(930),t.e(628),t.e(316),t.e(260)]).then(t.t.bind(t,64227,23))).default,a='\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="UTF-8">\n          <style>\n            body {\n              margin: 0;\n              padding: 40px;\n              font-family: \'Georgia\', serif;\n              background: white;\n              width: 1000px;\n              height: 700px;\n              box-sizing: border-box;\n            }\n            .certificate {\n              width: 100%;\n              height: 100%;\n              border: 8px solid #f8f9fa;\n              padding: 40px;\n              text-align: center;\n              position: relative;\n              background: white;\n              box-sizing: border-box;\n            }\n            .border-inner {\n              position: absolute;\n              top: 20px;\n              left: 20px;\n              right: 20px;\n              bottom: 20px;\n              border: 3px solid #667eea;\n              border-radius: 10px;\n            }\n            .content {\n              position: relative;\n              z-index: 1;\n              height: 100%;\n              display: flex;\n              flex-direction: column;\n              justify-content: center;\n            }\n            .title {\n              color: #667eea;\n              margin-bottom: 20px;\n            }\n            .title h1 {\n              font-size: 28px;\n              margin: 0;\n            }\n            .main-title {\n              font-size: 32px;\n              font-weight: bold;\n              margin: 15px 0;\n              color: #2d3748;\n            }\n            .subtitle {\n              font-size: 16px;\n              margin: 15px 0;\n              color: #4a5568;\n            }\n            .name {\n              font-size: 24px;\n              font-weight: bold;\n              color: #667eea;\n              margin: 20px 0;\n              text-decoration: underline;\n            }\n            .course {\n              font-size: 20px;\n              font-weight: bold;\n              color: #2d3748;\n              margin: 15px 0;\n            }\n            .details {\n              margin: 20px 0;\n              color: #718096;\n            }\n            .details p {\n              margin: 8px 0;\n              font-size: 14px;\n            }\n            .signatures {\n              margin-top: 40px;\n              display: flex;\n              justify-content: space-between;\n            }\n            .signature {\n              border-top: 2px solid #e2e8f0;\n              width: 180px;\n              padding-top: 10px;\n              font-size: 14px;\n            }\n          </style>\n        </head>\n        <body>\n          <div class="certificate">\n            <div class="border-inner"></div>\n            <div class="content">\n              <div class="title">\n                <h1>\uD83C\uDFC6 SERTIFIKAT PENYELESAIAN \uD83C\uDFC6</h1>\n              </div>\n              <div class="main-title">CERTIFICATE OF COMPLETION</div>\n              <div class="subtitle">Dengan ini menyatakan bahwa</div>\n              <div class="name">'.concat(e.userName||"Student",'</div>\n              <div class="subtitle">telah berhasil menyelesaikan kursus</div>\n              <div class="course">').concat(e.courseName||"Course",'</div>\n              <div class="details">\n                <p><strong>Nomor Sertifikat:</strong> ').concat(e.certNumber||"N/A","</p>\n                <p><strong>Tanggal Penyelesaian:</strong> ").concat(e.completionDate?new Date(e.completionDate).toLocaleDateString("id-ID"):"N/A",'</p>\n              </div>\n              <div class="signatures">\n                <div class="signature">\n                  <div>Direktur Akademik</div>\n                </div>\n                <div class="signature">\n                  <div>Instruktur Kursus</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </body>\n        </html>\n      '),r={margin:.5,filename:"Sertifikat-".concat((e.courseName||"course").replace(/\s+/g,"-"),"-").concat((e.userName||"Student").replace(/\s+/g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0,allowTaint:!1,backgroundColor:"#ffffff"},jsPDF:{unit:"in",format:"a4",orientation:"landscape",compress:!0}};await s().set(r).from(a).save()}catch(e){console.error("Error generating PDF:",e),alert("Gagal membuat PDF. Silakan coba lagi.")}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-4 flex items-center justify-center gap-3",children:[(0,a.jsx)(eP.A,{className:"w-8 h-8 text-yellow-500"}),"Your Achievements"]}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"View and download your course completion certificates"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===l.length?(0,a.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,a.jsx)(sj.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No Certificates Yet"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Complete courses to earn your first certificate!"})]}):l.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(z.A,{className:"w-8 h-8"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((s,t)=>(0,a.jsx)(ev.A,{className:"w-4 h-4 ".concat(t<Math.floor(e.grade/20)?"text-yellow-300 fill-current":"text-white/50")},t))})]}),(0,a.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.courseName||"Course"}),(0,a.jsxs)("p",{className:"text-blue-100 text-sm",children:["Certificate #",e.certNumber||"N/A"]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,a.jsx)(eS.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-sm",children:["Completed: ",e.completionDate?new Date(e.completionDate).toLocaleDateString():"N/A"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,a.jsx)(eP.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-sm",children:["Grade: ",e.grade||100,"%"]})]}),e.timeSpent&&(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,a.jsx)(S.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-sm",children:["Time Spent: ",e.timeSpent]})]})]}),e.skills&&e.skills.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Skills Acquired:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skills.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e},s))})]}),"pending"===e.status?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-full bg-yellow-100 text-yellow-800 font-semibold py-3 px-4 rounded-lg text-center",children:"Menunggu Persetujuan Admin"}),(0,a.jsxs)("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-500 font-semibold py-3 px-4 rounded-lg cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(eC.A,{className:"w-4 h-4"}),"Download Certificate"]})]}):"approved"===e.status?(0,a.jsxs)("button",{onClick:()=>c(e),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,a.jsx)(eC.A,{className:"w-4 h-4"}),"Download Certificate"]}):"rejected"===e.status?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-full bg-red-100 text-red-800 font-semibold py-3 px-4 rounded-lg text-center",children:"Sertifikat Ditolak"}),e.rejectionReason&&(0,a.jsxs)("div",{className:"text-sm text-red-600 text-center",children:["Alasan: ",e.rejectionReason]}),(0,a.jsxs)("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-500 font-semibold py-3 px-4 rounded-lg cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(eC.A,{className:"w-4 h-4"}),"Download Certificate"]})]}):(0,a.jsxs)("button",{onClick:()=>c(e),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,a.jsx)(eC.A,{className:"w-4 h-4"}),"Download Certificate"]})]})]},e.id))}),l.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-8",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Achievement Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:l.length}),(0,a.jsx)("div",{className:"text-gray-600",children:"Certificates Earned"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[(()=>{let e=l.reduce((e,s)=>e+(s.grade||100),0);return l.length>0?Math.round(e/l.length):0})(),"%"]}),(0,a.jsx)("div",{className:"text-gray-600",children:"Average Grade"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:new Set(l.flatMap(e=>e.skills||[])).size}),(0,a.jsx)("div",{className:"text-gray-600",children:"Skills Acquired"})]})]})]})]})},sT=e=>{let{onStartLearning:s}=e,{courses:t,enrollments:l,currentUser:i}=(0,n.A)(),o=(0,r.useMemo)(()=>(Array.isArray(l)?l:[]).map(e=>({...e,id:e.id||e.course_id,isEnrolled:!0})),[l]),d=(0,r.useMemo)(()=>{let e=o.length,s=o.filter(e=>100===e.progress).length,t=o.filter(e=>e.progress>0&&e.progress<100).length,a=e>0?Math.round(o.reduce((e,s)=>e+(s.progress||0),0)/e):0;return{total:e,completed:s,inProgress:t,average:a}},[o]);return i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"My Courses"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Track your learning progress and continue your courses"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(S.A,{className:"text-blue-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.total}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Enrolled"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"text-yellow-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.inProgress}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"In Progress"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"text-green-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.completed}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(eV.A,{className:"text-purple-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[d.average,"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Avg Progress"})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Your Enrolled Courses"}),0===o.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(S.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Enrolled Courses"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't enrolled in any courses yet. Browse available courses to start learning!"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Courses"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>(0,a.jsx)(_,{course:e,onStartLearning:s},e.id))})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(S.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Please Login"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You need to login to view your enrolled courses."})]})};var sI=t(11518),sE=t.n(sI),sM=t(71366),sU=t(28883),sF=t(19420);let sR=()=>{let[e,s]=(0,r.useState)(!1),t=[{id:"whatsapp",label:"WhatsApp",icon:sM.A,color:"bg-green-500 hover:bg-green-600",action:()=>{window.open("https://wa.me/6285255149256?text=Halo%20Admin%2C%20saya%20membutuhkan%20bantuan%20terkait%20kursus","_blank")}},{id:"email",label:"Email",icon:sU.A,color:"bg-blue-500 hover:bg-blue-600",action:()=>{window.location.href="mailto:ramdan.einstein@gmail.com?subject=Bantuan%20Kursus&body=Halo%20Admin%2C%0A%0ASaya%20membutuhkan%20bantuan%20terkait%3A%0A%0ATerima%20kasih."}},{id:"phone",label:"Telepon",icon:sF.A,color:"bg-purple-500 hover:bg-purple-600",action:()=>{window.location.href="tel:+6285255149256"}}];return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)("div",{onClick:()=>s(!1),className:"jsx-b3f092c9e3093219 fixed inset-0 bg-black bg-opacity-20 z-40 lg:hidden"}),(0,a.jsx)("div",{className:"jsx-b3f092c9e3093219 "+"fixed bottom-24 right-6 z-50 transition-all duration-300 ".concat(e?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"),children:(0,a.jsx)("div",{className:"jsx-b3f092c9e3093219 flex flex-col gap-3",children:t.map((s,t)=>{let r=s.icon;return(0,a.jsxs)("button",{onClick:s.action,style:{animationDelay:"".concat(50*t,"ms"),animation:e?"slideInUp 0.3s ease-out forwards":"none"},title:s.label,className:"jsx-b3f092c9e3093219 "+"".concat(s.color," text-white p-3 rounded-full shadow-lg transition-all duration-200 transform hover:scale-110 flex items-center gap-2 min-w-[48px] justify-center group"),children:[(0,a.jsx)(r,{size:20,className:"jsx-b3f092c9e3093219"}),(0,a.jsx)("span",{className:"jsx-b3f092c9e3093219 hidden group-hover:inline-block text-sm font-medium whitespace-nowrap",children:s.label}),(0,a.jsx)(e2.A,{size:12,className:"hidden group-hover:inline-block"})]},s.id)})})}),(0,a.jsx)("button",{onClick:()=>s(!e),title:"Hubungi Admin",className:"jsx-b3f092c9e3093219 "+"fixed bottom-6 right-6 z-50 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 hover:shadow-xl ".concat(e?"rotate-45":"rotate-0"),children:e?(0,a.jsx)(m.A,{size:24,className:"transition-transform duration-300"}):(0,a.jsx)(sM.A,{size:24,className:"transition-transform duration-300"})}),!e&&(0,a.jsxs)("div",{className:"jsx-b3f092c9e3093219 fixed bottom-6 right-20 z-40 bg-gray-800 text-white px-3 py-2 rounded-lg text-sm font-medium opacity-0 hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:["Butuh Bantuan?",(0,a.jsx)("div",{className:"jsx-b3f092c9e3093219 absolute top-1/2 -right-1 transform -translate-y-1/2 w-2 h-2 bg-gray-800 rotate-45"})]}),(0,a.jsx)(sE(),{id:"b3f092c9e3093219",children:"@-webkit-keyframes slideInUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes slideInUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes slideInUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes slideInUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})};var sL=t(13052);let sq=()=>{let{currentUser:e,courses:s,isLoading:t}=(0,n.A)(),[l,i]=(0,r.useState)(null),[o,d]=(0,r.useState)("");(0,r.useEffect)(()=>{s&&s.length>0&&d("")},[s]);let c=e=>{i(e)};return e&&"admin"===e.role?t?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Memuat daftar courses..."})]})}):l?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("button",{onClick:()=>{i(null)},className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[(0,a.jsx)(G.A,{size:20}),(0,a.jsx)("span",{children:"Kembali ke Daftar Courses"})]})}),(0,a.jsx)(eK,{courseId:l.id,courseName:l.title})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"border-b border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Stage Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Kelola akses tahap pembelajaran untuk setiap course"})]}),(0,a.jsxs)("div",{className:"p-6",children:[o&&(0,a.jsxs)("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(I.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-600 mt-1",children:o})]}),0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(I.A,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tidak Ada Courses"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Belum ada courses yang tersedia untuk dikelola."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Pilih course untuk mengelola akses tahap pembelajaran:"}),s.map(e=>(0,a.jsx)("div",{onClick:()=>c(e),className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["ID: ",e.id]}),(0,a.jsxs)("span",{children:["Dibuat: ",new Date(e.createdAt).toLocaleDateString("id-ID")]})]})]}),(0,a.jsx)(sL.A,{size:20,className:"text-gray-400"})]})},e.id))]})]})]}):(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(I.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Akses Ditolak"})]}),(0,a.jsx)("p",{className:"text-red-600 mt-1",children:"Hanya admin yang dapat mengakses fitur ini."})]})},sO=()=>{let{currentUser:e,isLoading:s,courses:t,updateCourses:l}=(0,n.A)(),[i,o]=(0,r.useState)("dashboard"),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[g,p]=(0,r.useState)(!1),[h,b]=(0,r.useState)({reading:{},video:{},preTest:{},postTest:{}}),[f,j]=(0,r.useState)({showResult:!1,score:0}),[y,N]=(0,r.useState)({showResult:!1,score:0}),[w,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(console.log("User changed:",e),e){let s="admin"===e.role?"overview":"dashboard";console.log("Setting view to:",s),o(s)}},[e]);let A=e=>{x(e),o("course"),window.innerWidth<1024&&p(!1)};return s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 lg:flex",children:[(0,a.jsx)(k,{isSidebarOpen:g,setIsSidebarOpen:p}),(0,a.jsx)(L,{currentView:i,setCurrentView:o,isSidebarOpen:g,setIsSidebarOpen:p,userRole:e.role,onAnnouncementClick:()=>S(!0)}),(0,a.jsx)("div",{className:"w-full lg:flex-1 pt-16 lg:pt-0 pb-20 lg:pb-0",children:(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:["dashboard"===i&&e&&"admin"!==e.role&&(0,a.jsx)(B,{onStartLearning:A}),"courses"===i&&e&&"admin"!==e.role&&(0,a.jsx)(sT,{onStartLearning:A}),("overview"===i||"courses"===i||"quizzes"===i||"surveys"===i||"announcements"===i||"certificates"===i||"project-instructions"===i||"course-instructions"===i||"course-config"===i||"users"===i||"test-results"===i||"students"===i)&&"admin"===e.role&&(0,a.jsx)(eH,{activeTab:i}),"stage-management"===i&&"admin"===e.role&&(0,a.jsx)(sq,{}),"course"===i&&(0,a.jsx)(sk,{currentLesson:u,onBack:()=>{o("dashboard"),x(null)},preTestState:f,postTestState:y,onRetakeQuiz:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?j(e=>({...e,showResult:!1})):N(e=>({...e,showResult:!1}))},onMarkComplete:e=>{b(s=>({...s,reading:{...s.reading,[e]:100}}))}}),"profile"===i&&(0,a.jsx)(sP,{}),"achievements"===i&&(0,a.jsx)(sz,{}),"announcements"===i&&(0,a.jsx)(v,{isModal:!1,onClose:()=>o("dashboard")})]})}),w&&(0,a.jsx)(v,{isModal:!0,onClose:()=>S(!1)}),e&&(0,a.jsx)(sR,{})]}):(0,a.jsx)(c,{})}},54954:(e,s,t)=>{"use strict";t.r(s),t.d(s,{coursesData:()=>a,default:()=>r});let a=[{id:1,title:"Introduction to React",description:"Learn the fundamentals of React development",category:"Programming",level:"Beginner",duration:"4 weeks",instructor:"John Doe",rating:4.8,students:1234,image:"https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=300&h=200&fit=crop&crop=center",isEnrolled:!0,progress:65,introMaterial:{title:"Selamat Datang di Kursus React",content:[{type:"text",content:"Selamat datang di kursus **Introduction to React**! Dalam kursus ini, Anda akan mempelajari dasar-dasar pengembangan aplikasi web menggunakan React, salah satu library JavaScript paling populer saat ini.\n\nReact dikembangkan oleh Facebook dan digunakan oleh ribuan perusahaan di seluruh dunia untuk membangun aplikasi web yang interaktif dan responsif."},{type:"image",src:"https://images.unsplash.com/photo-1633356122102-3fe601e05bd2?w=600&h=300&fit=crop&crop=center",alt:"React Development Environment",caption:"React ecosystem dan tools yang akan dipelajari"},{type:"text",content:"### Apa yang akan Anda pelajari:"},{type:"list",items:["Konsep dasar React dan JSX","Component-based architecture","State management dan Props","Event handling dan lifecycle methods","Hooks dan functional components","Best practices dalam React development"]},{type:"video",title:"Video Pengenalan",src:"https://www.youtube.com/embed/Ke90Tje7VS0",duration:"5:30"},{type:"pdf",title:"Panduan Dasar React",description:"Dokumen PDF berisi panduan dasar React untuk pemula",embedUrl:"https://mozilla.github.io/pdf.js/web/viewer.html?file=https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",downloadUrl:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"},{type:"external_link",title:"Dokumentasi Resmi React",description:"Kunjungi dokumentasi resmi React untuk informasi lebih lanjut",url:"https://reactjs.org/docs/getting-started.html"}]},lessons:[{id:1,title:"Pengenalan React",type:"reading",content:[{type:"text",content:"# Pengenalan React\n\nReact adalah library JavaScript yang dikembangkan oleh Facebook untuk membangun user interface yang interaktif dan efisien."},{type:"text",content:"## Apa itu React?\n\nReact adalah library JavaScript yang berfokus pada pembuatan komponen UI yang dapat digunakan kembali. React menggunakan konsep Virtual DOM untuk meningkatkan performa aplikasi."},{type:"text",content:"## Fitur Utama React"},{type:"list",ordered:!0,items:["**Component-Based**: Membangun aplikasi dengan komponen yang dapat digunakan kembali","**Virtual DOM**: Meningkatkan performa dengan minimal DOM manipulation","**JSX**: Sintaks yang memungkinkan penulisan HTML di dalam JavaScript","**One-Way Data Flow**: Data mengalir dari parent ke child component"]},{type:"text",content:"## Keunggulan React"},{type:"list",items:["**Performance**: Virtual DOM membuat aplikasi lebih cepat","**Reusability**: Komponen dapat digunakan kembali","**Community**: Ekosistem yang besar dan aktif","**Learning Curve**: Relatif mudah dipelajari"]},{type:"text",content:"## Kapan Menggunakan React?\n\nReact cocok untuk:"},{type:"list",items:["Single Page Applications (SPA)","Aplikasi dengan UI yang kompleks","Aplikasi yang membutuhkan performa tinggi","Proyek dengan tim yang besar"]},{type:"text",content:"\uD83D\uDCA1 **Tips:** Mari mulai membangun aplikasi React yang amazing!"},{type:"pdf",title:"React Cheat Sheet",description:"Ringkasan konsep-konsep penting dalam React",embedUrl:"https://mozilla.github.io/pdf.js/web/viewer.html?file=https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",downloadUrl:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"}]},{id:2,title:"Video Tutorial React Basics",type:"video",content:[{type:"text",content:"# Video Tutorial React Basics\n\nDalam video tutorial ini, Anda akan mempelajari dasar-dasar React melalui demonstrasi langsung."},{type:"video",title:"React Basics Tutorial",src:"https://www.youtube.com/embed/Ke90Tje7VS0",duration:"20:15"},{type:"external_link",title:"Materi Tambahan React Basics",description:"Kunjungi situs resmi React untuk mempelajari lebih lanjut",url:"https://reactjs.org/tutorial/tutorial.html"}]}],preTest:{id:"pre1",title:"Pre-Test: React Fundamentals",questions:[{id:1,question:"React dikembangkan oleh?",options:["Google","Facebook","Microsoft","Apple"],correct:1},{id:2,question:"Apa kepanjangan dari JSX?",options:["JavaScript XML","Java Syntax Extension","JSON XML","JavaScript Extension"],correct:0},{id:3,question:"React adalah?",options:["Framework","Library","Database","Server"],correct:1},{id:4,question:"Apa itu component dalam React?",options:["Fungsi atau class yang mengembalikan JSX","Database","CSS file","HTML file"],correct:0}],postWork:{title:"Tugas Pasca Kerja - React Fundamentals",description:'\n        <h3>Tugas Praktik React</h3>\n        <p>Setelah menyelesaikan kursus ini, Anda diharapkan untuk membuat aplikasi React sederhana yang mendemonstrasikan pemahaman Anda tentang konsep-konsep dasar React.</p>\n        \n        <h4>Persyaratan Tugas:</h4>\n        <ul>\n          <li>Buat aplikasi React dengan minimal 3 komponen</li>\n          <li>Implementasikan state management menggunakan useState</li>\n          <li>Gunakan props untuk komunikasi antar komponen</li>\n          <li>Tambahkan event handling untuk interaksi user</li>\n          <li>Styling menggunakan CSS atau CSS-in-JS</li>\n        </ul>\n        \n        <h4>Deliverables:</h4>\n        <p>Silakan submit salah satu dari:</p>\n        <ul>\n          <li><strong>Source Code:</strong> File ZIP berisi seluruh project React</li>\n          <li><strong>Repository Link:</strong> Link ke GitHub repository</li>\n          <li><strong>Live Demo:</strong> Link ke deployed application (Netlify, Vercel, dll)</li>\n        </ul>\n        \n        <blockquote style="background-color: #fef3c7; border-left: 4px solid #f59e0b; padding: 16px; margin: 20px 0;">\n          <p style="margin: 0;">\uD83D\uDCA1 <strong>Tips:</strong> Pastikan code Anda clean, well-documented, dan mengikuti best practices React!</p>\n        </blockquote>\n      ',submissionFormat:"both",fileSettings:{maxSize:10,allowedTypes:["zip","rar","pdf","docx","doc"]},instructions:"Upload file project atau berikan link repository/demo aplikasi Anda.",requirements:"Aplikasi harus berjalan tanpa error dan mendemonstrasikan konsep React yang telah dipelajari."},finalProject:{title:"Proyek Akhir - Aplikasi React Lengkap",description:'\n        <h3>Proyek Akhir: Aplikasi React Komprehensif</h3>\n        <p>Sebagai proyek akhir, Anda akan membuat aplikasi React yang lebih kompleks yang mengintegrasikan semua konsep yang telah dipelajari dalam kursus ini.</p>\n        \n        <h4>Spesifikasi Proyek:</h4>\n        <ul>\n          <li><strong>Tema:</strong> Bebas (e.g., Todo App, Weather App, E-commerce, Blog, dll)</li>\n          <li><strong>Komponen:</strong> Minimal 5 komponen dengan hierarki yang jelas</li>\n          <li><strong>State Management:</strong> Gunakan useState dan useEffect</li>\n          <li><strong>API Integration:</strong> Konsumsi minimal 1 external API</li>\n          <li><strong>Routing:</strong> Implementasi React Router (opsional)</li>\n          <li><strong>Responsive Design:</strong> Aplikasi harus responsive</li>\n        </ul>\n        \n        <h4>Kriteria Penilaian:</h4>\n        <ol>\n          <li><strong>Functionality (40%):</strong> Aplikasi berjalan sesuai spesifikasi</li>\n          <li><strong>Code Quality (30%):</strong> Clean code, proper structure, comments</li>\n          <li><strong>UI/UX (20%):</strong> Design yang menarik dan user-friendly</li>\n          <li><strong>Innovation (10%):</strong> Kreativitas dan fitur tambahan</li>\n        </ol>\n        \n        <h4>Deliverables:</h4>\n        <ul>\n          <li><strong>Source Code:</strong> Complete project files (ZIP/RAR)</li>\n          <li><strong>Documentation:</strong> README.md dengan setup instructions</li>\n          <li><strong>Demo:</strong> Link ke live application atau video demo</li>\n          <li><strong>Presentation:</strong> Slide presentasi (PDF/PPT) - opsional</li>\n        </ul>\n        \n        <div style="background-color: #ecfdf5; border: 1px solid #10b981; border-radius: 8px; padding: 16px; margin: 20px 0;">\n          <h5 style="color: #065f46; margin-top: 0;">\uD83C\uDFAF Deadline & Submission</h5>\n          <p style="margin-bottom: 0; color: #047857;">Proyek harus diselesaikan dalam waktu 2 minggu setelah menyelesaikan semua materi kursus. Submit melalui platform ini atau kirim link repository.</p>\n        </div>\n      ',submissionFormat:"both",fileSettings:{maxSize:50,allowedTypes:["zip","rar","pdf","pptx","ppt","docx","doc"]},instructions:"Upload complete project files dan/atau berikan link ke repository dan live demo.",requirements:"Proyek harus memenuhi semua spesifikasi yang disebutkan dan berjalan tanpa error.",linkGuidelines:"Untuk submission link, pastikan repository bersifat public dan include README yang jelas."}},postTest:{id:"post1",title:"Post-Test: React Fundamentals",questions:[{id:1,question:"Virtual DOM dalam React berfungsi untuk?",options:["Styling","Meningkatkan performa","Database","Testing"],correct:1},{id:2,question:"Komponen dalam React sebaiknya?",options:["Besar dan kompleks","Kecil dan dapat digunakan kembali","Hanya satu per aplikasi","Tidak perlu dipisah"],correct:1},{id:3,question:"useState adalah?",options:["Hook untuk mengelola state","Component","Props","Event handler"],correct:0},{id:4,question:"Props dalam React digunakan untuk?",options:["Mengirim data dari parent ke child component","Styling","Database connection","Routing"],correct:0},{id:5,question:"useEffect digunakan untuk?",options:["Side effects dan lifecycle methods","Styling","State management","Routing"],correct:0},{id:6,question:"Apa itu key prop dalam React?",options:["Identifier unik untuk list items","Password","CSS class","Event handler"],correct:0}]}},{id:2,title:"Advanced JavaScript",description:"Master advanced JavaScript concepts and patterns",category:"Programming",level:"Advanced",duration:"6 weeks",instructor:"Jane Smith",rating:4.9,students:856,image:"https://images.unsplash.com/photo-1579468118864-1b9ea3c0db4a?w=300&h=200&fit=crop&crop=center",isEnrolled:!1,progress:0,introMaterial:{title:"Menguasai JavaScript Tingkat Lanjut",content:[{type:"text",content:"Selamat datang di kursus Advanced JavaScript! Kursus ini dirancang untuk developer yang sudah memiliki pemahaman dasar JavaScript dan ingin menguasai konsep-konsep advanced."},{type:"text",content:"JavaScript adalah bahasa yang sangat powerful dan fleksibel. Dalam kursus ini, kita akan menggali lebih dalam tentang fitur-fitur advanced yang akan membuat Anda menjadi JavaScript developer yang lebih baik."},{type:"image",src:"https://images.unsplash.com/photo-1627398242454-45a1465c2479?w=800&h=400&fit=crop&crop=center",alt:"JavaScript Code on Screen",caption:"Konsep-konsep advanced JavaScript yang akan dipelajari"},{type:"text",content:"Topik yang akan dibahas:"},{type:"list",items:["Closures dan Scope Chain","Prototypes dan Inheritance","Asynchronous Programming (Promises, Async/Await)","Design Patterns dalam JavaScript","Performance Optimization","Modern ES6+ Features"]},{type:"pdf",src:"https://eloquentjavascript.net/Eloquent_JavaScript.pdf",title:"Eloquent JavaScript (Free PDF)",description:"Buku gratis tentang JavaScript programming - Eloquent JavaScript by Marijn Haverbeke (400+ halaman)"},{type:"external_link",url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide",title:"MDN JavaScript Guide",description:"Dokumentasi resmi JavaScript dari Mozilla Developer Network"},{type:"video",src:"https://www.youtube.com/embed/hdI2bqOjy3c",title:"JavaScript Advanced - Course Overview",duration:"8:20"}]},lessons:[{id:1,title:"Pengenalan JavaScript Advanced",type:"reading",content:'\n          <h1>JavaScript Advanced Concepts</h1>\n          \n          <p>JavaScript adalah bahasa pemrograman yang sangat powerful dengan banyak fitur advanced yang perlu dikuasai.</p>\n          \n          <h2>Closures</h2>\n          \n          <p>Closure adalah fungsi yang memiliki akses ke variabel di scope luar bahkan setelah fungsi luar selesai dieksekusi.</p>\n          \n          <pre style="background-color: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid #007bff; overflow-x: auto;"><code>function outerFunction(x) {\n  return function innerFunction(y) {\n    return x + y;\n  };\n}\n\nconst addFive = outerFunction(5);\nconsole.log(addFive(3)); // Output: 8</code></pre>\n          \n          <h2>Prototypes</h2>\n          \n          <p>JavaScript menggunakan prototype-based inheritance yang berbeda dari class-based inheritance.</p>\n          \n          <pre style="background-color: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid #007bff; overflow-x: auto;"><code>function Person(name) {\n  this.name = name;\n}\n\nPerson.prototype.greet = function() {\n  return `Hello, I\'m ${this.name}`;\n};\n\nconst john = new Person(\'John\');\nconsole.log(john.greet()); // Hello, I\'m John</code></pre>\n          \n          <h2>Asynchronous Programming</h2>\n          \n          <p>Memahami Promises, async/await, dan event loop adalah kunci untuk menguasai JavaScript modern.</p>\n          \n          <pre style="background-color: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid #007bff; overflow-x: auto;"><code>// Promise example\nconst fetchData = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(\'Data fetched successfully!\');\n    }, 2000);\n  });\n};\n\n// Async/Await example\nasync function getData() {\n  try {\n    const data = await fetchData();\n    console.log(data);\n  } catch (error) {\n    console.error(\'Error:\', error);\n  }\n}</code></pre>\n          \n          <div style="background-color: #e9f5ff; border: 1px solid #4299e1; border-radius: 8px; padding: 16px; margin: 20px 0;">\n            <p style="margin: 0; color: #2b6cb0;">\uD83D\uDCA1 <strong>Pro Tip:</strong> Memahami konsep-konsep advanced ini akan membuat Anda menjadi JavaScript developer yang lebih baik!</p>\n          </div>\n        '},{id:2,title:"Closures dan Scope Chain",type:"video",videoUrl:"https://www.youtube.com/embed/3a0I8ICR1Vg",duration:"15:30",description:"Video tutorial mendalam tentang closures dan bagaimana scope chain bekerja di JavaScript"},{id:3,title:"JavaScript Design Patterns",type:"reading",content:'\n          <h1>JavaScript Design Patterns</h1>\n          \n          <p>Design patterns adalah solusi yang telah terbukti untuk masalah umum dalam pengembangan software.</p>\n          \n          <h2>Module Pattern</h2>\n          \n          <p>Pattern ini memungkinkan enkapsulasi dan privacy dalam JavaScript.</p>\n          \n          <pre style="background-color: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid #007bff; overflow-x: auto;"><code>const MyModule = (function() {\n  let privateVariable = 0;\n  \n  function privateFunction() {\n    console.log(\'This is private\');\n  }\n  \n  return {\n    publicMethod: function() {\n      privateVariable++;\n      privateFunction();\n      return privateVariable;\n    },\n    \n    getCount: function() {\n      return privateVariable;\n    }\n  };\n})();</code></pre>\n          \n          <h2>Observer Pattern</h2>\n          \n          <p>Pattern ini memungkinkan objek untuk memberitahu objek lain tentang perubahan state.</p>\n          \n          <pre style="background-color: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid #007bff; overflow-x: auto;"><code>class EventEmitter {\n  constructor() {\n    this.events = {};\n  }\n  \n  on(event, listener) {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n    this.events[event].push(listener);\n  }\n  \n  emit(event, data) {\n    if (this.events[event]) {\n      this.events[event].forEach(listener => listener(data));\n    }\n  }\n}</code></pre>\n          \n          <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 16px; margin: 20px 0;">\n            <p style="margin: 0; color: #856404;">\uD83C\uDFAF <strong>Best Practice:</strong> Design patterns membantu membuat code yang lebih maintainable dan scalable!</p>\n          </div>\n        '},{id:4,title:"Performance Optimization Techniques",type:"mixed",content:[{type:"text",content:"Optimasi performa adalah aspek penting dalam pengembangan JavaScript. Berikut adalah teknik-teknik yang perlu dikuasai:"},{type:"image",src:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=400&fit=crop&crop=center",alt:"Performance Monitoring Dashboard",caption:"Diagram teknik optimasi performa JavaScript"},{type:"text",content:"## Debouncing dan Throttling\n\nTeknik ini digunakan untuk mengontrol frekuensi eksekusi fungsi, terutama untuk event handling."},{type:"code",language:"javascript",content:"// Debouncing example\nfunction debounce(func, delay) {\n  let timeoutId;\n  return function(...args) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func.apply(this, args), delay);\n  };\n}\n\n// Throttling example\nfunction throttle(func, limit) {\n  let inThrottle;\n  return function(...args) {\n    if (!inThrottle) {\n      func.apply(this, args);\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n    }\n  };\n}"},{type:"pdf",src:"https://addyosmani.com/resources/essentialjsdesignpatterns/book/",title:"Learning JavaScript Design Patterns (Free Online Book)",description:"Buku gratis tentang JavaScript Design Patterns oleh Addy Osmani - tersedia online"},{type:"external_link",url:"https://web.dev/fast/",title:"Web.dev Performance Guide",description:"Panduan performa web dari Google Developers"}]}],preTest:{id:"pre2",title:"Pre-Test: Advanced JavaScript",questions:[{id:1,question:"Apa itu closure dalam JavaScript?",options:["Fungsi yang tertutup","Fungsi yang memiliki akses ke scope luar","Fungsi tanpa parameter","Fungsi yang tidak return"],correct:1},{id:2,question:"Apa perbedaan antara let dan var?",options:["Tidak ada perbedaan","let memiliki block scope, var memiliki function scope","var lebih modern","let tidak bisa diubah"],correct:1},{id:3,question:"Apa itu hoisting dalam JavaScript?",options:["Mengangkat variabel ke atas","Menghapus variabel","Mengubah tipe data","Membuat fungsi baru"],correct:0}]},postTest:{id:"post2",title:"Post-Test: Advanced JavaScript",questions:[{id:1,question:"JavaScript menggunakan inheritance berbasis?",options:["Class","Prototype","Interface","Module"],correct:1},{id:2,question:"Apa itu Promise dalam JavaScript?",options:["Objek untuk menangani operasi asynchronous","Fungsi biasa","Tipe data primitif","Method array"],correct:0},{id:3,question:"Async/await adalah?",options:["Syntax untuk menangani Promise","Tipe data baru","Framework JavaScript","Library eksternal"],correct:0},{id:4,question:"Apa itu destructuring dalam JavaScript?",options:["Menghancurkan objek","Mengekstrak nilai dari array/objek","Membuat array baru","Menghapus properti"],correct:1}]}},{id:3,title:"UI/UX Design Fundamentals",description:"Learn the principles of user interface and user experience design",category:"Design",level:"Beginner",duration:"5 weeks",instructor:"Mike Johnson",rating:4.7,students:2156,image:"https://images.unsplash.com/photo-1561070791-2526d30994b5?w=300&h=200&fit=crop&crop=center",isEnrolled:!0,progress:30,introMaterial:{title:"Dasar-dasar UI/UX Design",content:[{type:"text",content:"Selamat datang di kursus UI/UX Design Fundamentals! Dalam era digital ini, kemampuan merancang interface yang user-friendly dan pengalaman pengguna yang optimal sangat penting."},{type:"text",content:"UI (User Interface) dan UX (User Experience) adalah dua aspek yang saling berkaitan dalam menciptakan produk digital yang sukses. Kursus ini akan memberikan Anda fondasi yang kuat dalam kedua bidang tersebut."},{type:"image",src:"https://images.unsplash.com/photo-1586717791821-3f44a563fa4c?w=600&h=300&fit=crop&crop=center",alt:"UI/UX Design Process",caption:"Proses design thinking dalam UI/UX"},{type:"text",content:"Yang akan Anda pelajari:"},{type:"list",items:["Prinsip-prinsip dasar UI Design","User Research dan Persona Development","Wireframing dan Prototyping","Color Theory dan Typography","Usability Testing","Design Systems dan Style Guides"]},{type:"video",src:"https://www.youtube.com/embed/c9Wg6Cb_YlU",title:"Introduction to UI/UX Design",duration:"7:45"}]},lessons:[{id:1,title:"Pengenalan UI/UX Design",type:"reading",content:"\n# UI/UX Design Fundamentals\n\nUI/UX Design adalah bidang yang menggabungkan seni dan sains untuk menciptakan pengalaman digital yang optimal.\n\n## Perbedaan UI dan UX\n\n**UI (User Interface)** fokus pada tampilan visual dan interaksi.\n**UX (User Experience)** fokus pada keseluruhan pengalaman pengguna.\n\n## Prinsip Design\n\n1. **Usability**: Mudah digunakan\n2. **Accessibility**: Dapat diakses semua orang\n3. **Consistency**: Konsisten dalam design\n4. **Feedback**: Memberikan feedback yang jelas\n\n## Design Process\n\n1. Research\n2. Ideation\n3. Prototyping\n4. Testing\n5. Implementation\n        "}],preTest:{id:"pre3",title:"Pre-Test: UI/UX Design",questions:[{id:1,question:"UI adalah singkatan dari?",options:["User Interface","User Integration","Universal Interface","Unified Interface"],correct:0},{id:2,question:"UX adalah singkatan dari?",options:["User Experience","User Extension","Universal Experience","User Execution"],correct:0},{id:3,question:"Apa perbedaan utama antara UI dan UX?",options:["UI fokus pada tampilan, UX fokus pada pengalaman","Tidak ada perbedaan","UI lebih penting dari UX","UX hanya untuk mobile"],correct:0}]},postTest:{id:"post3",title:"Post-Test: UI/UX Design",questions:[{id:1,question:"Prinsip utama dalam UX Design adalah?",options:["Estetika","Usability","Kompleksitas","Teknologi"],correct:1},{id:2,question:"Apa itu wireframe dalam UI/UX Design?",options:["Gambar final produk","Sketsa dasar layout dan struktur","Kode program","Database design"],correct:1},{id:3,question:"User persona digunakan untuk?",options:["Memahami target pengguna","Membuat kode","Testing aplikasi","Marketing produk"],correct:0},{id:4,question:"Apa itu prototyping dalam design process?",options:["Membuat model awal untuk testing","Menulis dokumentasi","Coding aplikasi","Deployment produk"],correct:0},{id:5,question:"Accessibility dalam design berarti?",options:["Design yang dapat diakses oleh semua orang termasuk disabilitas","Design yang mudah diubah","Design yang cepat loading","Design yang murah"],correct:0}]}},{id:4,title:"Backend Development with Node.js",description:"Pelajari pengembangan backend menggunakan Node.js, Express, dan database",instructor:"Sarah Johnson",duration:"12 minggu",level:"Intermediate",rating:4.9,students:1876,image:"https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=300&h=200&fit=crop&crop=center",isEnrolled:!0,progress:0,introMaterial:{title:"Selamat Datang di Backend Development",content:[{type:"text",content:"Selamat datang di course Backend Development! Dalam course ini, Anda akan mempelajari cara membangun aplikasi backend yang scalable dan secure menggunakan Node.js."},{type:"text",content:"Course ini mencakup konsep fundamental backend development, RESTful APIs, database integration, authentication, dan deployment."},{type:"list",items:["Fundamental Node.js dan JavaScript ES6+","Express.js framework untuk web applications","Database integration (MongoDB, PostgreSQL)","RESTful API design dan implementation","Authentication dan authorization","Testing dan debugging techniques","Deployment dan DevOps basics"]},{type:"image",src:"https://images.unsplash.com/photo-1627398242454-45a1465c2479?w=600&h=300&fit=crop&crop=center",alt:"Backend Development Architecture",caption:"Arsitektur backend modern dengan microservices"},{type:"pdf",title:"Node.js Practices Guide",description:"Panduan lengkap best practices untuk Node.js development",url:"https://www.anuragkapur.com/assets/blog/programming/node/PDF-Guide-Node-Andrew-Mead-v3.pdf",downloadUrl:"https://www.anuragkapur.com/assets/blog/programming/node/PDF-Guide-Node-Andrew-Mead-v3.pdf",embedUrl:"https://docs.google.com/viewer?url=https://www.anuragkapur.com/assets/blog/programming/node/PDF-Guide-Node-Andrew-Mead-v3.pdf&embedded=true"},{type:"external_link",title:"Express.js Official Documentation",description:"Dokumentasi resmi Express.js framework",url:"https://expressjs.com/"},{type:"video",src:"https://www.youtube.com/embed/fBNz5xF-Kx4",title:"Introduction to Backend Development",duration:"10:15"}]},lessons:[{id:1,title:"Pengenalan Backend Development",type:"mixed",content:[{type:"text",content:"# Backend Development Fundamentals\n\nBackend development adalah proses membangun server-side logic, database, dan API yang mendukung aplikasi web dan mobile."},{type:"image",src:"https://images.unsplash.com/photo-1544197150-b99a580bb7a8?w=600&h=300&fit=crop&crop=center",alt:"Server Architecture",caption:"Arsitektur server modern"},{type:"text",content:"## Komponen Utama Backend\n\n1. **Server**: Menangani request dan response\n2. **Database**: Menyimpan dan mengelola data\n3. **API**: Interface untuk komunikasi dengan frontend\n4. **Authentication**: Sistem keamanan dan otorisasi"},{type:"code",language:"javascript",content:"// Contoh server sederhana dengan Express.js\nconst express = require('express');\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.json({ message: 'Hello Backend!' });\n});\n\napp.listen(3000, () => {\n  console.log('Server running on port 3000');\n});"},{type:"external_link",title:"Node.js Official Website",description:"Pelajari lebih lanjut tentang Node.js runtime",url:"https://nodejs.org/"}]},{id:2,title:"Setting Up Development Environment",type:"mixed",content:[{type:"text",content:"# Setting Up Node.js Development Environment\n\nUntuk memulai backend development, kita perlu menyiapkan environment yang tepat."},{type:"pdf",title:"Node.js Installation Guide",description:"Panduan lengkap instalasi dan konfigurasi Node.js",url:"https://nodejs.org/dist/latest-v18.x/docs/api/documentation.pdf",downloadUrl:"https://nodejs.org/dist/latest-v18.x/docs/api/documentation.pdf",embedUrl:"https://docs.google.com/viewer?url=https://nodejs.org/dist/latest-v18.x/docs/api/documentation.pdf&embedded=true"},{type:"text",content:"## Prerequisites\n\n1. **Node.js**: Runtime JavaScript untuk server\n2. **npm/yarn**: Package manager\n3. **Code Editor**: VS Code, WebStorm, atau editor favorit\n4. **Database**: MongoDB, PostgreSQL, atau MySQL"},{type:"code",language:"bash",content:"# Verify Installation\nnode --version\nnpm --version\n\n# Create Project\nmkdir my-backend-app\ncd my-backend-app\nnpm init -y"}]},{id:3,title:"Building RESTful APIs",type:"mixed",content:[{type:"text",content:"# Building RESTful APIs\n\nRESTful API adalah arsitektur untuk membangun web services yang menggunakan HTTP methods untuk operasi CRUD."},{type:"pdf",title:"RESTful API Design Guide",description:"Panduan lengkap desain dan implementasi RESTful API",url:"https://restfulapi.net/wp-content/uploads/REST-API-design-guide.pdf",downloadUrl:"https://restfulapi.net/wp-content/uploads/REST-API-design-guide.pdf",embedUrl:"https://docs.google.com/viewer?url=https://restfulapi.net/wp-content/uploads/REST-API-design-guide.pdf&embedded=true"},{type:"video",src:"https://www.youtube.com/embed/pKd0Rpw7O48",title:"Building RESTful APIs with Express.js",duration:"15:30"},{type:"code",language:"javascript",content:"// Contoh RESTful API dengan Express.js\nconst express = require('express');\nconst app = express();\n\napp.use(express.json());\n\n// GET - Read all users\napp.get('/api/users', (req, res) => {\n  res.json({ users: [] });\n});\n\n// POST - Create new user\napp.post('/api/users', (req, res) => {\n  const { name, email } = req.body;\n  res.json({ id: 1, name, email });\n});\n\n// PUT - Update user\napp.put('/api/users/:id', (req, res) => {\n  const { id } = req.params;\n  const { name, email } = req.body;\n  res.json({ id, name, email });\n});\n\n// DELETE - Delete user\napp.delete('/api/users/:id', (req, res) => {\n  res.json({ message: 'User deleted' });\n});"}]}],preTest:{id:"pre4",title:"Pre-Test: Backend Development Fundamentals",questions:[{id:1,question:"Node.js adalah?",options:["Framework JavaScript","Runtime JavaScript","Database","Web Browser"],correct:1},{id:2,question:"Apa kepanjangan dari API?",options:["Application Programming Interface","Advanced Programming Interface","Automated Programming Interface","Application Process Interface"],correct:0},{id:3,question:"HTTP method untuk mengambil data adalah?",options:["POST","PUT","GET","DELETE"],correct:2},{id:4,question:"Express.js adalah?",options:["Database","Web framework untuk Node.js","Frontend library","Testing tool"],correct:1},{id:5,question:"JSON singkatan dari?",options:["JavaScript Object Notation","Java Standard Object Notation","JavaScript Online Notation","Java Script Object Network"],correct:0}]},postTest:{id:"post4",title:"Post-Test: Backend Development with Node.js",questions:[{id:1,question:"Middleware dalam Express.js berfungsi untuk?",options:["Styling","Memproses request sebelum mencapai route handler","Database connection","Frontend rendering"],correct:1},{id:2,question:"HTTP status code 201 menandakan?",options:["Not Found","Server Error","Created","Unauthorized"],correct:2},{id:3,question:"RESTful API menggunakan HTTP methods untuk?",options:["Styling","CRUD operations","Authentication only","File upload only"],correct:1},{id:4,question:"npm adalah?",options:["Node Package Manager","New Programming Method","Network Protocol Manager","Node Process Manager"],correct:0},{id:5,question:"Async/await dalam Node.js digunakan untuk?",options:["Styling","Menangani operasi asynchronous","Database schema","Frontend routing"],correct:1},{id:6,question:"Environment variables dalam Node.js biasanya disimpan di?",options:["package.json",".env file","index.js","node_modules"],correct:1},{id:7,question:"CORS adalah?",options:["Cross-Origin Resource Sharing","Core Object Resource System","Cross-Origin Request Security","Core Origin Resource Sharing"],correct:0},{id:8,question:"JWT singkatan dari?",options:["Java Web Token","JavaScript Web Tool","JSON Web Token","Java Web Tool"],correct:2}]},quiz:{questions:[{id:1,question:"Apa kepanjangan dari API?",options:["Application Programming Interface","Advanced Programming Interface","Automated Programming Interface","Application Process Interface"],correctAnswer:0,explanation:"API adalah Application Programming Interface, yaitu interface yang memungkinkan komunikasi antar aplikasi."},{id:2,question:"HTTP method mana yang digunakan untuk membuat data baru?",options:["GET","POST","PUT","DELETE"],correctAnswer:1,explanation:"POST digunakan untuk membuat resource baru di server."}]}}],r=a},99294:(e,s,t)=>{Promise.resolve().then(t.bind(t,15114))}},e=>{var s=s=>e(e.s=s);e.O(0,[45,465,441,684,358],()=>s(99294)),_N_E=e.O()}]);